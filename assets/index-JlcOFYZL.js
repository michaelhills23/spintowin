(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var hb={exports:{}},Yf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hN=Symbol.for("react.transitional.element"),fN=Symbol.for("react.fragment");function fb(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:hN,type:t,key:i,ref:e!==void 0?e:null,props:n}}Yf.Fragment=fN;Yf.jsx=fb;Yf.jsxs=fb;hb.exports=Yf;var A=hb.exports,db={exports:{}},ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey=Symbol.for("react.transitional.element"),dN=Symbol.for("react.portal"),mN=Symbol.for("react.fragment"),pN=Symbol.for("react.strict_mode"),gN=Symbol.for("react.profiler"),yN=Symbol.for("react.consumer"),_N=Symbol.for("react.context"),vN=Symbol.for("react.forward_ref"),EN=Symbol.for("react.suspense"),TN=Symbol.for("react.memo"),mb=Symbol.for("react.lazy"),SN=Symbol.for("react.activity"),CE=Symbol.iterator;function wN(t){return t===null||typeof t!="object"?null:(t=CE&&t[CE]||t["@@iterator"],typeof t=="function"?t:null)}var pb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gb=Object.assign,yb={};function xo(t,e,n){this.props=t,this.context=e,this.refs=yb,this.updater=n||pb}xo.prototype.isReactComponent={};xo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _b(){}_b.prototype=xo.prototype;function ty(t,e,n){this.props=t,this.context=e,this.refs=yb,this.updater=n||pb}var ny=ty.prototype=new _b;ny.constructor=ty;gb(ny,xo.prototype);ny.isPureReactComponent=!0;var DE=Array.isArray;function _p(){}var Le={H:null,A:null,T:null,S:null},vb=Object.prototype.hasOwnProperty;function iy(t,e,n){var i=n.ref;return{$$typeof:ey,type:t,key:e,ref:i!==void 0?i:null,props:n}}function bN(t,e){return iy(t.type,e,t.props)}function ry(t){return typeof t=="object"&&t!==null&&t.$$typeof===ey}function AN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var NE=/\/+/g;function gm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?AN(""+t.key):e.toString(36)}function IN(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(_p,_p):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function _a(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ey:case dN:a=!0;break;case mb:return a=t._init,_a(a(t._payload),e,n,i,r)}}if(a)return r=r(t),a=i===""?"."+gm(t,0):i,DE(r)?(n="",a!=null&&(n=a.replace(NE,"$&/")+"/"),_a(r,e,n,"",function(c){return c})):r!=null&&(ry(r)&&(r=bN(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(NE,"$&/")+"/")+a)),e.push(r)),1;a=0;var o=i===""?".":i+":";if(DE(t))for(var l=0;l<t.length;l++)i=t[l],s=o+gm(i,l),a+=_a(i,e,n,s,r);else if(l=wN(t),typeof l=="function")for(t=l.call(t),l=0;!(i=t.next()).done;)i=i.value,s=o+gm(i,l++),a+=_a(i,e,n,s,r);else if(s==="object"){if(typeof t.then=="function")return _a(IN(t),e,n,i,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function qc(t,e,n){if(t==null)return t;var i=[],r=0;return _a(t,i,"","",function(s){return e.call(n,s,r++)}),i}function RN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xE=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},CN={map:qc,forEach:function(t,e,n){qc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qc(t,function(){e++}),e},toArray:function(t){return qc(t,function(e){return e})||[]},only:function(t){if(!ry(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Activity=SN;ie.Children=CN;ie.Component=xo;ie.Fragment=mN;ie.Profiler=gN;ie.PureComponent=ty;ie.StrictMode=pN;ie.Suspense=EN;ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Le;ie.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Le.H.useMemoCache(t)}};ie.cache=function(t){return function(){return t.apply(null,arguments)}};ie.cacheSignal=function(){return null};ie.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=gb({},t.props),r=t.key;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)!vb.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(i[s]=e[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];i.children=a}return iy(t.type,r,i)};ie.createContext=function(t){return t={$$typeof:_N,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:yN,_context:t},t};ie.createElement=function(t,e,n){var i,r={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)vb.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return iy(t,s,r)};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:vN,render:t}};ie.isValidElement=ry;ie.lazy=function(t){return{$$typeof:mb,_payload:{_status:-1,_result:t},_init:RN}};ie.memo=function(t,e){return{$$typeof:TN,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=Le.T,n={};Le.T=n;try{var i=t(),r=Le.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(_p,xE)}catch(s){xE(s)}finally{e!==null&&n.types!==null&&(e.types=n.types),Le.T=e}};ie.unstable_useCacheRefresh=function(){return Le.H.useCacheRefresh()};ie.use=function(t){return Le.H.use(t)};ie.useActionState=function(t,e,n){return Le.H.useActionState(t,e,n)};ie.useCallback=function(t,e){return Le.H.useCallback(t,e)};ie.useContext=function(t){return Le.H.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t,e){return Le.H.useDeferredValue(t,e)};ie.useEffect=function(t,e){return Le.H.useEffect(t,e)};ie.useEffectEvent=function(t){return Le.H.useEffectEvent(t)};ie.useId=function(){return Le.H.useId()};ie.useImperativeHandle=function(t,e,n){return Le.H.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return Le.H.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return Le.H.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return Le.H.useMemo(t,e)};ie.useOptimistic=function(t,e){return Le.H.useOptimistic(t,e)};ie.useReducer=function(t,e,n){return Le.H.useReducer(t,e,n)};ie.useRef=function(t){return Le.H.useRef(t)};ie.useState=function(t){return Le.H.useState(t)};ie.useSyncExternalStore=function(t,e,n){return Le.H.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return Le.H.useTransition()};ie.version="19.2.3";db.exports=ie;var V=db.exports,Eb={exports:{}},Wf={},Tb={exports:{}},Sb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,te){var ee=K.length;K.push(te);e:for(;0<ee;){var be=ee-1>>>1,He=K[be];if(0<r(He,te))K[be]=te,K[ee]=He,ee=be;else break e}}function n(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var te=K[0],ee=K.pop();if(ee!==te){K[0]=ee;e:for(var be=0,He=K.length,Bn=He>>>1;be<Bn;){var $=2*(be+1)-1,et=K[$],mt=$+1,qi=K[mt];if(0>r(et,ee))mt<He&&0>r(qi,et)?(K[be]=qi,K[mt]=ee,be=mt):(K[be]=et,K[$]=ee,be=$);else if(mt<He&&0>r(qi,ee))K[be]=qi,K[mt]=ee,be=mt;else break e}}return te}function r(K,te){var ee=K.sortIndex-te.sortIndex;return ee!==0?ee:K.id-te.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],h=1,f=null,m=3,g=!1,w=!1,I=!1,N=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function x(K){for(var te=n(c);te!==null;){if(te.callback===null)i(c);else if(te.startTime<=K)i(c),te.sortIndex=te.expirationTime,e(l,te);else break;te=n(c)}}function U(K){if(I=!1,x(K),!w)if(n(l)!==null)w=!0,F||(F=!0,P());else{var te=n(c);te!==null&&St(U,te.startTime-K)}}var F=!1,S=-1,T=5,b=-1;function C(){return N?!0:!(t.unstable_now()-b<T)}function D(){if(N=!1,F){var K=t.unstable_now();b=K;var te=!0;try{e:{w=!1,I&&(I=!1,y(S),S=-1),g=!0;var ee=m;try{t:{for(x(K),f=n(l);f!==null&&!(f.expirationTime>K&&C());){var be=f.callback;if(typeof be=="function"){f.callback=null,m=f.priorityLevel;var He=be(f.expirationTime<=K);if(K=t.unstable_now(),typeof He=="function"){f.callback=He,x(K),te=!0;break t}f===n(l)&&i(l),x(K)}else i(l);f=n(l)}if(f!==null)te=!0;else{var Bn=n(c);Bn!==null&&St(U,Bn.startTime-K),te=!1}}break e}finally{f=null,m=ee,g=!1}te=void 0}}finally{te?P():F=!1}}}var P;if(typeof E=="function")P=function(){E(D)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Ze=R.port2;R.port1.onmessage=D,P=function(){Ze.postMessage(null)}}else P=function(){v(D,0)};function St(K,te){S=v(function(){K(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(K){switch(m){case 1:case 2:case 3:var te=3;break;default:te=m}var ee=m;m=te;try{return K()}finally{m=ee}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(K,te){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ee=m;m=K;try{return te()}finally{m=ee}},t.unstable_scheduleCallback=function(K,te,ee){var be=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?be+ee:be):ee=be,K){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=ee+He,K={id:h++,callback:te,priorityLevel:K,startTime:ee,expirationTime:He,sortIndex:-1},ee>be?(K.sortIndex=ee,e(c,K),n(l)===null&&K===n(c)&&(I?(y(S),S=-1):I=!0,St(U,ee-be))):(K.sortIndex=He,e(l,K),w||g||(w=!0,F||(F=!0,P()))),K},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(K){var te=m;return function(){var ee=m;m=te;try{return K.apply(this,arguments)}finally{m=ee}}}})(Sb);Tb.exports=Sb;var DN=Tb.exports,wb={exports:{}},zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NN=V;function bb(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Wi(){}var Ut={d:{f:Wi,r:function(){throw Error(bb(522))},D:Wi,C:Wi,L:Wi,m:Wi,X:Wi,S:Wi,M:Wi},p:0,findDOMNode:null},xN=Symbol.for("react.portal");function VN(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xN,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var Hl=NN.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Xf(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ut;zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(bb(299));return VN(t,e,null,n)};zt.flushSync=function(t){var e=Hl.T,n=Ut.p;try{if(Hl.T=null,Ut.p=2,t)return t()}finally{Hl.T=e,Ut.p=n,Ut.d.f()}};zt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Ut.d.C(t,e))};zt.prefetchDNS=function(t){typeof t=="string"&&Ut.d.D(t)};zt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=Xf(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Ut.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&Ut.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};zt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Xf(e.as,e.crossOrigin);Ut.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Ut.d.M(t)};zt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=Xf(n,e.crossOrigin);Ut.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};zt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Xf(e.as,e.crossOrigin);Ut.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Ut.d.m(t)};zt.requestFormReset=function(t){Ut.d.r(t)};zt.unstable_batchedUpdates=function(t,e){return t(e)};zt.useFormState=function(t,e,n){return Hl.H.useFormState(t,e,n)};zt.useFormStatus=function(){return Hl.H.useHostTransitionStatus()};zt.version="19.2.3";function Ab(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ab)}catch(t){console.error(t)}}Ab(),wb.exports=zt;var PN=wb.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ct=DN,Ib=V,ON=PN;function B(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Rb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Cb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Db(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function VE(t){if(Yu(t)!==t)throw Error(B(188))}function MN(t){var e=t.alternate;if(!e){if(e=Yu(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return VE(r),t;if(s===i)return VE(r),e;s=s.sibling}throw Error(B(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===n){a=!0,n=r,i=s;break}if(o===i){a=!0,i=r,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,i=r;break}if(o===i){a=!0,i=s,n=r;break}o=o.sibling}if(!a)throw Error(B(189))}}if(n.alternate!==i)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function Nb(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=Nb(t),e!==null)return e;t=t.sibling}return null}var Ue=Object.assign,kN=Symbol.for("react.element"),Hc=Symbol.for("react.transitional.element"),Pl=Symbol.for("react.portal"),Ia=Symbol.for("react.fragment"),xb=Symbol.for("react.strict_mode"),vp=Symbol.for("react.profiler"),Vb=Symbol.for("react.consumer"),hi=Symbol.for("react.context"),sy=Symbol.for("react.forward_ref"),Ep=Symbol.for("react.suspense"),Tp=Symbol.for("react.suspense_list"),ay=Symbol.for("react.memo"),tr=Symbol.for("react.lazy"),Sp=Symbol.for("react.activity"),LN=Symbol.for("react.memo_cache_sentinel"),PE=Symbol.iterator;function vl(t){return t===null||typeof t!="object"?null:(t=PE&&t[PE]||t["@@iterator"],typeof t=="function"?t:null)}var UN=Symbol.for("react.client.reference");function wp(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===UN?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ia:return"Fragment";case vp:return"Profiler";case xb:return"StrictMode";case Ep:return"Suspense";case Tp:return"SuspenseList";case Sp:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Pl:return"Portal";case hi:return t.displayName||"Context";case Vb:return(t._context.displayName||"Context")+".Consumer";case sy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ay:return e=t.displayName||null,e!==null?e:wp(t.type)||"Memo";case tr:e=t._payload,t=t._init;try{return wp(t(e))}catch{}}return null}var Ol=Array.isArray,Z=Ib.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge=ON.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,bs={pending:!1,data:null,method:null,action:null},bp=[],Ra=-1;function ti(t){return{current:t}}function Et(t){0>Ra||(t.current=bp[Ra],bp[Ra]=null,Ra--)}function Ne(t,e){Ra++,bp[Ra]=t.current,t.current=e}var Wn=ti(null),gu=ti(null),Er=ti(null),Kh=ti(null);function Qh(t,e){switch(Ne(Er,e),Ne(gu,t),Ne(Wn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?zT(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=zT(e),t=J0(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Et(Wn),Ne(Wn,t)}function Wa(){Et(Wn),Et(gu),Et(Er)}function Ap(t){t.memoizedState!==null&&Ne(Kh,t);var e=Wn.current,n=J0(e,t.type);e!==n&&(Ne(gu,t),Ne(Wn,n))}function $h(t){gu.current===t&&(Et(Wn),Et(gu)),Kh.current===t&&(Et(Kh),Ru._currentValue=bs)}var ym,OE;function hs(t){if(ym===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ym=e&&e[1]||"",OE=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ym+t+OE}var _m=!1;function vm(t,e){if(!t||_m)return"";_m=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(g){var m=g}Reflect.construct(t,[],f)}else{try{f.call()}catch(g){m=g}t.call(f.prototype)}}else{try{throw Error()}catch(g){m=g}(f=t())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(g){if(g&&m&&typeof g.stack=="string")return[g.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split(`
`),c=o.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==c[r]){var h=`
`+l[i].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=i&&0<=r);break}}}finally{_m=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?hs(n):""}function zN(t,e){switch(t.tag){case 26:case 27:case 5:return hs(t.type);case 16:return hs("Lazy");case 13:return t.child!==e&&e!==null?hs("Suspense Fallback"):hs("Suspense");case 19:return hs("SuspenseList");case 0:case 15:return vm(t.type,!1);case 11:return vm(t.type.render,!1);case 1:return vm(t.type,!0);case 31:return hs("Activity");default:return""}}function ME(t){try{var e="",n=null;do e+=zN(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Ip=Object.prototype.hasOwnProperty,oy=ct.unstable_scheduleCallback,Em=ct.unstable_cancelCallback,BN=ct.unstable_shouldYield,jN=ct.unstable_requestPaint,ln=ct.unstable_now,FN=ct.unstable_getCurrentPriorityLevel,Pb=ct.unstable_ImmediatePriority,Ob=ct.unstable_UserBlockingPriority,Yh=ct.unstable_NormalPriority,qN=ct.unstable_LowPriority,Mb=ct.unstable_IdlePriority,HN=ct.log,GN=ct.unstable_setDisableYieldValue,Wu=null,un=null;function dr(t){if(typeof HN=="function"&&GN(t),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(Wu,t)}catch{}}var cn=Math.clz32?Math.clz32:$N,KN=Math.log,QN=Math.LN2;function $N(t){return t>>>=0,t===0?32:31-(KN(t)/QN|0)|0}var Gc=256,Kc=262144,Qc=4194304;function fs(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Jf(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=i&134217727;return o!==0?(i=o&~s,i!==0?r=fs(i):(a&=o,a!==0?r=fs(a):n||(n=o&~t,n!==0&&(r=fs(n))))):(o=i&~s,o!==0?r=fs(o):a!==0?r=fs(a):n||(n=i&~t,n!==0&&(r=fs(n)))),r===0?0:e!==0&&e!==r&&!(e&s)&&(s=r&-r,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:r}function Xu(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function YN(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kb(){var t=Qc;return Qc<<=1,!(Qc&62914560)&&(Qc=4194304),t}function Tm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ju(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function WN(t,e,n,i,r,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,c=t.hiddenUpdates;for(n=a&~n;0<n;){var h=31-cn(n),f=1<<h;o[h]=0,l[h]=-1;var m=c[h];if(m!==null)for(c[h]=null,h=0;h<m.length;h++){var g=m[h];g!==null&&(g.lane&=-536870913)}n&=~f}i!==0&&Lb(t,i,0),s!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=s&~(a&~e))}function Lb(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-cn(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function Ub(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-cn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function zb(t,e){var n=e&-e;return n=n&42?1:ly(n),n&(t.suspendedLanes|e)?0:n}function ly(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function uy(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function Bb(){var t=ge.p;return t!==0?t:(t=window.event,t===void 0?32:uI(t.type))}function kE(t,e){var n=ge.p;try{return ge.p=t,e()}finally{ge.p=n}}var Kr=Math.random().toString(36).slice(2),At="__reactFiber$"+Kr,Xt="__reactProps$"+Kr,Vo="__reactContainer$"+Kr,Rp="__reactEvents$"+Kr,XN="__reactListeners$"+Kr,JN="__reactHandles$"+Kr,LE="__reactResources$"+Kr,Zu="__reactMarker$"+Kr;function cy(t){delete t[At],delete t[Xt],delete t[Rp],delete t[XN],delete t[JN]}function Ca(t){var e=t[At];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vo]||n[At]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=HT(t);t!==null;){if(n=t[At])return n;t=HT(t)}return e}t=n,n=t.parentNode}return null}function Po(t){if(t=t[At]||t[Vo]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Ml(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(B(33))}function Ua(t){var e=t[LE];return e||(e=t[LE]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function vt(t){t[Zu]=!0}var jb=new Set,Fb={};function Ws(t,e){Xa(t,e),Xa(t+"Capture",e)}function Xa(t,e){for(Fb[t]=e,t=0;t<e.length;t++)jb.add(e[t])}var ZN=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),UE={},zE={};function ex(t){return Ip.call(zE,t)?!0:Ip.call(UE,t)?!1:ZN.test(t)?zE[t]=!0:(UE[t]=!0,!1)}function ph(t,e,n){if(ex(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function $c(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function ii(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function vn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tx(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cp(t){if(!t._valueTracker){var e=qb(t)?"checked":"value";t._valueTracker=tx(t,e,""+t[e])}}function Hb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=qb(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Wh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var nx=/[\n"\\]/g;function Sn(t){return t.replace(nx,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Dp(t,e,n,i,r,s,a,o){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+vn(e)):t.value!==""+vn(e)&&(t.value=""+vn(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?Np(t,a,vn(e)):n!=null?Np(t,a,vn(n)):i!=null&&t.removeAttribute("value"),r==null&&s!=null&&(t.defaultChecked=!!s),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+vn(o):t.removeAttribute("name")}function Gb(t,e,n,i,r,s,a,o){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){Cp(t);return}n=n!=null?""+vn(n):"",e=e!=null?""+vn(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=o?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),Cp(t)}function Np(t,e,n){e==="number"&&Wh(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function za(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+vn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Kb(t,e,n){if(e!=null&&(e=""+vn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+vn(n):""}function Qb(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(B(92));if(Ol(i)){if(1<i.length)throw Error(B(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=vn(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),Cp(t)}function Ja(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ix=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function BE(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||ix.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function $b(t,e,n){if(e!=null&&typeof e!="object")throw Error(B(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&BE(t,r,i)}else for(var s in e)e.hasOwnProperty(s)&&BE(t,s,e[s])}function hy(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gh(t){return sx.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function fi(){}var xp=null;function fy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Da=null,Ba=null;function jE(t){var e=Po(t);if(e&&(t=e.stateNode)){var n=t[Xt]||null;e:switch(t=e.stateNode,e.type){case"input":if(Dp(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Sn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[Xt]||null;if(!r)throw Error(B(90));Dp(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&Hb(i)}break e;case"textarea":Kb(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&za(t,!!n.multiple,e,!1)}}}var Sm=!1;function Yb(t,e,n){if(Sm)return t(e,n);Sm=!0;try{var i=t(e);return i}finally{if(Sm=!1,(Da!==null||Ba!==null)&&(cd(),Da&&(e=Da,t=Ba,Ba=Da=null,jE(e),t)))for(e=0;e<t.length;e++)jE(t[e])}}function yu(t,e){var n=t.stateNode;if(n===null)return null;var i=n[Xt]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vp=!1;if(Ai)try{var El={};Object.defineProperty(El,"passive",{get:function(){Vp=!0}}),window.addEventListener("test",El,El),window.removeEventListener("test",El,El)}catch{Vp=!1}var mr=null,dy=null,yh=null;function Wb(){if(yh)return yh;var t,e=dy,n=e.length,i,r="value"in mr?mr.value:mr.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return yh=r.slice(t,1<i?1-i:void 0)}function _h(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yc(){return!0}function FE(){return!1}function Jt(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Yc:FE,this.isPropagationStopped=FE,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yc)},persist:function(){},isPersistent:Yc}),e}var Xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zf=Jt(Xs),ec=Ue({},Xs,{view:0,detail:0}),ax=Jt(ec),wm,bm,Tl,ed=Ue({},ec,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:my,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tl&&(Tl&&t.type==="mousemove"?(wm=t.screenX-Tl.screenX,bm=t.screenY-Tl.screenY):bm=wm=0,Tl=t),wm)},movementY:function(t){return"movementY"in t?t.movementY:bm}}),qE=Jt(ed),ox=Ue({},ed,{dataTransfer:0}),lx=Jt(ox),ux=Ue({},ec,{relatedTarget:0}),Am=Jt(ux),cx=Ue({},Xs,{animationName:0,elapsedTime:0,pseudoElement:0}),hx=Jt(cx),fx=Ue({},Xs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dx=Jt(fx),mx=Ue({},Xs,{data:0}),HE=Jt(mx),px={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _x(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=yx[t])?!!e[t]:!1}function my(){return _x}var vx=Ue({},ec,{key:function(t){if(t.key){var e=px[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_h(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:my,charCode:function(t){return t.type==="keypress"?_h(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_h(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ex=Jt(vx),Tx=Ue({},ed,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),GE=Jt(Tx),Sx=Ue({},ec,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:my}),wx=Jt(Sx),bx=Ue({},Xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ax=Jt(bx),Ix=Ue({},ed,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rx=Jt(Ix),Cx=Ue({},Xs,{newState:0,oldState:0}),Dx=Jt(Cx),Nx=[9,13,27,32],py=Ai&&"CompositionEvent"in window,Gl=null;Ai&&"documentMode"in document&&(Gl=document.documentMode);var xx=Ai&&"TextEvent"in window&&!Gl,Xb=Ai&&(!py||Gl&&8<Gl&&11>=Gl),KE=" ",QE=!1;function Jb(t,e){switch(t){case"keyup":return Nx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Na=!1;function Vx(t,e){switch(t){case"compositionend":return Zb(e);case"keypress":return e.which!==32?null:(QE=!0,KE);case"textInput":return t=e.data,t===KE&&QE?null:t;default:return null}}function Px(t,e){if(Na)return t==="compositionend"||!py&&Jb(t,e)?(t=Wb(),yh=dy=mr=null,Na=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xb&&e.locale!=="ko"?null:e.data;default:return null}}var Ox={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $E(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ox[t.type]:e==="textarea"}function eA(t,e,n,i){Da?Ba?Ba.push(i):Ba=[i]:Da=i,e=pf(e,"onChange"),0<e.length&&(n=new Zf("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Kl=null,_u=null;function Mx(t){Y0(t,0)}function td(t){var e=Ml(t);if(Hb(e))return t}function YE(t,e){if(t==="change")return e}var tA=!1;if(Ai){var Im;if(Ai){var Rm="oninput"in document;if(!Rm){var WE=document.createElement("div");WE.setAttribute("oninput","return;"),Rm=typeof WE.oninput=="function"}Im=Rm}else Im=!1;tA=Im&&(!document.documentMode||9<document.documentMode)}function XE(){Kl&&(Kl.detachEvent("onpropertychange",nA),_u=Kl=null)}function nA(t){if(t.propertyName==="value"&&td(_u)){var e=[];eA(e,_u,t,fy(t)),Yb(Mx,e)}}function kx(t,e,n){t==="focusin"?(XE(),Kl=e,_u=n,Kl.attachEvent("onpropertychange",nA)):t==="focusout"&&XE()}function Lx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return td(_u)}function Ux(t,e){if(t==="click")return td(e)}function zx(t,e){if(t==="input"||t==="change")return td(e)}function Bx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fn=typeof Object.is=="function"?Object.is:Bx;function vu(t,e){if(fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Ip.call(e,r)||!fn(t[r],e[r]))return!1}return!0}function JE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ZE(t,e){var n=JE(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=JE(n)}}function iA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rA(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Wh(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wh(t.document)}return e}function gy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var jx=Ai&&"documentMode"in document&&11>=document.documentMode,xa=null,Pp=null,Ql=null,Op=!1;function eT(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Op||xa==null||xa!==Wh(i)||(i=xa,"selectionStart"in i&&gy(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ql&&vu(Ql,i)||(Ql=i,i=pf(Pp,"onSelect"),0<i.length&&(e=new Zf("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=xa)))}function us(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Va={animationend:us("Animation","AnimationEnd"),animationiteration:us("Animation","AnimationIteration"),animationstart:us("Animation","AnimationStart"),transitionrun:us("Transition","TransitionRun"),transitionstart:us("Transition","TransitionStart"),transitioncancel:us("Transition","TransitionCancel"),transitionend:us("Transition","TransitionEnd")},Cm={},sA={};Ai&&(sA=document.createElement("div").style,"AnimationEvent"in window||(delete Va.animationend.animation,delete Va.animationiteration.animation,delete Va.animationstart.animation),"TransitionEvent"in window||delete Va.transitionend.transition);function Js(t){if(Cm[t])return Cm[t];if(!Va[t])return t;var e=Va[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sA)return Cm[t]=e[n];return t}var aA=Js("animationend"),oA=Js("animationiteration"),lA=Js("animationstart"),Fx=Js("transitionrun"),qx=Js("transitionstart"),Hx=Js("transitioncancel"),uA=Js("transitionend"),cA=new Map,Mp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mp.push("scrollEnd");function Un(t,e){cA.set(t,e),Ws(e,[t])}var Xh=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},_n=[],Pa=0,yy=0;function nd(){for(var t=Pa,e=yy=Pa=0;e<t;){var n=_n[e];_n[e++]=null;var i=_n[e];_n[e++]=null;var r=_n[e];_n[e++]=null;var s=_n[e];if(_n[e++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&hA(n,r,s)}}function id(t,e,n,i){_n[Pa++]=t,_n[Pa++]=e,_n[Pa++]=n,_n[Pa++]=i,yy|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function _y(t,e,n,i){return id(t,e,n,i),Jh(t)}function Zs(t,e){return id(t,null,null,e),Jh(t)}function hA(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(r=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,r&&e!==null&&(r=31-cn(n),t=s.hiddenUpdates,i=t[r],i===null?t[r]=[e]:i.push(e),e.lane=n|536870912),s):null}function Jh(t){if(50<nu)throw nu=0,ng=null,Error(B(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Oa={};function Gx(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(t,e,n,i){return new Gx(t,e,n,i)}function vy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ei(t,e){var n=t.alternate;return n===null?(n=rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function fA(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function vh(t,e,n,i,r,s){var a=0;if(i=t,typeof t=="function")vy(t)&&(a=1);else if(typeof t=="string")a=W2(t,n,Wn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Sp:return t=rn(31,n,e,r),t.elementType=Sp,t.lanes=s,t;case Ia:return As(n.children,r,s,e);case xb:a=8,r|=24;break;case vp:return t=rn(12,n,e,r|2),t.elementType=vp,t.lanes=s,t;case Ep:return t=rn(13,n,e,r),t.elementType=Ep,t.lanes=s,t;case Tp:return t=rn(19,n,e,r),t.elementType=Tp,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hi:a=10;break e;case Vb:a=9;break e;case sy:a=11;break e;case ay:a=14;break e;case tr:a=16,i=null;break e}a=29,n=Error(B(130,t===null?"null":typeof t,"")),i=null}return e=rn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function As(t,e,n,i){return t=rn(7,t,i,e),t.lanes=n,t}function Dm(t,e,n){return t=rn(6,t,null,e),t.lanes=n,t}function dA(t){var e=rn(18,null,null,0);return e.stateNode=t,e}function Nm(t,e,n){return e=rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var tT=new WeakMap;function wn(t,e){if(typeof t=="object"&&t!==null){var n=tT.get(t);return n!==void 0?n:(e={value:t,source:e,stack:ME(e)},tT.set(t,e),e)}return{value:t,source:e,stack:ME(e)}}var Ma=[],ka=0,Zh=null,Eu=0,En=[],Tn=0,Or=null,Gn=1,Kn="";function li(t,e){Ma[ka++]=Eu,Ma[ka++]=Zh,Zh=t,Eu=e}function mA(t,e,n){En[Tn++]=Gn,En[Tn++]=Kn,En[Tn++]=Or,Or=t;var i=Gn;t=Kn;var r=32-cn(i)-1;i&=~(1<<r),n+=1;var s=32-cn(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Gn=1<<32-cn(e)+r|n<<r|i,Kn=s+t}else Gn=1<<s|n<<r|i,Kn=t}function Ey(t){t.return!==null&&(li(t,1),mA(t,1,0))}function Ty(t){for(;t===Zh;)Zh=Ma[--ka],Ma[ka]=null,Eu=Ma[--ka],Ma[ka]=null;for(;t===Or;)Or=En[--Tn],En[Tn]=null,Kn=En[--Tn],En[Tn]=null,Gn=En[--Tn],En[Tn]=null}function pA(t,e){En[Tn++]=Gn,En[Tn++]=Kn,En[Tn++]=Or,Gn=e.id,Kn=e.overflow,Or=t}var It=null,Oe=null,de=!1,Tr=null,bn=!1,kp=Error(B(519));function Mr(t){var e=Error(B(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tu(wn(e,t)),kp}function nT(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[At]=t,e[Xt]=i,n){case"dialog":le("cancel",e),le("close",e);break;case"iframe":case"object":case"embed":le("load",e);break;case"video":case"audio":for(n=0;n<Au.length;n++)le(Au[n],e);break;case"source":le("error",e);break;case"img":case"image":case"link":le("error",e),le("load",e);break;case"details":le("toggle",e);break;case"input":le("invalid",e),Gb(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":le("invalid",e);break;case"textarea":le("invalid",e),Qb(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||X0(e.textContent,n)?(i.popover!=null&&(le("beforetoggle",e),le("toggle",e)),i.onScroll!=null&&le("scroll",e),i.onScrollEnd!=null&&le("scrollend",e),i.onClick!=null&&(e.onclick=fi),e=!0):e=!1,e||Mr(t,!0)}function iT(t){for(It=t.return;It;)switch(It.tag){case 5:case 31:case 13:bn=!1;return;case 27:case 3:bn=!0;return;default:It=It.return}}function ca(t){if(t!==It)return!1;if(!de)return iT(t),de=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||og(t.type,t.memoizedProps)),n=!n),n&&Oe&&Mr(t),iT(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));Oe=qT(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));Oe=qT(t)}else e===27?(e=Oe,Qr(t.type)?(t=hg,hg=null,Oe=t):Oe=e):Oe=It?In(t.stateNode.nextSibling):null;return!0}function Ps(){Oe=It=null,de=!1}function xm(){var t=Tr;return t!==null&&(qt===null?qt=t:qt.push.apply(qt,t),Tr=null),t}function Tu(t){Tr===null?Tr=[t]:Tr.push(t)}var Lp=ti(null),ea=null,di=null;function ir(t,e,n){Ne(Lp,e._currentValue),e._currentValue=n}function Ti(t){t._currentValue=Lp.current,Et(Lp)}function Up(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function zp(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;e:for(;s!==null;){var o=s;s=r;for(var l=0;l<e.length;l++)if(o.context===e[l]){s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Up(s.return,n,t),i||(a=null);break e}s=o.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(B(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Up(a,n,t),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function Oo(t,e,n,i){t=null;for(var r=e,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(B(387));if(a=a.memoizedProps,a!==null){var o=r.type;fn(r.pendingProps.value,a.value)||(t!==null?t.push(o):t=[o])}}else if(r===Kh.current){if(a=r.alternate,a===null)throw Error(B(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(Ru):t=[Ru])}r=r.return}t!==null&&zp(e,t,n,i),e.flags|=262144}function ef(t){for(t=t.firstContext;t!==null;){if(!fn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Os(t){ea=t,di=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ct(t){return gA(ea,t)}function Wc(t,e){return ea===null&&Os(t),gA(t,e)}function gA(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},di===null){if(t===null)throw Error(B(308));di=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else di=di.next=e;return n}var Kx=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},Qx=ct.unstable_scheduleCallback,$x=ct.unstable_NormalPriority,st={$$typeof:hi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sy(){return{controller:new Kx,data:new Map,refCount:0}}function tc(t){t.refCount--,t.refCount===0&&Qx($x,function(){t.controller.abort()})}var $l=null,Bp=0,Za=0,ja=null;function Yx(t,e){if($l===null){var n=$l=[];Bp=0,Za=Qy(),ja={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Bp++,e.then(rT,rT),e}function rT(){if(--Bp===0&&$l!==null){ja!==null&&(ja.status="fulfilled");var t=$l;$l=null,Za=0,ja=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function Wx(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var sT=Z.S;Z.S=function(t,e){N0=ln(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&Yx(t,e),sT!==null&&sT(t,e)};var Is=ti(null);function wy(){var t=Is.current;return t!==null?t:De.pooledCache}function Eh(t,e){e===null?Ne(Is,Is.current):Ne(Is,e.pool)}function yA(){var t=wy();return t===null?null:{parent:st._currentValue,pool:t}}var Mo=Error(B(460)),by=Error(B(474)),rd=Error(B(542)),tf={then:function(){}};function aT(t){return t=t.status,t==="fulfilled"||t==="rejected"}function _A(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(fi,fi),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,lT(t),t;default:if(typeof e.status=="string")e.then(fi,fi);else{if(t=De,t!==null&&100<t.shellSuspendCounter)throw Error(B(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,lT(t),t}throw Rs=e,Mo}}function ds(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Rs=n,Mo):n}}var Rs=null;function oT(){if(Rs===null)throw Error(B(459));var t=Rs;return Rs=null,t}function lT(t){if(t===Mo||t===rd)throw Error(B(483))}var Fa=null,Su=0;function Xc(t){var e=Su;return Su+=1,Fa===null&&(Fa=[]),_A(Fa,t,e)}function Sl(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Jc(t,e){throw e.$$typeof===kN?Error(B(525)):(t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function vA(t){function e(v,y){if(t){var E=v.deletions;E===null?(v.deletions=[y],v.flags|=16):E.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function i(v){for(var y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function r(v,y){return v=Ei(v,y),v.index=0,v.sibling=null,v}function s(v,y,E){return v.index=E,t?(E=v.alternate,E!==null?(E=E.index,E<y?(v.flags|=67108866,y):E):(v.flags|=67108866,y)):(v.flags|=1048576,y)}function a(v){return t&&v.alternate===null&&(v.flags|=67108866),v}function o(v,y,E,x){return y===null||y.tag!==6?(y=Dm(E,v.mode,x),y.return=v,y):(y=r(y,E),y.return=v,y)}function l(v,y,E,x){var U=E.type;return U===Ia?h(v,y,E.props.children,x,E.key):y!==null&&(y.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===tr&&ds(U)===y.type)?(y=r(y,E.props),Sl(y,E),y.return=v,y):(y=vh(E.type,E.key,E.props,null,v.mode,x),Sl(y,E),y.return=v,y)}function c(v,y,E,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=Nm(E,v.mode,x),y.return=v,y):(y=r(y,E.children||[]),y.return=v,y)}function h(v,y,E,x,U){return y===null||y.tag!==7?(y=As(E,v.mode,x,U),y.return=v,y):(y=r(y,E),y.return=v,y)}function f(v,y,E){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=Dm(""+y,v.mode,E),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Hc:return E=vh(y.type,y.key,y.props,null,v.mode,E),Sl(E,y),E.return=v,E;case Pl:return y=Nm(y,v.mode,E),y.return=v,y;case tr:return y=ds(y),f(v,y,E)}if(Ol(y)||vl(y))return y=As(y,v.mode,E,null),y.return=v,y;if(typeof y.then=="function")return f(v,Xc(y),E);if(y.$$typeof===hi)return f(v,Wc(v,y),E);Jc(v,y)}return null}function m(v,y,E,x){var U=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return U!==null?null:o(v,y,""+E,x);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Hc:return E.key===U?l(v,y,E,x):null;case Pl:return E.key===U?c(v,y,E,x):null;case tr:return E=ds(E),m(v,y,E,x)}if(Ol(E)||vl(E))return U!==null?null:h(v,y,E,x,null);if(typeof E.then=="function")return m(v,y,Xc(E),x);if(E.$$typeof===hi)return m(v,y,Wc(v,E),x);Jc(v,E)}return null}function g(v,y,E,x,U){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return v=v.get(E)||null,o(y,v,""+x,U);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Hc:return v=v.get(x.key===null?E:x.key)||null,l(y,v,x,U);case Pl:return v=v.get(x.key===null?E:x.key)||null,c(y,v,x,U);case tr:return x=ds(x),g(v,y,E,x,U)}if(Ol(x)||vl(x))return v=v.get(E)||null,h(y,v,x,U,null);if(typeof x.then=="function")return g(v,y,E,Xc(x),U);if(x.$$typeof===hi)return g(v,y,E,Wc(y,x),U);Jc(y,x)}return null}function w(v,y,E,x){for(var U=null,F=null,S=y,T=y=0,b=null;S!==null&&T<E.length;T++){S.index>T?(b=S,S=null):b=S.sibling;var C=m(v,S,E[T],x);if(C===null){S===null&&(S=b);break}t&&S&&C.alternate===null&&e(v,S),y=s(C,y,T),F===null?U=C:F.sibling=C,F=C,S=b}if(T===E.length)return n(v,S),de&&li(v,T),U;if(S===null){for(;T<E.length;T++)S=f(v,E[T],x),S!==null&&(y=s(S,y,T),F===null?U=S:F.sibling=S,F=S);return de&&li(v,T),U}for(S=i(S);T<E.length;T++)b=g(S,v,T,E[T],x),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?T:b.key),y=s(b,y,T),F===null?U=b:F.sibling=b,F=b);return t&&S.forEach(function(D){return e(v,D)}),de&&li(v,T),U}function I(v,y,E,x){if(E==null)throw Error(B(151));for(var U=null,F=null,S=y,T=y=0,b=null,C=E.next();S!==null&&!C.done;T++,C=E.next()){S.index>T?(b=S,S=null):b=S.sibling;var D=m(v,S,C.value,x);if(D===null){S===null&&(S=b);break}t&&S&&D.alternate===null&&e(v,S),y=s(D,y,T),F===null?U=D:F.sibling=D,F=D,S=b}if(C.done)return n(v,S),de&&li(v,T),U;if(S===null){for(;!C.done;T++,C=E.next())C=f(v,C.value,x),C!==null&&(y=s(C,y,T),F===null?U=C:F.sibling=C,F=C);return de&&li(v,T),U}for(S=i(S);!C.done;T++,C=E.next())C=g(S,v,T,C.value,x),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?T:C.key),y=s(C,y,T),F===null?U=C:F.sibling=C,F=C);return t&&S.forEach(function(P){return e(v,P)}),de&&li(v,T),U}function N(v,y,E,x){if(typeof E=="object"&&E!==null&&E.type===Ia&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Hc:e:{for(var U=E.key;y!==null;){if(y.key===U){if(U=E.type,U===Ia){if(y.tag===7){n(v,y.sibling),x=r(y,E.props.children),x.return=v,v=x;break e}}else if(y.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===tr&&ds(U)===y.type){n(v,y.sibling),x=r(y,E.props),Sl(x,E),x.return=v,v=x;break e}n(v,y);break}else e(v,y);y=y.sibling}E.type===Ia?(x=As(E.props.children,v.mode,x,E.key),x.return=v,v=x):(x=vh(E.type,E.key,E.props,null,v.mode,x),Sl(x,E),x.return=v,v=x)}return a(v);case Pl:e:{for(U=E.key;y!==null;){if(y.key===U)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){n(v,y.sibling),x=r(y,E.children||[]),x.return=v,v=x;break e}else{n(v,y);break}else e(v,y);y=y.sibling}x=Nm(E,v.mode,x),x.return=v,v=x}return a(v);case tr:return E=ds(E),N(v,y,E,x)}if(Ol(E))return w(v,y,E,x);if(vl(E)){if(U=vl(E),typeof U!="function")throw Error(B(150));return E=U.call(E),I(v,y,E,x)}if(typeof E.then=="function")return N(v,y,Xc(E),x);if(E.$$typeof===hi)return N(v,y,Wc(v,E),x);Jc(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint"?(E=""+E,y!==null&&y.tag===6?(n(v,y.sibling),x=r(y,E),x.return=v,v=x):(n(v,y),x=Dm(E,v.mode,x),x.return=v,v=x),a(v)):n(v,y)}return function(v,y,E,x){try{Su=0;var U=N(v,y,E,x);return Fa=null,U}catch(S){if(S===Mo||S===rd)throw S;var F=rn(29,S,null,v.mode);return F.lanes=x,F.return=v,F}finally{}}}var Ms=vA(!0),EA=vA(!1),nr=!1;function Ay(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Sr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function wr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,pe&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=Jh(t),hA(t,null,n),e}return id(t,i,e,n),Jh(t)}function Yl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ub(t,n)}}function Vm(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Fp=!1;function Wl(){if(Fp){var t=ja;if(t!==null)throw t}}function Xl(t,e,n,i){Fp=!1;var r=t.updateQueue;nr=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(s!==null){var f=r.baseState;a=0,h=c=l=null,o=s;do{var m=o.lane&-536870913,g=m!==o.lane;if(g?(he&m)===m:(i&m)===m){m!==0&&m===Za&&(Fp=!0),h!==null&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var w=t,I=o;m=e;var N=n;switch(I.tag){case 1:if(w=I.payload,typeof w=="function"){f=w.call(N,f,m);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=I.payload,m=typeof w=="function"?w.call(N,f,m):w,m==null)break e;f=Ue({},f,m);break e;case 2:nr=!0}}m=o.callback,m!==null&&(t.flags|=64,g&&(t.flags|=8192),g=r.callbacks,g===null?r.callbacks=[m]:g.push(m))}else g={lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=g,l=f):h=h.next=g,a|=m;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;g=o,o=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(!0);h===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,s===null&&(r.shared.lanes=0),Lr|=a,t.lanes=a,t.memoizedState=f}}function TA(t,e){if(typeof t!="function")throw Error(B(191,t));t.call(e)}function SA(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)TA(n[t],e)}var eo=ti(null),nf=ti(0);function uT(t,e){t=Di,Ne(nf,t),Ne(eo,e),Di=t|e.baseLanes}function qp(){Ne(nf,Di),Ne(eo,eo.current)}function Iy(){Di=nf.current,Et(eo),Et(nf)}var dn=ti(null),An=null;function rr(t){var e=t.alternate;Ne(Ye,Ye.current&1),Ne(dn,t),An===null&&(e===null||eo.current!==null||e.memoizedState!==null)&&(An=t)}function Hp(t){Ne(Ye,Ye.current),Ne(dn,t),An===null&&(An=t)}function wA(t){t.tag===22?(Ne(Ye,Ye.current),Ne(dn,t),An===null&&(An=t)):sr()}function sr(){Ne(Ye,Ye.current),Ne(dn,dn.current)}function nn(t){Et(dn),An===t&&(An=null),Et(Ye)}var Ye=ti(0);function rf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||ug(n)||cg(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ii=0,re=null,Ie=null,it=null,sf=!1,qa=!1,ks=!1,af=0,wu=0,Ha=null,Xx=0;function Qe(){throw Error(B(321))}function Ry(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fn(t[n],e[n]))return!1;return!0}function Cy(t,e,n,i,r,s){return Ii=s,re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Z.H=t===null||t.memoizedState===null?e0:zy,ks=!1,s=n(i,r),ks=!1,qa&&(s=AA(e,n,i,r)),bA(t),s}function bA(t){Z.H=bu;var e=Ie!==null&&Ie.next!==null;if(Ii=0,it=Ie=re=null,sf=!1,wu=0,Ha=null,e)throw Error(B(300));t===null||at||(t=t.dependencies,t!==null&&ef(t)&&(at=!0))}function AA(t,e,n,i){re=t;var r=0;do{if(qa&&(Ha=null),wu=0,qa=!1,25<=r)throw Error(B(301));if(r+=1,it=Ie=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}Z.H=t0,s=e(n,i)}while(qa);return s}function Jx(){var t=Z.H,e=t.useState()[0];return e=typeof e.then=="function"?nc(e):e,t=t.useState()[0],(Ie!==null?Ie.memoizedState:null)!==t&&(re.flags|=1024),e}function Dy(){var t=af!==0;return af=0,t}function Ny(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function xy(t){if(sf){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}sf=!1}Ii=0,it=Ie=re=null,qa=!1,wu=af=0,Ha=null}function Lt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?re.memoizedState=it=t:it=it.next=t,it}function Xe(){if(Ie===null){var t=re.alternate;t=t!==null?t.memoizedState:null}else t=Ie.next;var e=it===null?re.memoizedState:it.next;if(e!==null)it=e,Ie=t;else{if(t===null)throw re.alternate===null?Error(B(467)):Error(B(310));Ie=t,t={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},it===null?re.memoizedState=it=t:it=it.next=t}return it}function sd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nc(t){var e=wu;return wu+=1,Ha===null&&(Ha=[]),t=_A(Ha,t,e),e=re,(it===null?e.memoizedState:it.next)===null&&(e=e.alternate,Z.H=e===null||e.memoizedState===null?e0:zy),t}function ad(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return nc(t);if(t.$$typeof===hi)return Ct(t)}throw Error(B(438,String(t)))}function Vy(t){var e=null,n=re.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=re.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=sd(),re.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=LN;return e.index++,n}function Ri(t,e){return typeof e=="function"?e(t):e}function Th(t){var e=Xe();return Py(e,Ie,t)}function Py(t,e,n){var i=t.queue;if(i===null)throw Error(B(311));i.lastRenderedReducer=n;var r=t.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}e.baseQueue=r=s,i.pending=null}if(s=t.baseState,r===null)t.memoizedState=s;else{e=r.next;var o=a=null,l=null,c=e,h=!1;do{var f=c.lane&-536870913;if(f!==c.lane?(he&f)===f:(Ii&f)===f){var m=c.revertLane;if(m===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),f===Za&&(h=!0);else if((Ii&m)===m){c=c.next,m===Za&&(h=!0);continue}else f={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=f,a=s):l=l.next=f,re.lanes|=m,Lr|=m;f=c.action,ks&&n(s,f),s=c.hasEagerState?c.eagerState:n(s,f)}else m={lane:f,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=m,a=s):l=l.next=m,re.lanes|=f,Lr|=f;c=c.next}while(c!==null&&c!==e);if(l===null?a=s:l.next=o,!fn(s,t.memoizedState)&&(at=!0,h&&(n=ja,n!==null)))throw n;t.memoizedState=s,t.baseState=a,t.baseQueue=l,i.lastRenderedState=s}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Pm(t){var e=Xe(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);fn(s,e.memoizedState)||(at=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function IA(t,e,n){var i=re,r=Xe(),s=de;if(s){if(n===void 0)throw Error(B(407));n=n()}else n=e();var a=!fn((Ie||r).memoizedState,n);if(a&&(r.memoizedState=n,at=!0),r=r.queue,Oy(DA.bind(null,i,r,t),[t]),r.getSnapshot!==e||a||it!==null&&it.memoizedState.tag&1){if(i.flags|=2048,to(9,{destroy:void 0},CA.bind(null,i,r,n,e),null),De===null)throw Error(B(349));s||Ii&127||RA(i,e,n)}return n}function RA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=re.updateQueue,e===null?(e=sd(),re.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function CA(t,e,n,i){e.value=n,e.getSnapshot=i,NA(e)&&xA(t)}function DA(t,e,n){return n(function(){NA(e)&&xA(t)})}function NA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fn(t,n)}catch{return!0}}function xA(t){var e=Zs(t,2);e!==null&&$t(e,t,2)}function Gp(t){var e=Lt();if(typeof t=="function"){var n=t;if(t=n(),ks){dr(!0);try{n()}finally{dr(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:t},e}function VA(t,e,n,i){return t.baseState=n,Py(t,Ie,typeof i=="function"?i:Ri)}function Zx(t,e,n,i,r){if(ld(t))throw Error(B(485));if(t=e.action,t!==null){var s={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};Z.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,PA(e,s)):(s.next=n.next,e.pending=n.next=s)}}function PA(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var s=Z.T,a={};Z.T=a;try{var o=n(r,i),l=Z.S;l!==null&&l(a,o),cT(t,e,o)}catch(c){Kp(t,e,c)}finally{s!==null&&a.types!==null&&(s.types=a.types),Z.T=s}}else try{s=n(r,i),cT(t,e,s)}catch(c){Kp(t,e,c)}}function cT(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){hT(t,e,i)},function(i){return Kp(t,e,i)}):hT(t,e,n)}function hT(t,e,n){e.status="fulfilled",e.value=n,OA(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,PA(t,n)))}function Kp(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,OA(e),e=e.next;while(e!==i)}t.action=null}function OA(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function MA(t,e){return e}function fT(t,e){if(de){var n=De.formState;if(n!==null){e:{var i=re;if(de){if(Oe){t:{for(var r=Oe,s=bn;r.nodeType!==8;){if(!s){r=null;break t}if(r=In(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Oe=In(r.nextSibling),i=r.data==="F!";break e}}Mr(i)}i=!1}i&&(e=n[0])}}return n=Lt(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:MA,lastRenderedState:e},n.queue=i,n=XA.bind(null,re,i),i.dispatch=n,i=Gp(!1),s=Uy.bind(null,re,!1,i.queue),i=Lt(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=Zx.bind(null,re,r,s,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function dT(t){var e=Xe();return kA(e,Ie,t)}function kA(t,e,n){if(e=Py(t,e,MA)[0],t=Th(Ri)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=nc(e)}catch(a){throw a===Mo?rd:a}else i=e;e=Xe();var r=e.queue,s=r.dispatch;return n!==e.memoizedState&&(re.flags|=2048,to(9,{destroy:void 0},e2.bind(null,r,n),null)),[i,s,t]}function e2(t,e){t.action=e}function mT(t){var e=Xe(),n=Ie;if(n!==null)return kA(e,n,t);Xe(),e=e.memoizedState,n=Xe();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function to(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=re.updateQueue,e===null&&(e=sd(),re.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function LA(){return Xe().memoizedState}function Sh(t,e,n,i){var r=Lt();re.flags|=t,r.memoizedState=to(1|e,{destroy:void 0},n,i===void 0?null:i)}function od(t,e,n,i){var r=Xe();i=i===void 0?null:i;var s=r.memoizedState.inst;Ie!==null&&i!==null&&Ry(i,Ie.memoizedState.deps)?r.memoizedState=to(e,s,n,i):(re.flags|=t,r.memoizedState=to(1|e,s,n,i))}function pT(t,e){Sh(8390656,8,t,e)}function Oy(t,e){od(2048,8,t,e)}function t2(t){re.flags|=4;var e=re.updateQueue;if(e===null)e=sd(),re.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function UA(t){var e=Xe().memoizedState;return t2({ref:e,nextImpl:t}),function(){if(pe&2)throw Error(B(440));return e.impl.apply(void 0,arguments)}}function zA(t,e){return od(4,2,t,e)}function BA(t,e){return od(4,4,t,e)}function jA(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function FA(t,e,n){n=n!=null?n.concat([t]):null,od(4,4,jA.bind(null,e,t),n)}function My(){}function qA(t,e){var n=Xe();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&Ry(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function HA(t,e){var n=Xe();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&Ry(e,i[1]))return i[0];if(i=t(),ks){dr(!0);try{t()}finally{dr(!1)}}return n.memoizedState=[i,e],i}function ky(t,e,n){return n===void 0||Ii&1073741824&&!(he&261930)?t.memoizedState=e:(t.memoizedState=n,t=V0(),re.lanes|=t,Lr|=t,n)}function GA(t,e,n,i){return fn(n,e)?n:eo.current!==null?(t=ky(t,n,i),fn(t,e)||(at=!0),t):!(Ii&42)||Ii&1073741824&&!(he&261930)?(at=!0,t.memoizedState=n):(t=V0(),re.lanes|=t,Lr|=t,e)}function KA(t,e,n,i,r){var s=ge.p;ge.p=s!==0&&8>s?s:8;var a=Z.T,o={};Z.T=o,Uy(t,!1,e,n);try{var l=r(),c=Z.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=Wx(l,i);Jl(t,e,h,hn(t))}else Jl(t,e,i,hn(t))}catch(f){Jl(t,e,{then:function(){},status:"rejected",reason:f},hn())}finally{ge.p=s,a!==null&&o.types!==null&&(a.types=o.types),Z.T=a}}function n2(){}function Qp(t,e,n,i){if(t.tag!==5)throw Error(B(476));var r=QA(t).queue;KA(t,r,e,bs,n===null?n2:function(){return $A(t),n(i)})}function QA(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:bs,baseState:bs,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:bs},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function $A(t){var e=QA(t);e.next===null&&(e=t.alternate.memoizedState),Jl(t,e.next.queue,{},hn())}function Ly(){return Ct(Ru)}function YA(){return Xe().memoizedState}function WA(){return Xe().memoizedState}function i2(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=hn();t=Sr(n);var i=wr(e,t,n);i!==null&&($t(i,e,n),Yl(i,e,n)),e={cache:Sy()},t.payload=e;return}e=e.return}}function r2(t,e,n){var i=hn();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ld(t)?JA(e,n):(n=_y(t,e,n,i),n!==null&&($t(n,t,i),ZA(n,e,i)))}function XA(t,e,n){var i=hn();Jl(t,e,n,i)}function Jl(t,e,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ld(t))JA(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,fn(o,a))return id(t,e,r,0),De===null&&nd(),!1}catch{}finally{}if(n=_y(t,e,r,i),n!==null)return $t(n,t,i),ZA(n,e,i),!0}return!1}function Uy(t,e,n,i){if(i={lane:2,revertLane:Qy(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},ld(t)){if(e)throw Error(B(479))}else e=_y(t,n,i,2),e!==null&&$t(e,t,2)}function ld(t){var e=t.alternate;return t===re||e!==null&&e===re}function JA(t,e){qa=sf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ZA(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ub(t,n)}}var bu={readContext:Ct,use:ad,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useLayoutEffect:Qe,useInsertionEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useSyncExternalStore:Qe,useId:Qe,useHostTransitionStatus:Qe,useFormState:Qe,useActionState:Qe,useOptimistic:Qe,useMemoCache:Qe,useCacheRefresh:Qe};bu.useEffectEvent=Qe;var e0={readContext:Ct,use:ad,useCallback:function(t,e){return Lt().memoizedState=[t,e===void 0?null:e],t},useContext:Ct,useEffect:pT,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Sh(4194308,4,jA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Sh(4194308,4,t,e)},useInsertionEffect:function(t,e){Sh(4,2,t,e)},useMemo:function(t,e){var n=Lt();e=e===void 0?null:e;var i=t();if(ks){dr(!0);try{t()}finally{dr(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Lt();if(n!==void 0){var r=n(e);if(ks){dr(!0);try{n(e)}finally{dr(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=r2.bind(null,re,t),[i.memoizedState,t]},useRef:function(t){var e=Lt();return t={current:t},e.memoizedState=t},useState:function(t){t=Gp(t);var e=t.queue,n=XA.bind(null,re,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:My,useDeferredValue:function(t,e){var n=Lt();return ky(n,t,e)},useTransition:function(){var t=Gp(!1);return t=KA.bind(null,re,t.queue,!0,!1),Lt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=re,r=Lt();if(de){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),De===null)throw Error(B(349));he&127||RA(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,pT(DA.bind(null,i,s,t),[t]),i.flags|=2048,to(9,{destroy:void 0},CA.bind(null,i,s,n,e),null),n},useId:function(){var t=Lt(),e=De.identifierPrefix;if(de){var n=Kn,i=Gn;n=(i&~(1<<32-cn(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=af++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=Xx++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Ly,useFormState:fT,useActionState:fT,useOptimistic:function(t){var e=Lt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Uy.bind(null,re,!0,n),n.dispatch=e,[t,e]},useMemoCache:Vy,useCacheRefresh:function(){return Lt().memoizedState=i2.bind(null,re)},useEffectEvent:function(t){var e=Lt(),n={impl:t};return e.memoizedState=n,function(){if(pe&2)throw Error(B(440));return n.impl.apply(void 0,arguments)}}},zy={readContext:Ct,use:ad,useCallback:qA,useContext:Ct,useEffect:Oy,useImperativeHandle:FA,useInsertionEffect:zA,useLayoutEffect:BA,useMemo:HA,useReducer:Th,useRef:LA,useState:function(){return Th(Ri)},useDebugValue:My,useDeferredValue:function(t,e){var n=Xe();return GA(n,Ie.memoizedState,t,e)},useTransition:function(){var t=Th(Ri)[0],e=Xe().memoizedState;return[typeof t=="boolean"?t:nc(t),e]},useSyncExternalStore:IA,useId:YA,useHostTransitionStatus:Ly,useFormState:dT,useActionState:dT,useOptimistic:function(t,e){var n=Xe();return VA(n,Ie,t,e)},useMemoCache:Vy,useCacheRefresh:WA};zy.useEffectEvent=UA;var t0={readContext:Ct,use:ad,useCallback:qA,useContext:Ct,useEffect:Oy,useImperativeHandle:FA,useInsertionEffect:zA,useLayoutEffect:BA,useMemo:HA,useReducer:Pm,useRef:LA,useState:function(){return Pm(Ri)},useDebugValue:My,useDeferredValue:function(t,e){var n=Xe();return Ie===null?ky(n,t,e):GA(n,Ie.memoizedState,t,e)},useTransition:function(){var t=Pm(Ri)[0],e=Xe().memoizedState;return[typeof t=="boolean"?t:nc(t),e]},useSyncExternalStore:IA,useId:YA,useHostTransitionStatus:Ly,useFormState:mT,useActionState:mT,useOptimistic:function(t,e){var n=Xe();return Ie!==null?VA(n,Ie,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Vy,useCacheRefresh:WA};t0.useEffectEvent=UA;function Om(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $p={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=hn(),r=Sr(i);r.payload=e,n!=null&&(r.callback=n),e=wr(t,r,i),e!==null&&($t(e,t,i),Yl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=hn(),r=Sr(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=wr(t,r,i),e!==null&&($t(e,t,i),Yl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hn(),i=Sr(n);i.tag=2,e!=null&&(i.callback=e),e=wr(t,i,n),e!==null&&($t(e,t,n),Yl(e,t,n))}};function gT(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!vu(n,i)||!vu(r,s):!0}function yT(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&$p.enqueueReplaceState(e,e.state,null)}function Ls(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Ue({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function n0(t){Xh(t)}function i0(t){console.error(t)}function r0(t){Xh(t)}function of(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function _T(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Yp(t,e,n){return n=Sr(n),n.tag=3,n.payload={element:null},n.callback=function(){of(t,e)},n}function s0(t){return t=Sr(t),t.tag=3,t}function a0(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;t.payload=function(){return r(s)},t.callback=function(){_T(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){_T(e,n,i),typeof r!="function"&&(br===null?br=new Set([this]):br.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function s2(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&Oo(e,n,r,!0),n=dn.current,n!==null){switch(n.tag){case 31:case 13:return An===null?ff():n.alternate===null&&$e===0&&($e=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===tf?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Gm(t,i,r)),!1;case 22:return n.flags|=65536,i===tf?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Gm(t,i,r)),!1}throw Error(B(435,n.tag))}return Gm(t,i,r),ff(),!1}if(de)return e=dn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==kp&&(t=Error(B(422),{cause:i}),Tu(wn(t,n)))):(i!==kp&&(e=Error(B(423),{cause:i}),Tu(wn(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=wn(i,n),r=Yp(t.stateNode,i,r),Vm(t,r),$e!==4&&($e=2)),!1;var s=Error(B(520),{cause:i});if(s=wn(s,n),tu===null?tu=[s]:tu.push(s),$e!==4&&($e=2),e===null)return!0;i=wn(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=Yp(n.stateNode,i,t),Vm(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(br===null||!br.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=s0(r),a0(r,t,n,i),Vm(n,r),!1}n=n.return}while(n!==null);return!1}var By=Error(B(461)),at=!1;function wt(t,e,n,i){e.child=t===null?EA(e,null,n,i):Ms(e,t.child,n,i)}function vT(t,e,n,i,r){n=n.render;var s=e.ref;if("ref"in i){var a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}else a=i;return Os(e),i=Cy(t,e,n,a,s,r),o=Dy(),t!==null&&!at?(Ny(t,e,r),Ci(t,e,r)):(de&&o&&Ey(e),e.flags|=1,wt(t,e,i,r),e.child)}function ET(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!vy(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,o0(t,e,s,i,r)):(t=vh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!jy(t,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:vu,n(a,i)&&t.ref===e.ref)return Ci(t,e,r)}return e.flags|=1,t=Ei(s,i),t.ref=e.ref,t.return=e,e.child=t}function o0(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(vu(s,i)&&t.ref===e.ref)if(at=!1,e.pendingProps=i=s,jy(t,r))t.flags&131072&&(at=!0);else return e.lanes=t.lanes,Ci(t,e,r)}return Wp(t,e,n,i,r)}function l0(t,e,n,i){var r=i.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(s=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~s}else i=0,e.child=null;return TT(t,e,s,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Eh(e,s!==null?s.cachePool:null),s!==null?uT(e,s):qp(),wA(e);else return i=e.lanes=536870912,TT(t,e,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(Eh(e,s.cachePool),uT(e,s),sr(),e.memoizedState=null):(t!==null&&Eh(e,null),qp(),sr());return wt(t,e,r,n),e.child}function kl(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function TT(t,e,n,i,r){var s=wy();return s=s===null?null:{parent:st._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&Eh(e,null),qp(),wA(e),t!==null&&Oo(t,e,i,!0),e.childLanes=r,null}function wh(t,e){return e=lf({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function ST(t,e,n){return Ms(e,t.child,null,n),t=wh(e,e.pendingProps),t.flags|=2,nn(e),e.memoizedState=null,t}function a2(t,e,n){var i=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(de){if(i.mode==="hidden")return t=wh(e,i),e.lanes=536870912,kl(null,t);if(Hp(e),(t=Oe)?(t=eI(t,bn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Or!==null?{id:Gn,overflow:Kn}:null,retryLane:536870912,hydrationErrors:null},n=dA(t),n.return=e,e.child=n,It=e,Oe=null)):t=null,t===null)throw Mr(e);return e.lanes=536870912,null}return wh(e,i)}var s=t.memoizedState;if(s!==null){var a=s.dehydrated;if(Hp(e),r)if(e.flags&256)e.flags&=-257,e=ST(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(B(558));else if(at||Oo(t,e,n,!1),r=(n&t.childLanes)!==0,at||r){if(i=De,i!==null&&(a=zb(i,n),a!==0&&a!==s.retryLane))throw s.retryLane=a,Zs(t,a),$t(i,t,a),By;ff(),e=ST(t,e,n)}else t=s.treeContext,Oe=In(a.nextSibling),It=e,de=!0,Tr=null,bn=!1,t!==null&&pA(e,t),e=wh(e,i),e.flags|=4096;return e}return t=Ei(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function bh(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(B(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Wp(t,e,n,i,r){return Os(e),n=Cy(t,e,n,i,void 0,r),i=Dy(),t!==null&&!at?(Ny(t,e,r),Ci(t,e,r)):(de&&i&&Ey(e),e.flags|=1,wt(t,e,n,r),e.child)}function wT(t,e,n,i,r,s){return Os(e),e.updateQueue=null,n=AA(e,i,n,r),bA(t),i=Dy(),t!==null&&!at?(Ny(t,e,s),Ci(t,e,s)):(de&&i&&Ey(e),e.flags|=1,wt(t,e,n,s),e.child)}function bT(t,e,n,i,r){if(Os(e),e.stateNode===null){var s=Oa,a=n.contextType;typeof a=="object"&&a!==null&&(s=Ct(a)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=$p,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},Ay(e),a=n.contextType,s.context=typeof a=="object"&&a!==null?Ct(a):Oa,s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Om(e,n,a,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&$p.enqueueReplaceState(s,s.state,null),Xl(e,i,s,r),Wl(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var o=e.memoizedProps,l=Ls(n,o);s.props=l;var c=s.context,h=n.contextType;a=Oa,typeof h=="object"&&h!==null&&(a=Ct(h));var f=n.getDerivedStateFromProps;h=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o||c!==a)&&yT(e,s,i,a),nr=!1;var m=e.memoizedState;s.state=m,Xl(e,i,s,r),Wl(),c=e.memoizedState,o||m!==c||nr?(typeof f=="function"&&(Om(e,n,f,i),c=e.memoizedState),(l=nr||gT(e,n,l,i,m,c,a))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),s.props=i,s.state=c,s.context=a,i=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,jp(t,e),a=e.memoizedProps,h=Ls(n,a),s.props=h,f=e.pendingProps,m=s.context,c=n.contextType,l=Oa,typeof c=="object"&&c!==null&&(l=Ct(c)),o=n.getDerivedStateFromProps,(c=typeof o=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||m!==l)&&yT(e,s,i,l),nr=!1,m=e.memoizedState,s.state=m,Xl(e,i,s,r),Wl();var g=e.memoizedState;a!==f||m!==g||nr||t!==null&&t.dependencies!==null&&ef(t.dependencies)?(typeof o=="function"&&(Om(e,n,o,i),g=e.memoizedState),(h=nr||gT(e,n,h,i,m,g,l)||t!==null&&t.dependencies!==null&&ef(t.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,g,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,g,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),s.props=i,s.state=g,s.context=l,i=h):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,bh(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=Ms(e,t.child,null,r),e.child=Ms(e,null,n,r)):wt(t,e,n,r),e.memoizedState=s.state,t=e.child):t=Ci(t,e,r),t}function AT(t,e,n,i){return Ps(),e.flags|=256,wt(t,e,n,i),e.child}var Mm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function km(t){return{baseLanes:t,cachePool:yA()}}function Lm(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=an),t}function u0(t,e,n){var i=e.pendingProps,r=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(Ye.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(de){if(r?rr(e):sr(),(t=Oe)?(t=eI(t,bn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Or!==null?{id:Gn,overflow:Kn}:null,retryLane:536870912,hydrationErrors:null},n=dA(t),n.return=e,e.child=n,It=e,Oe=null)):t=null,t===null)throw Mr(e);return cg(t)?e.lanes=32:e.lanes=536870912,null}var o=i.children;return i=i.fallback,r?(sr(),r=e.mode,o=lf({mode:"hidden",children:o},r),i=As(i,r,n,null),o.return=e,i.return=e,o.sibling=i,e.child=o,i=e.child,i.memoizedState=km(n),i.childLanes=Lm(t,a,n),e.memoizedState=Mm,kl(null,i)):(rr(e),Xp(e,o))}var l=t.memoizedState;if(l!==null&&(o=l.dehydrated,o!==null)){if(s)e.flags&256?(rr(e),e.flags&=-257,e=Um(t,e,n)):e.memoizedState!==null?(sr(),e.child=t.child,e.flags|=128,e=null):(sr(),o=i.fallback,r=e.mode,i=lf({mode:"visible",children:i.children},r),o=As(o,r,n,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,Ms(e,t.child,null,n),i=e.child,i.memoizedState=km(n),i.childLanes=Lm(t,a,n),e.memoizedState=Mm,e=kl(null,i));else if(rr(e),cg(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var c=a.dgst;a=c,i=Error(B(419)),i.stack="",i.digest=a,Tu({value:i,source:null,stack:null}),e=Um(t,e,n)}else if(at||Oo(t,e,n,!1),a=(n&t.childLanes)!==0,at||a){if(a=De,a!==null&&(i=zb(a,n),i!==0&&i!==l.retryLane))throw l.retryLane=i,Zs(t,i),$t(a,t,i),By;ug(o)||ff(),e=Um(t,e,n)}else ug(o)?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,Oe=In(o.nextSibling),It=e,de=!0,Tr=null,bn=!1,t!==null&&pA(e,t),e=Xp(e,i.children),e.flags|=4096);return e}return r?(sr(),o=i.fallback,r=e.mode,l=t.child,c=l.sibling,i=Ei(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,c!==null?o=Ei(c,o):(o=As(o,r,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,kl(null,i),i=e.child,o=t.child.memoizedState,o===null?o=km(n):(r=o.cachePool,r!==null?(l=st._currentValue,r=r.parent!==l?{parent:l,pool:l}:r):r=yA(),o={baseLanes:o.baseLanes|n,cachePool:r}),i.memoizedState=o,i.childLanes=Lm(t,a,n),e.memoizedState=Mm,kl(t.child,i)):(rr(e),n=t.child,t=n.sibling,n=Ei(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function Xp(t,e){return e=lf({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function lf(t,e){return t=rn(22,t,null,e),t.lanes=0,t}function Um(t,e,n){return Ms(e,t.child,null,n),t=Xp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function IT(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Up(t.return,e,n)}function zm(t,e,n,i,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r,a.treeForkCount=s)}function c0(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;i=i.children;var a=Ye.current,o=(a&2)!==0;if(o?(a=a&1|2,e.flags|=128):a&=1,Ne(Ye,a),wt(t,e,i,n),i=de?Eu:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&IT(t,n,e);else if(t.tag===19)IT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&rf(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),zm(e,!1,r,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&rf(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}zm(e,!0,n,null,s,i);break;case"together":zm(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function Ci(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Lr|=e.lanes,!(n&e.childLanes))if(t!==null){if(Oo(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Ei(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ei(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function jy(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&ef(t)))}function o2(t,e,n){switch(e.tag){case 3:Qh(e,e.stateNode.containerInfo),ir(e,st,t.memoizedState.cache),Ps();break;case 27:case 5:Ap(e);break;case 4:Qh(e,e.stateNode.containerInfo);break;case 10:ir(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Hp(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(rr(e),e.flags|=128,null):n&e.child.childLanes?u0(t,e,n):(rr(e),t=Ci(t,e,n),t!==null?t.sibling:null);rr(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(Oo(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return c0(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ne(Ye,Ye.current),i)break;return null;case 22:return e.lanes=0,l0(t,e,n,e.pendingProps);case 24:ir(e,st,t.memoizedState.cache)}return Ci(t,e,n)}function h0(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)at=!0;else{if(!jy(t,n)&&!(e.flags&128))return at=!1,o2(t,e,n);at=!!(t.flags&131072)}else at=!1,de&&e.flags&1048576&&mA(e,Eu,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=ds(e.elementType),e.type=t,typeof t=="function")vy(t)?(i=Ls(t,i),e.tag=1,e=bT(null,e,t,i,n)):(e.tag=0,e=Wp(null,e,t,i,n));else{if(t!=null){var r=t.$$typeof;if(r===sy){e.tag=11,e=vT(null,e,t,i,n);break e}else if(r===ay){e.tag=14,e=ET(null,e,t,i,n);break e}}throw e=wp(t)||t,Error(B(306,e,""))}}return e;case 0:return Wp(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=Ls(i,e.pendingProps),bT(t,e,i,r,n);case 3:e:{if(Qh(e,e.stateNode.containerInfo),t===null)throw Error(B(387));i=e.pendingProps;var s=e.memoizedState;r=s.element,jp(t,e),Xl(e,i,null,n);var a=e.memoizedState;if(i=a.cache,ir(e,st,i),i!==s.cache&&zp(e,[st],n,!0),Wl(),i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=AT(t,e,i,n);break e}else if(i!==r){r=wn(Error(B(424)),e),Tu(r),e=AT(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Oe=In(t.firstChild),It=e,de=!0,Tr=null,bn=!0,n=EA(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ps(),i===r){e=Ci(t,e,n);break e}wt(t,e,i,n)}e=e.child}return e;case 26:return bh(t,e),t===null?(n=KT(e.type,null,e.pendingProps,null))?e.memoizedState=n:de||(n=e.type,t=e.pendingProps,i=gf(Er.current).createElement(n),i[At]=e,i[Xt]=t,Dt(i,n,t),vt(i),e.stateNode=i):e.memoizedState=KT(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Ap(e),t===null&&de&&(i=e.stateNode=tI(e.type,e.pendingProps,Er.current),It=e,bn=!0,r=Oe,Qr(e.type)?(hg=r,Oe=In(i.firstChild)):Oe=r),wt(t,e,e.pendingProps.children,n),bh(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&de&&((r=i=Oe)&&(i=L2(i,e.type,e.pendingProps,bn),i!==null?(e.stateNode=i,It=e,Oe=In(i.firstChild),bn=!1,r=!0):r=!1),r||Mr(e)),Ap(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,i=s.children,og(r,s)?i=null:a!==null&&og(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=Cy(t,e,Jx,null,null,n),Ru._currentValue=r),bh(t,e),wt(t,e,i,n),e.child;case 6:return t===null&&de&&((t=n=Oe)&&(n=U2(n,e.pendingProps,bn),n!==null?(e.stateNode=n,It=e,Oe=null,t=!0):t=!1),t||Mr(e)),null;case 13:return u0(t,e,n);case 4:return Qh(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ms(e,null,i,n):wt(t,e,i,n),e.child;case 11:return vT(t,e,e.type,e.pendingProps,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,ir(e,e.type,i.value),wt(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,Os(e),r=Ct(r),i=i(r),e.flags|=1,wt(t,e,i,n),e.child;case 14:return ET(t,e,e.type,e.pendingProps,n);case 15:return o0(t,e,e.type,e.pendingProps,n);case 19:return c0(t,e,n);case 31:return a2(t,e,n);case 22:return l0(t,e,n,e.pendingProps);case 24:return Os(e),i=Ct(st),t===null?(r=wy(),r===null&&(r=De,s=Sy(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),e.memoizedState={parent:i,cache:r},Ay(e),ir(e,st,r)):(t.lanes&n&&(jp(t,e),Xl(e,null,null,n),Wl()),r=t.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),ir(e,st,i)):(i=s.cache,ir(e,st,i),i!==r.cache&&zp(e,[st],n,!0))),wt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(B(156,e.tag))}function ri(t){t.flags|=4}function Bm(t,e,n,i,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(M0())t.flags|=8192;else throw Rs=tf,by}else t.flags&=-16777217}function RT(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!rI(e))if(M0())t.flags|=8192;else throw Rs=tf,by}function Zc(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?kb():536870912,t.lanes|=e,no|=e)}function wl(t,e){if(!de)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Pe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function l2(t,e,n){var i=e.pendingProps;switch(Ty(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(e),null;case 1:return Pe(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Ti(st),Wa(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ca(e)?ri(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xm())),Pe(e),null;case 26:var r=e.type,s=e.memoizedState;return t===null?(ri(e),s!==null?(Pe(e),RT(e,s)):(Pe(e),Bm(e,r,null,i,n))):s?s!==t.memoizedState?(ri(e),Pe(e),RT(e,s)):(Pe(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&ri(e),Pe(e),Bm(e,r,t,i,n)),null;case 27:if($h(e),n=Er.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&ri(e);else{if(!i){if(e.stateNode===null)throw Error(B(166));return Pe(e),null}t=Wn.current,ca(e)?nT(e):(t=tI(r,i,n),e.stateNode=t,ri(e))}return Pe(e),null;case 5:if($h(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&ri(e);else{if(!i){if(e.stateNode===null)throw Error(B(166));return Pe(e),null}if(s=Wn.current,ca(e))nT(e);else{var a=gf(Er.current);switch(s){case 1:s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":s=a.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?a.createElement("select",{is:i.is}):a.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?a.createElement(r,{is:i.is}):a.createElement(r)}}s[At]=e,s[Xt]=i;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)s.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=s;e:switch(Dt(s,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&ri(e)}}return Pe(e),Bm(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&ri(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(B(166));if(t=Er.current,ca(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=It,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[At]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||X0(t.nodeValue,n)),t||Mr(e,!0)}else t=gf(t).createTextNode(i),t[At]=e,e.stateNode=t}return Pe(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=ca(e),n!==null){if(t===null){if(!i)throw Error(B(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(557));t[At]=e}else Ps(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pe(e),t=!1}else n=xm(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(nn(e),e):(nn(e),null);if(e.flags&128)throw Error(B(558))}return Pe(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=ca(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(B(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(B(317));r[At]=e}else Ps(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pe(e),r=!1}else r=xm(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(nn(e),e):(nn(e),null)}return nn(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Zc(e,e.updateQueue),Pe(e),null);case 4:return Wa(),t===null&&$y(e.stateNode.containerInfo),Pe(e),null;case 10:return Ti(e.type),Pe(e),null;case 19:if(Et(Ye),i=e.memoizedState,i===null)return Pe(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)wl(i,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=rf(t),s!==null){for(e.flags|=128,wl(i,!1),t=s.updateQueue,e.updateQueue=t,Zc(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)fA(n,t),n=n.sibling;return Ne(Ye,Ye.current&1|2),de&&li(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&ln()>cf&&(e.flags|=128,r=!0,wl(i,!1),e.lanes=4194304)}else{if(!r)if(t=rf(s),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,Zc(e,t),wl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!de)return Pe(e),null}else 2*ln()-i.renderingStartTime>cf&&n!==536870912&&(e.flags|=128,r=!0,wl(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ln(),t.sibling=null,n=Ye.current,Ne(Ye,r?n&1|2:n&1),de&&li(e,i.treeForkCount),t):(Pe(e),null);case 22:case 23:return nn(e),Iy(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(Pe(e),e.subtreeFlags&6&&(e.flags|=8192)):Pe(e),n=e.updateQueue,n!==null&&Zc(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&Et(Is),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Ti(st),Pe(e),null;case 25:return null;case 30:return null}throw Error(B(156,e.tag))}function u2(t,e){switch(Ty(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ti(st),Wa(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return $h(e),null;case 31:if(e.memoizedState!==null){if(nn(e),e.alternate===null)throw Error(B(340));Ps()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(nn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Ps()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Et(Ye),null;case 4:return Wa(),null;case 10:return Ti(e.type),null;case 22:case 23:return nn(e),Iy(),t!==null&&Et(Is),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Ti(st),null;case 25:return null;default:return null}}function f0(t,e){switch(Ty(e),e.tag){case 3:Ti(st),Wa();break;case 26:case 27:case 5:$h(e);break;case 4:Wa();break;case 31:e.memoizedState!==null&&nn(e);break;case 13:nn(e);break;case 19:Et(Ye);break;case 10:Ti(e.type);break;case 22:case 23:nn(e),Iy(),t!==null&&Et(Is);break;case 24:Ti(st)}}function ic(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(o){ve(e,e.return,o)}}function kr(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&t)===t){var a=i.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,r=e;var l=n,c=o;try{c()}catch(h){ve(r,l,h)}}}i=i.next}while(i!==s)}}catch(h){ve(e,e.return,h)}}function d0(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{SA(e,n)}catch(i){ve(t,t.return,i)}}}function m0(t,e,n){n.props=Ls(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){ve(t,e,i)}}function Zl(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(r){ve(t,e,r)}}function Qn(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){ve(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){ve(t,e,r)}else n.current=null}function p0(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){ve(t,t.return,r)}}function jm(t,e,n){try{var i=t.stateNode;x2(i,t.type,n,e),i[Xt]=e}catch(r){ve(t,t.return,r)}}function g0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Qr(t.type)||t.tag===4}function Fm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||g0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Qr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=fi));else if(i!==4&&(i===27&&Qr(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Jp(t,e,n),t=t.sibling;t!==null;)Jp(t,e,n),t=t.sibling}function uf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Qr(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(uf(t,e,n),t=t.sibling;t!==null;)uf(t,e,n),t=t.sibling}function y0(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Dt(e,i,n),e[At]=t,e[Xt]=n}catch(s){ve(t,t.return,s)}}var ui=!1,rt=!1,qm=!1,CT=typeof WeakSet=="function"?WeakSet:Set,yt=null;function c2(t,e){if(t=t.containerInfo,sg=Ef,t=rA(t),gy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,h=0,f=t,m=null;t:for(;;){for(var g;f!==n||r!==0&&f.nodeType!==3||(o=a+r),f!==s||i!==0&&f.nodeType!==3||(l=a+i),f.nodeType===3&&(a+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===n&&++c===r&&(o=a),m===s&&++h===i&&(l=a),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ag={focusedElem:t,selectionRange:n},Ef=!1,yt=e;yt!==null;)if(e=yt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,yt=t;else for(;yt!==null;){switch(e=yt,s=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var w=Ls(n.type,r);t=i.getSnapshotBeforeUpdate(w,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(I){ve(n,n.return,I)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)lg(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":lg(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(B(163))}if(t=e.sibling,t!==null){t.return=e.return,yt=t;break}yt=e.return}}function _0(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:ai(t,n),i&4&&ic(5,n);break;case 1:if(ai(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){ve(n,n.return,a)}else{var r=Ls(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){ve(n,n.return,a)}}i&64&&d0(n),i&512&&Zl(n,n.return);break;case 3:if(ai(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{SA(t,e)}catch(a){ve(n,n.return,a)}}break;case 27:e===null&&i&4&&y0(n);case 26:case 5:ai(t,n),e===null&&i&4&&p0(n),i&512&&Zl(n,n.return);break;case 12:ai(t,n);break;case 31:ai(t,n),i&4&&T0(t,n);break;case 13:ai(t,n),i&4&&S0(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=v2.bind(null,n),z2(t,n))));break;case 22:if(i=n.memoizedState!==null||ui,!i){e=e!==null&&e.memoizedState!==null||rt,r=ui;var s=rt;ui=i,(rt=e)&&!s?oi(t,n,(n.subtreeFlags&8772)!==0):ai(t,n),ui=r,rt=s}break;case 30:break;default:ai(t,n)}}function v0(t){var e=t.alternate;e!==null&&(t.alternate=null,v0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&cy(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ze=null,Ft=!1;function si(t,e,n){for(n=n.child;n!==null;)E0(t,e,n),n=n.sibling}function E0(t,e,n){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Wu,n)}catch{}switch(n.tag){case 26:rt||Qn(n,e),si(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:rt||Qn(n,e);var i=ze,r=Ft;Qr(n.type)&&(ze=n.stateNode,Ft=!1),si(t,e,n),iu(n.stateNode),ze=i,Ft=r;break;case 5:rt||Qn(n,e);case 6:if(i=ze,r=Ft,ze=null,si(t,e,n),ze=i,Ft=r,ze!==null)if(Ft)try{(ze.nodeType===9?ze.body:ze.nodeName==="HTML"?ze.ownerDocument.body:ze).removeChild(n.stateNode)}catch(s){ve(n,e,s)}else try{ze.removeChild(n.stateNode)}catch(s){ve(n,e,s)}break;case 18:ze!==null&&(Ft?(t=ze,jT(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),ao(t)):jT(ze,n.stateNode));break;case 4:i=ze,r=Ft,ze=n.stateNode.containerInfo,Ft=!0,si(t,e,n),ze=i,Ft=r;break;case 0:case 11:case 14:case 15:kr(2,n,e),rt||kr(4,n,e),si(t,e,n);break;case 1:rt||(Qn(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&m0(n,e,i)),si(t,e,n);break;case 21:si(t,e,n);break;case 22:rt=(i=rt)||n.memoizedState!==null,si(t,e,n),rt=i;break;default:si(t,e,n)}}function T0(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ao(t)}catch(n){ve(e,e.return,n)}}}function S0(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ao(t)}catch(n){ve(e,e.return,n)}}function h2(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new CT),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new CT),e;default:throw Error(B(435,t.tag))}}function eh(t,e){var n=h2(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var r=E2.bind(null,t,i);i.then(r,r)}})}function Bt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(Qr(o.type)){ze=o.stateNode,Ft=!1;break e}break;case 5:ze=o.stateNode,Ft=!1;break e;case 3:case 4:ze=o.stateNode.containerInfo,Ft=!0;break e}o=o.return}if(ze===null)throw Error(B(160));E0(s,a,r),ze=null,Ft=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)w0(e,t),e=e.sibling}var xn=null;function w0(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Bt(e,t),jt(t),i&4&&(kr(3,t,t.return),ic(3,t),kr(5,t,t.return));break;case 1:Bt(e,t),jt(t),i&512&&(rt||n===null||Qn(n,n.return)),i&64&&ui&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=xn;if(Bt(e,t),jt(t),i&512&&(rt||n===null||Qn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[Zu]||s[At]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Dt(s,i,n),s[At]=t,vt(s),i=s;break e;case"link":var a=$T("link","href",r).get(i+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(s=a[o],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}s=r.createElement(i),Dt(s,i,n),r.head.appendChild(s);break;case"meta":if(a=$T("meta","content",r).get(i+(n.content||""))){for(o=0;o<a.length;o++)if(s=a[o],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}s=r.createElement(i),Dt(s,i,n),r.head.appendChild(s);break;default:throw Error(B(468,i))}s[At]=t,vt(s),i=s}t.stateNode=i}else YT(r,t.type,t.stateNode);else t.stateNode=QT(r,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?YT(r,t.type,t.stateNode):QT(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&jm(t,t.memoizedProps,n.memoizedProps)}break;case 27:Bt(e,t),jt(t),i&512&&(rt||n===null||Qn(n,n.return)),n!==null&&i&4&&jm(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Bt(e,t),jt(t),i&512&&(rt||n===null||Qn(n,n.return)),t.flags&32){r=t.stateNode;try{Ja(r,"")}catch(w){ve(t,t.return,w)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,jm(t,r,n!==null?n.memoizedProps:r)),i&1024&&(qm=!0);break;case 6:if(Bt(e,t),jt(t),i&4){if(t.stateNode===null)throw Error(B(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(w){ve(t,t.return,w)}}break;case 3:if(Rh=null,r=xn,xn=yf(e.containerInfo),Bt(e,t),xn=r,jt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ao(e.containerInfo)}catch(w){ve(t,t.return,w)}qm&&(qm=!1,b0(t));break;case 4:i=xn,xn=yf(t.stateNode.containerInfo),Bt(e,t),jt(t),xn=i;break;case 12:Bt(e,t),jt(t);break;case 31:Bt(e,t),jt(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,eh(t,i)));break;case 13:Bt(e,t),jt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(ud=ln()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,eh(t,i)));break;case 22:r=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=ui,h=rt;if(ui=c||r,rt=h||l,Bt(e,t),rt=h,ui=c,jt(t),i&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||l||ui||rt||ms(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(s=l.stateNode,r)a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=l.stateNode;var f=l.memoizedProps.style,m=f!=null&&f.hasOwnProperty("display")?f.display:null;o.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(w){ve(l,l.return,w)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=r?"":l.memoizedProps}catch(w){ve(l,l.return,w)}}}else if(e.tag===18){if(n===null){l=e;try{var g=l.stateNode;r?FT(g,!0):FT(l.stateNode,!1)}catch(w){ve(l,l.return,w)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,eh(t,n))));break;case 19:Bt(e,t),jt(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,eh(t,i)));break;case 30:break;case 21:break;default:Bt(e,t),jt(t)}}function jt(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(g0(i)){n=i;break}i=i.return}if(n==null)throw Error(B(160));switch(n.tag){case 27:var r=n.stateNode,s=Fm(t);uf(t,s,r);break;case 5:var a=n.stateNode;n.flags&32&&(Ja(a,""),n.flags&=-33);var o=Fm(t);uf(t,o,a);break;case 3:case 4:var l=n.stateNode.containerInfo,c=Fm(t);Jp(t,c,l);break;default:throw Error(B(161))}}catch(h){ve(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function b0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;b0(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function ai(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)_0(t,e.alternate,e),e=e.sibling}function ms(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:kr(4,e,e.return),ms(e);break;case 1:Qn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&m0(e,e.return,n),ms(e);break;case 27:iu(e.stateNode);case 26:case 5:Qn(e,e.return),ms(e);break;case 22:e.memoizedState===null&&ms(e);break;case 30:ms(e);break;default:ms(e)}t=t.sibling}}function oi(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:oi(r,s,n),ic(4,s);break;case 1:if(oi(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){ve(i,i.return,c)}if(i=s,r=i.updateQueue,r!==null){var o=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)TA(l[r],o)}catch(c){ve(i,i.return,c)}}n&&a&64&&d0(s),Zl(s,s.return);break;case 27:y0(s);case 26:case 5:oi(r,s,n),n&&i===null&&a&4&&p0(s),Zl(s,s.return);break;case 12:oi(r,s,n);break;case 31:oi(r,s,n),n&&a&4&&T0(r,s);break;case 13:oi(r,s,n),n&&a&4&&S0(r,s);break;case 22:s.memoizedState===null&&oi(r,s,n),Zl(s,s.return);break;case 30:break;default:oi(r,s,n)}e=e.sibling}}function Fy(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&tc(n))}function qy(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&tc(t))}function Nn(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)A0(t,e,n,i),e=e.sibling}function A0(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:Nn(t,e,n,i),r&2048&&ic(9,e);break;case 1:Nn(t,e,n,i);break;case 3:Nn(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&tc(t)));break;case 12:if(r&2048){Nn(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,o=s.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){ve(e,e.return,l)}}else Nn(t,e,n,i);break;case 31:Nn(t,e,n,i);break;case 13:Nn(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,a=e.alternate,e.memoizedState!==null?s._visibility&2?Nn(t,e,n,i):eu(t,e):s._visibility&2?Nn(t,e,n,i):(s._visibility|=2,va(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),r&2048&&Fy(a,e);break;case 24:Nn(t,e,n,i),r&2048&&qy(e.alternate,e);break;default:Nn(t,e,n,i)}}function va(t,e,n,i,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,a=e,o=n,l=i,c=a.flags;switch(a.tag){case 0:case 11:case 15:va(s,a,o,l,r),ic(8,a);break;case 23:break;case 22:var h=a.stateNode;a.memoizedState!==null?h._visibility&2?va(s,a,o,l,r):eu(s,a):(h._visibility|=2,va(s,a,o,l,r)),r&&c&2048&&Fy(a.alternate,a);break;case 24:va(s,a,o,l,r),r&&c&2048&&qy(a.alternate,a);break;default:va(s,a,o,l,r)}e=e.sibling}}function eu(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:eu(n,i),r&2048&&Fy(i.alternate,i);break;case 24:eu(n,i),r&2048&&qy(i.alternate,i);break;default:eu(n,i)}e=e.sibling}}var Ll=8192;function ha(t,e,n){if(t.subtreeFlags&Ll)for(t=t.child;t!==null;)I0(t,e,n),t=t.sibling}function I0(t,e,n){switch(t.tag){case 26:ha(t,e,n),t.flags&Ll&&t.memoizedState!==null&&X2(n,xn,t.memoizedState,t.memoizedProps);break;case 5:ha(t,e,n);break;case 3:case 4:var i=xn;xn=yf(t.stateNode.containerInfo),ha(t,e,n),xn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Ll,Ll=16777216,ha(t,e,n),Ll=i):ha(t,e,n));break;default:ha(t,e,n)}}function R0(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function bl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];yt=i,D0(i,t)}R0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)C0(t),t=t.sibling}function C0(t){switch(t.tag){case 0:case 11:case 15:bl(t),t.flags&2048&&kr(9,t,t.return);break;case 3:bl(t);break;case 12:bl(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Ah(t)):bl(t);break;default:bl(t)}}function Ah(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];yt=i,D0(i,t)}R0(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:kr(8,e,e.return),Ah(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Ah(e));break;default:Ah(e)}t=t.sibling}}function D0(t,e){for(;yt!==null;){var n=yt;switch(n.tag){case 0:case 11:case 15:kr(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:tc(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,yt=i;else e:for(n=t;yt!==null;){i=yt;var r=i.sibling,s=i.return;if(v0(i),i===n){yt=null;break e}if(r!==null){r.return=s,yt=r;break e}yt=s}}}var f2={getCacheForType:function(t){var e=Ct(st),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Ct(st).controller.signal}},d2=typeof WeakMap=="function"?WeakMap:Map,pe=0,De=null,ue=null,he=0,_e=0,en=null,pr=!1,ko=!1,Hy=!1,Di=0,$e=0,Lr=0,Cs=0,Gy=0,an=0,no=0,tu=null,qt=null,Zp=!1,ud=0,N0=0,cf=1/0,hf=null,br=null,ut=0,Ar=null,io=null,Si=0,eg=0,tg=null,x0=null,nu=0,ng=null;function hn(){return pe&2&&he!==0?he&-he:Z.T!==null?Qy():Bb()}function V0(){if(an===0)if(!(he&536870912)||de){var t=Kc;Kc<<=1,!(Kc&3932160)&&(Kc=262144),an=t}else an=536870912;return t=dn.current,t!==null&&(t.flags|=32),an}function $t(t,e,n){(t===De&&(_e===2||_e===9)||t.cancelPendingCommit!==null)&&(ro(t,0),gr(t,he,an,!1)),Ju(t,n),(!(pe&2)||t!==De)&&(t===De&&(!(pe&2)&&(Cs|=n),$e===4&&gr(t,he,an,!1)),ni(t))}function P0(t,e,n){if(pe&6)throw Error(B(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Xu(t,e),r=i?g2(t,e):Hm(t,e,!0),s=i;do{if(r===0){ko&&!i&&gr(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!m2(n)){r=Hm(t,e,!1),s=!1;continue}if(r===2){if(s=e,t.errorRecoveryDisabledLanes&s)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=t;r=tu;var l=o.current.memoizedState.isDehydrated;if(l&&(ro(o,a).flags|=256),a=Hm(o,a,!1),a!==2){if(Hy&&!l){o.errorRecoveryDisabledLanes|=s,Cs|=s,r=4;break e}s=qt,qt=r,s!==null&&(qt===null?qt=s:qt.push.apply(qt,s))}r=a}if(s=!1,r!==2)continue}}if(r===1){ro(t,0),gr(t,e,0,!0);break}e:{switch(i=t,s=r,s){case 0:case 1:throw Error(B(345));case 4:if((e&4194048)!==e)break;case 6:gr(i,e,an,!pr);break e;case 2:qt=null;break;case 3:case 5:break;default:throw Error(B(329))}if((e&62914560)===e&&(r=ud+300-ln(),10<r)){if(gr(i,e,an,!pr),Jf(i,0,!0)!==0)break e;Si=e,i.timeoutHandle=Z0(DT.bind(null,i,n,qt,hf,Zp,e,an,Cs,no,pr,s,"Throttled",-0,0),r);break e}DT(i,n,qt,hf,Zp,e,an,Cs,no,pr,s,null,-0,0)}}break}while(!0);ni(t)}function DT(t,e,n,i,r,s,a,o,l,c,h,f,m,g){if(t.timeoutHandle=-1,f=e.subtreeFlags,f&8192||(f&16785408)===16785408){f={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fi},I0(e,s,f);var w=(s&62914560)===s?ud-ln():(s&4194048)===s?N0-ln():0;if(w=J2(f,w),w!==null){Si=s,t.cancelPendingCommit=w(xT.bind(null,t,e,s,n,i,r,a,o,l,h,f,null,m,g)),gr(t,s,a,!c);return}}xT(t,e,s,n,i,r,a,o,l)}function m2(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!fn(s(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gr(t,e,n,i){e&=~Gy,e&=~Cs,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var s=31-cn(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&Lb(t,n,e)}function cd(){return pe&6?!0:(rc(0),!1)}function Ky(){if(ue!==null){if(_e===0)var t=ue.return;else t=ue,di=ea=null,xy(t),Fa=null,Su=0,t=ue;for(;t!==null;)f0(t.alternate,t),t=t.return;ue=null}}function ro(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,O2(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Si=0,Ky(),De=t,ue=n=Ei(t.current,null),he=e,_e=0,en=null,pr=!1,ko=Xu(t,e),Hy=!1,no=an=Gy=Cs=Lr=$e=0,qt=tu=null,Zp=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-cn(i),s=1<<r;e|=t[r],i&=~s}return Di=e,nd(),n}function O0(t,e){re=null,Z.H=bu,e===Mo||e===rd?(e=oT(),_e=3):e===by?(e=oT(),_e=4):_e=e===By?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,en=e,ue===null&&($e=1,of(t,wn(e,t.current)))}function M0(){var t=dn.current;return t===null?!0:(he&4194048)===he?An===null:(he&62914560)===he||he&536870912?t===An:!1}function k0(){var t=Z.H;return Z.H=bu,t===null?bu:t}function L0(){var t=Z.A;return Z.A=f2,t}function ff(){$e=4,pr||(he&4194048)!==he&&dn.current!==null||(ko=!0),!(Lr&134217727)&&!(Cs&134217727)||De===null||gr(De,he,an,!1)}function Hm(t,e,n){var i=pe;pe|=2;var r=k0(),s=L0();(De!==t||he!==e)&&(hf=null,ro(t,e)),e=!1;var a=$e;e:do try{if(_e!==0&&ue!==null){var o=ue,l=en;switch(_e){case 8:Ky(),a=6;break e;case 3:case 2:case 9:case 6:dn.current===null&&(e=!0);var c=_e;if(_e=0,en=null,La(t,o,l,c),n&&ko){a=0;break e}break;default:c=_e,_e=0,en=null,La(t,o,l,c)}}p2(),a=$e;break}catch(h){O0(t,h)}while(!0);return e&&t.shellSuspendCounter++,di=ea=null,pe=i,Z.H=r,Z.A=s,ue===null&&(De=null,he=0,nd()),a}function p2(){for(;ue!==null;)U0(ue)}function g2(t,e){var n=pe;pe|=2;var i=k0(),r=L0();De!==t||he!==e?(hf=null,cf=ln()+500,ro(t,e)):ko=Xu(t,e);e:do try{if(_e!==0&&ue!==null){e=ue;var s=en;t:switch(_e){case 1:_e=0,en=null,La(t,e,s,1);break;case 2:case 9:if(aT(s)){_e=0,en=null,NT(e);break}e=function(){_e!==2&&_e!==9||De!==t||(_e=7),ni(t)},s.then(e,e);break e;case 3:_e=7;break e;case 4:_e=5;break e;case 7:aT(s)?(_e=0,en=null,NT(e)):(_e=0,en=null,La(t,e,s,7));break;case 5:var a=null;switch(ue.tag){case 26:a=ue.memoizedState;case 5:case 27:var o=ue;if(a?rI(a):o.stateNode.complete){_e=0,en=null;var l=o.sibling;if(l!==null)ue=l;else{var c=o.return;c!==null?(ue=c,hd(c)):ue=null}break t}}_e=0,en=null,La(t,e,s,5);break;case 6:_e=0,en=null,La(t,e,s,6);break;case 8:Ky(),$e=6;break e;default:throw Error(B(462))}}y2();break}catch(h){O0(t,h)}while(!0);return di=ea=null,Z.H=i,Z.A=r,pe=n,ue!==null?0:(De=null,he=0,nd(),$e)}function y2(){for(;ue!==null&&!BN();)U0(ue)}function U0(t){var e=h0(t.alternate,t,Di);t.memoizedProps=t.pendingProps,e===null?hd(t):ue=e}function NT(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=wT(n,e,e.pendingProps,e.type,void 0,he);break;case 11:e=wT(n,e,e.pendingProps,e.type.render,e.ref,he);break;case 5:xy(e);default:f0(n,e),e=ue=fA(e,Di),e=h0(n,e,Di)}t.memoizedProps=t.pendingProps,e===null?hd(t):ue=e}function La(t,e,n,i){di=ea=null,xy(e),Fa=null,Su=0;var r=e.return;try{if(s2(t,r,e,n,he)){$e=1,of(t,wn(n,t.current)),ue=null;return}}catch(s){if(r!==null)throw ue=r,s;$e=1,of(t,wn(n,t.current)),ue=null;return}e.flags&32768?(de||i===1?t=!0:ko||he&536870912?t=!1:(pr=t=!0,(i===2||i===9||i===3||i===6)&&(i=dn.current,i!==null&&i.tag===13&&(i.flags|=16384))),z0(e,t)):hd(e)}function hd(t){var e=t;do{if(e.flags&32768){z0(e,pr);return}t=e.return;var n=l2(e.alternate,e,Di);if(n!==null){ue=n;return}if(e=e.sibling,e!==null){ue=e;return}ue=e=t}while(e!==null);$e===0&&($e=5)}function z0(t,e){do{var n=u2(t.alternate,t);if(n!==null){n.flags&=32767,ue=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){ue=t;return}ue=t=n}while(t!==null);$e=6,ue=null}function xT(t,e,n,i,r,s,a,o,l){t.cancelPendingCommit=null;do fd();while(ut!==0);if(pe&6)throw Error(B(327));if(e!==null){if(e===t.current)throw Error(B(177));if(s=e.lanes|e.childLanes,s|=yy,WN(t,n,s,a,o,l),t===De&&(ue=De=null,he=0),io=e,Ar=t,Si=n,eg=s,tg=r,x0=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,T2(Yh,function(){return H0(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=Z.T,Z.T=null,r=ge.p,ge.p=2,a=pe,pe|=4;try{c2(t,e,n)}finally{pe=a,ge.p=r,Z.T=i}}ut=1,B0(),j0(),F0()}}function B0(){if(ut===1){ut=0;var t=Ar,e=io,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=Z.T,Z.T=null;var i=ge.p;ge.p=2;var r=pe;pe|=4;try{w0(e,t);var s=ag,a=rA(t.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&iA(o.ownerDocument.documentElement,o)){if(l!==null&&gy(o)){var c=l.start,h=l.end;if(h===void 0&&(h=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(h,o.value.length);else{var f=o.ownerDocument||document,m=f&&f.defaultView||window;if(m.getSelection){var g=m.getSelection(),w=o.textContent.length,I=Math.min(l.start,w),N=l.end===void 0?I:Math.min(l.end,w);!g.extend&&I>N&&(a=N,N=I,I=a);var v=ZE(o,I),y=ZE(o,N);if(v&&y&&(g.rangeCount!==1||g.anchorNode!==v.node||g.anchorOffset!==v.offset||g.focusNode!==y.node||g.focusOffset!==y.offset)){var E=f.createRange();E.setStart(v.node,v.offset),g.removeAllRanges(),I>N?(g.addRange(E),g.extend(y.node,y.offset)):(E.setEnd(y.node,y.offset),g.addRange(E))}}}}for(f=[],g=o;g=g.parentNode;)g.nodeType===1&&f.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<f.length;o++){var x=f[o];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}Ef=!!sg,ag=sg=null}finally{pe=r,ge.p=i,Z.T=n}}t.current=e,ut=2}}function j0(){if(ut===2){ut=0;var t=Ar,e=io,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=Z.T,Z.T=null;var i=ge.p;ge.p=2;var r=pe;pe|=4;try{_0(t,e.alternate,e)}finally{pe=r,ge.p=i,Z.T=n}}ut=3}}function F0(){if(ut===4||ut===3){ut=0,jN();var t=Ar,e=io,n=Si,i=x0;e.subtreeFlags&10256||e.flags&10256?ut=5:(ut=0,io=Ar=null,q0(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(br=null),uy(n),e=e.stateNode,un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Wu,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=Z.T,r=ge.p,ge.p=2,Z.T=null;try{for(var s=t.onRecoverableError,a=0;a<i.length;a++){var o=i[a];s(o.value,{componentStack:o.stack})}}finally{Z.T=e,ge.p=r}}Si&3&&fd(),ni(t),r=t.pendingLanes,n&261930&&r&42?t===ng?nu++:(nu=0,ng=t):nu=0,rc(0)}}function q0(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,tc(e)))}function fd(){return B0(),j0(),F0(),H0()}function H0(){if(ut!==5)return!1;var t=Ar,e=eg;eg=0;var n=uy(Si),i=Z.T,r=ge.p;try{ge.p=32>n?32:n,Z.T=null,n=tg,tg=null;var s=Ar,a=Si;if(ut=0,io=Ar=null,Si=0,pe&6)throw Error(B(331));var o=pe;if(pe|=4,C0(s.current),A0(s,s.current,a,n),pe=o,rc(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Wu,s)}catch{}return!0}finally{ge.p=r,Z.T=i,q0(t,e)}}function VT(t,e,n){e=wn(n,e),e=Yp(t.stateNode,e,2),t=wr(t,e,2),t!==null&&(Ju(t,2),ni(t))}function ve(t,e,n){if(t.tag===3)VT(t,t,n);else for(;e!==null;){if(e.tag===3){VT(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(br===null||!br.has(i))){t=wn(n,t),n=s0(2),i=wr(e,n,2),i!==null&&(a0(n,i,e,t),Ju(i,2),ni(i));break}}e=e.return}}function Gm(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new d2;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(Hy=!0,r.add(n),t=_2.bind(null,t,e,n),e.then(t,t))}function _2(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,De===t&&(he&n)===n&&($e===4||$e===3&&(he&62914560)===he&&300>ln()-ud?!(pe&2)&&ro(t,0):Gy|=n,no===he&&(no=0)),ni(t)}function G0(t,e){e===0&&(e=kb()),t=Zs(t,e),t!==null&&(Ju(t,e),ni(t))}function v2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),G0(t,n)}function E2(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(B(314))}i!==null&&i.delete(e),G0(t,n)}function T2(t,e){return oy(t,e)}var df=null,Ea=null,ig=!1,mf=!1,Km=!1,yr=0;function ni(t){t!==Ea&&t.next===null&&(Ea===null?df=Ea=t:Ea=Ea.next=t),mf=!0,ig||(ig=!0,w2())}function rc(t,e){if(!Km&&mf){Km=!0;do for(var n=!1,i=df;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,o=i.pingedLanes;s=(1<<31-cn(42|t)+1)-1,s&=r&~(a&~o),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,PT(i,s))}else s=he,s=Jf(i,i===De?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||Xu(i,s)||(n=!0,PT(i,s));i=i.next}while(n);Km=!1}}function S2(){K0()}function K0(){mf=ig=!1;var t=0;yr!==0&&P2()&&(t=yr);for(var e=ln(),n=null,i=df;i!==null;){var r=i.next,s=Q0(i,e);s===0?(i.next=null,n===null?df=r:n.next=r,r===null&&(Ea=n)):(n=i,(t!==0||s&3)&&(mf=!0)),i=r}ut!==0&&ut!==5||rc(t),yr!==0&&(yr=0)}function Q0(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var a=31-cn(s),o=1<<a,l=r[a];l===-1?(!(o&n)||o&i)&&(r[a]=YN(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}if(e=De,n=he,n=Jf(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(_e===2||_e===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&Em(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Xu(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&Em(i),uy(n)){case 2:case 8:n=Ob;break;case 32:n=Yh;break;case 268435456:n=Mb;break;default:n=Yh}return i=$0.bind(null,t),n=oy(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&Em(i),t.callbackPriority=2,t.callbackNode=null,2}function $0(t,e){if(ut!==0&&ut!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(fd()&&t.callbackNode!==n)return null;var i=he;return i=Jf(t,t===De?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(P0(t,i,e),Q0(t,ln()),t.callbackNode!=null&&t.callbackNode===n?$0.bind(null,t):null)}function PT(t,e){if(fd())return null;P0(t,e,!0)}function w2(){M2(function(){pe&6?oy(Pb,S2):K0()})}function Qy(){if(yr===0){var t=Za;t===0&&(t=Gc,Gc<<=1,!(Gc&261888)&&(Gc=256)),yr=t}return yr}function OT(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:gh(""+t)}function MT(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function b2(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var s=OT((r[Xt]||null).action),a=i.submitter;a&&(e=(e=a[Xt]||null)?OT(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var o=new Zf("action","action",null,i,r);t.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(yr!==0){var l=a?MT(r,a):new FormData(r);Qp(n,{pending:!0,data:l,method:r.method,action:s},null,l)}}else typeof s=="function"&&(o.preventDefault(),l=a?MT(r,a):new FormData(r),Qp(n,{pending:!0,data:l,method:r.method,action:s},s,l))},currentTarget:r}]})}}for(var Qm=0;Qm<Mp.length;Qm++){var $m=Mp[Qm],A2=$m.toLowerCase(),I2=$m[0].toUpperCase()+$m.slice(1);Un(A2,"on"+I2)}Un(aA,"onAnimationEnd");Un(oA,"onAnimationIteration");Un(lA,"onAnimationStart");Un("dblclick","onDoubleClick");Un("focusin","onFocus");Un("focusout","onBlur");Un(Fx,"onTransitionRun");Un(qx,"onTransitionStart");Un(Hx,"onTransitionCancel");Un(uA,"onTransitionEnd");Xa("onMouseEnter",["mouseout","mouseover"]);Xa("onMouseLeave",["mouseout","mouseover"]);Xa("onPointerEnter",["pointerout","pointerover"]);Xa("onPointerLeave",["pointerout","pointerover"]);Ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Au));function Y0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(h){Xh(h)}r.currentTarget=null,s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(h){Xh(h)}r.currentTarget=null,s=l}}}}function le(t,e){var n=e[Rp];n===void 0&&(n=e[Rp]=new Set);var i=t+"__bubble";n.has(i)||(W0(e,t,2,!1),n.add(i))}function Ym(t,e,n){var i=0;e&&(i|=4),W0(n,t,i,e)}var th="_reactListening"+Math.random().toString(36).slice(2);function $y(t){if(!t[th]){t[th]=!0,jb.forEach(function(n){n!=="selectionchange"&&(R2.has(n)||Ym(n,!1,t),Ym(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[th]||(e[th]=!0,Ym("selectionchange",!1,e))}}function W0(t,e,n,i){switch(uI(e)){case 2:var r=tV;break;case 8:r=nV;break;default:r=Jy}n=r.bind(null,e,n,t),r=void 0,!Vp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Wm(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&a.stateNode.containerInfo===r)return;a=a.return}for(;o!==null;){if(a=Ca(o),a===null)return;if(l=a.tag,l===5||l===6||l===26||l===27){i=s=a;continue e}o=o.parentNode}}i=i.return}Yb(function(){var c=s,h=fy(n),f=[];e:{var m=cA.get(t);if(m!==void 0){var g=Zf,w=t;switch(t){case"keypress":if(_h(n)===0)break e;case"keydown":case"keyup":g=Ex;break;case"focusin":w="focus",g=Am;break;case"focusout":w="blur",g=Am;break;case"beforeblur":case"afterblur":g=Am;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=qE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=lx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=wx;break;case aA:case oA:case lA:g=hx;break;case uA:g=Ax;break;case"scroll":case"scrollend":g=ax;break;case"wheel":g=Rx;break;case"copy":case"cut":case"paste":g=dx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=GE;break;case"toggle":case"beforetoggle":g=Dx}var I=(e&4)!==0,N=!I&&(t==="scroll"||t==="scrollend"),v=I?m!==null?m+"Capture":null:m;I=[];for(var y=c,E;y!==null;){var x=y;if(E=x.stateNode,x=x.tag,x!==5&&x!==26&&x!==27||E===null||v===null||(x=yu(y,v),x!=null&&I.push(Iu(y,x,E))),N)break;y=y.return}0<I.length&&(m=new g(m,w,null,n,h),f.push({event:m,listeners:I}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==xp&&(w=n.relatedTarget||n.fromElement)&&(Ca(w)||w[Vo]))break e;if((g||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=c,w=w?Ca(w):null,w!==null&&(N=Yu(w),I=w.tag,w!==N||I!==5&&I!==27&&I!==6)&&(w=null)):(g=null,w=c),g!==w)){if(I=qE,x="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(I=GE,x="onPointerLeave",v="onPointerEnter",y="pointer"),N=g==null?m:Ml(g),E=w==null?m:Ml(w),m=new I(x,y+"leave",g,n,h),m.target=N,m.relatedTarget=E,x=null,Ca(h)===c&&(I=new I(v,y+"enter",w,n,h),I.target=E,I.relatedTarget=N,x=I),N=x,g&&w)t:{for(I=C2,v=g,y=w,E=0,x=v;x;x=I(x))E++;x=0;for(var U=y;U;U=I(U))x++;for(;0<E-x;)v=I(v),E--;for(;0<x-E;)y=I(y),x--;for(;E--;){if(v===y||y!==null&&v===y.alternate){I=v;break t}v=I(v),y=I(y)}I=null}else I=null;g!==null&&kT(f,m,g,I,!1),w!==null&&N!==null&&kT(f,N,w,I,!0)}}e:{if(m=c?Ml(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var F=YE;else if($E(m))if(tA)F=zx;else{F=Lx;var S=kx}else g=m.nodeName,!g||g.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?c&&hy(c.elementType)&&(F=YE):F=Ux;if(F&&(F=F(t,c))){eA(f,F,n,h);break e}S&&S(t,m,c),t==="focusout"&&c&&m.type==="number"&&c.memoizedProps.value!=null&&Np(m,"number",m.value)}switch(S=c?Ml(c):window,t){case"focusin":($E(S)||S.contentEditable==="true")&&(xa=S,Pp=c,Ql=null);break;case"focusout":Ql=Pp=xa=null;break;case"mousedown":Op=!0;break;case"contextmenu":case"mouseup":case"dragend":Op=!1,eT(f,n,h);break;case"selectionchange":if(jx)break;case"keydown":case"keyup":eT(f,n,h)}var T;if(py)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Na?Jb(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(Xb&&n.locale!=="ko"&&(Na||b!=="onCompositionStart"?b==="onCompositionEnd"&&Na&&(T=Wb()):(mr=h,dy="value"in mr?mr.value:mr.textContent,Na=!0)),S=pf(c,b),0<S.length&&(b=new HE(b,t,null,n,h),f.push({event:b,listeners:S}),T?b.data=T:(T=Zb(n),T!==null&&(b.data=T)))),(T=xx?Vx(t,n):Px(t,n))&&(b=pf(c,"onBeforeInput"),0<b.length&&(S=new HE("onBeforeInput","beforeinput",null,n,h),f.push({event:S,listeners:b}),S.data=T)),b2(f,t,c,n,h)}Y0(f,e)})}function Iu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pf(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=yu(t,n),r!=null&&i.unshift(Iu(t,r,s)),r=yu(t,e),r!=null&&i.push(Iu(t,r,s))),t.tag===3)return i;t=t.return}return[]}function C2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function kT(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===i)break;o!==5&&o!==26&&o!==27||c===null||(l=c,r?(c=yu(n,s),c!=null&&a.unshift(Iu(n,c,l))):r||(c=yu(n,s),c!=null&&a.push(Iu(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var D2=/\r\n?/g,N2=/\u0000|\uFFFD/g;function LT(t){return(typeof t=="string"?t:""+t).replace(D2,`
`).replace(N2,"")}function X0(t,e){return e=LT(e),LT(t)===e}function Ae(t,e,n,i,r,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Ja(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Ja(t,""+i);break;case"className":$c(t,"class",i);break;case"tabIndex":$c(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":$c(t,n,i);break;case"style":$b(t,i,s);break;case"data":if(e!=="object"){$c(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=gh(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&Ae(t,e,"name",r.name,r,null),Ae(t,e,"formEncType",r.formEncType,r,null),Ae(t,e,"formMethod",r.formMethod,r,null),Ae(t,e,"formTarget",r.formTarget,r,null)):(Ae(t,e,"encType",r.encType,r,null),Ae(t,e,"method",r.method,r,null),Ae(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=gh(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=fi);break;case"onScroll":i!=null&&le("scroll",t);break;case"onScrollEnd":i!=null&&le("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(B(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(B(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=gh(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":le("beforetoggle",t),le("toggle",t),ph(t,"popover",i);break;case"xlinkActuate":ii(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ii(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ii(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ii(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ii(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ii(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ii(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ii(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ii(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":ph(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=rx.get(n)||n,ph(t,n,i))}}function rg(t,e,n,i,r,s){switch(n){case"style":$b(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(B(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(B(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Ja(t,i):(typeof i=="number"||typeof i=="bigint")&&Ja(t,""+i);break;case"onScroll":i!=null&&le("scroll",t);break;case"onScrollEnd":i!=null&&le("scrollend",t);break;case"onClick":i!=null&&(t.onclick=fi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fb.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),s=t[Xt]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):ph(t,n,i)}}}function Dt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":le("error",t),le("load",t);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(B(137,e));default:Ae(t,e,s,a,n,null)}}r&&Ae(t,e,"srcSet",n.srcSet,n,null),i&&Ae(t,e,"src",n.src,n,null);return;case"input":le("invalid",t);var o=s=a=r=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(h!=null)switch(i){case"name":r=h;break;case"type":a=h;break;case"checked":l=h;break;case"defaultChecked":c=h;break;case"value":s=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(B(137,e));break;default:Ae(t,e,i,h,n,null)}}Gb(t,s,o,l,c,a,r,!1);return;case"select":le("invalid",t),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(o=n[r],o!=null))switch(r){case"value":s=o;break;case"defaultValue":a=o;break;case"multiple":i=o;default:Ae(t,e,r,o,n,null)}e=s,n=a,t.multiple=!!i,e!=null?za(t,!!i,e,!1):n!=null&&za(t,!!i,n,!0);return;case"textarea":le("invalid",t),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":i=o;break;case"defaultValue":r=o;break;case"children":s=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(B(91));break;default:Ae(t,e,a,o,n,null)}Qb(t,i,r,s);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ae(t,e,l,i,n,null)}return;case"dialog":le("beforetoggle",t),le("toggle",t),le("cancel",t),le("close",t);break;case"iframe":case"object":le("load",t);break;case"video":case"audio":for(i=0;i<Au.length;i++)le(Au[i],t);break;case"image":le("error",t),le("load",t);break;case"details":le("toggle",t);break;case"embed":case"source":case"link":le("error",t),le("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(B(137,e));default:Ae(t,e,c,i,n,null)}return;default:if(hy(e)){for(h in n)n.hasOwnProperty(h)&&(i=n[h],i!==void 0&&rg(t,e,h,i,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(i=n[o],i!=null&&Ae(t,e,o,i,n,null))}function x2(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,o=null,l=null,c=null,h=null;for(g in n){var f=n[g];if(n.hasOwnProperty(g)&&f!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":l=f;default:i.hasOwnProperty(g)||Ae(t,e,g,null,i,f)}}for(var m in i){var g=i[m];if(f=n[m],i.hasOwnProperty(m)&&(g!=null||f!=null))switch(m){case"type":s=g;break;case"name":r=g;break;case"checked":c=g;break;case"defaultChecked":h=g;break;case"value":a=g;break;case"defaultValue":o=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(B(137,e));break;default:g!==f&&Ae(t,e,m,g,i,f)}}Dp(t,a,o,l,c,h,s,r);return;case"select":g=a=o=m=null;for(s in n)if(l=n[s],n.hasOwnProperty(s)&&l!=null)switch(s){case"value":break;case"multiple":g=l;default:i.hasOwnProperty(s)||Ae(t,e,s,null,i,l)}for(r in i)if(s=i[r],l=n[r],i.hasOwnProperty(r)&&(s!=null||l!=null))switch(r){case"value":m=s;break;case"defaultValue":o=s;break;case"multiple":a=s;default:s!==l&&Ae(t,e,r,s,i,l)}e=o,n=a,i=g,m!=null?za(t,!!n,m,!1):!!i!=!!n&&(e!=null?za(t,!!n,e,!0):za(t,!!n,n?[]:"",!1));return;case"textarea":g=m=null;for(o in n)if(r=n[o],n.hasOwnProperty(o)&&r!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:Ae(t,e,o,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":g=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(B(91));break;default:r!==s&&Ae(t,e,a,r,i,s)}Kb(t,m,g);return;case"option":for(var w in n)if(m=n[w],n.hasOwnProperty(w)&&m!=null&&!i.hasOwnProperty(w))switch(w){case"selected":t.selected=!1;break;default:Ae(t,e,w,null,i,m)}for(l in i)if(m=i[l],g=n[l],i.hasOwnProperty(l)&&m!==g&&(m!=null||g!=null))switch(l){case"selected":t.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Ae(t,e,l,m,i,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var I in n)m=n[I],n.hasOwnProperty(I)&&m!=null&&!i.hasOwnProperty(I)&&Ae(t,e,I,null,i,m);for(c in i)if(m=i[c],g=n[c],i.hasOwnProperty(c)&&m!==g&&(m!=null||g!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(B(137,e));break;default:Ae(t,e,c,m,i,g)}return;default:if(hy(e)){for(var N in n)m=n[N],n.hasOwnProperty(N)&&m!==void 0&&!i.hasOwnProperty(N)&&rg(t,e,N,void 0,i,m);for(h in i)m=i[h],g=n[h],!i.hasOwnProperty(h)||m===g||m===void 0&&g===void 0||rg(t,e,h,m,i,g);return}}for(var v in n)m=n[v],n.hasOwnProperty(v)&&m!=null&&!i.hasOwnProperty(v)&&Ae(t,e,v,null,i,m);for(f in i)m=i[f],g=n[f],!i.hasOwnProperty(f)||m===g||m==null&&g==null||Ae(t,e,f,m,i,g)}function UT(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function V2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],s=r.transferSize,a=r.initiatorType,o=r.duration;if(s&&o&&UT(a)){for(a=0,o=r.responseEnd,i+=1;i<n.length;i++){var l=n[i],c=l.startTime;if(c>o)break;var h=l.transferSize,f=l.initiatorType;h&&UT(f)&&(l=l.responseEnd,a+=h*(l<o?1:(o-c)/(l-c)))}if(--i,e+=8*(s+a)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var sg=null,ag=null;function gf(t){return t.nodeType===9?t:t.ownerDocument}function zT(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function J0(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function og(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xm=null;function P2(){var t=window.event;return t&&t.type==="popstate"?t===Xm?!1:(Xm=t,!0):(Xm=null,!1)}var Z0=typeof setTimeout=="function"?setTimeout:void 0,O2=typeof clearTimeout=="function"?clearTimeout:void 0,BT=typeof Promise=="function"?Promise:void 0,M2=typeof queueMicrotask=="function"?queueMicrotask:typeof BT<"u"?function(t){return BT.resolve(null).then(t).catch(k2)}:Z0;function k2(t){setTimeout(function(){throw t})}function Qr(t){return t==="head"}function jT(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(r),ao(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")iu(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,iu(n);for(var s=n.firstChild;s;){var a=s.nextSibling,o=s.nodeName;s[Zu]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=a}}else n==="body"&&iu(t.ownerDocument.body);n=r}while(n);ao(e)}function FT(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function lg(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":lg(n),cy(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function L2(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[Zu])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=In(t.nextSibling),t===null)break}return null}function U2(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=In(t.nextSibling),t===null))return null;return t}function eI(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=In(t.nextSibling),t===null))return null;return t}function ug(t){return t.data==="$?"||t.data==="$~"}function cg(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function z2(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function In(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var hg=null;function qT(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return In(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function HT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function tI(t,e,n){switch(e=gf(n),t){case"html":if(t=e.documentElement,!t)throw Error(B(452));return t;case"head":if(t=e.head,!t)throw Error(B(453));return t;case"body":if(t=e.body,!t)throw Error(B(454));return t;default:throw Error(B(451))}}function iu(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);cy(t)}var Cn=new Map,GT=new Set;function yf(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Mi=ge.d;ge.d={f:B2,r:j2,D:F2,C:q2,L:H2,m:G2,X:Q2,S:K2,M:$2};function B2(){var t=Mi.f(),e=cd();return t||e}function j2(t){var e=Po(t);e!==null&&e.tag===5&&e.type==="form"?$A(e):Mi.r(t)}var Lo=typeof document>"u"?null:document;function nI(t,e,n){var i=Lo;if(i&&typeof e=="string"&&e){var r=Sn(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),GT.has(r)||(GT.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),Dt(e,"link",t),vt(e),i.head.appendChild(e)))}}function F2(t){Mi.D(t),nI("dns-prefetch",t,null)}function q2(t,e){Mi.C(t,e),nI("preconnect",t,e)}function H2(t,e,n){Mi.L(t,e,n);var i=Lo;if(i&&t&&e){var r='link[rel="preload"][as="'+Sn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Sn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Sn(n.imageSizes)+'"]')):r+='[href="'+Sn(t)+'"]';var s=r;switch(e){case"style":s=so(t);break;case"script":s=Uo(t)}Cn.has(s)||(t=Ue({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Cn.set(s,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(sc(s))||e==="script"&&i.querySelector(ac(s))||(e=i.createElement("link"),Dt(e,"link",t),vt(e),i.head.appendChild(e)))}}function G2(t,e){Mi.m(t,e);var n=Lo;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+Sn(i)+'"][href="'+Sn(t)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Uo(t)}if(!Cn.has(s)&&(t=Ue({rel:"modulepreload",href:t},e),Cn.set(s,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ac(s)))return}i=n.createElement("link"),Dt(i,"link",t),vt(i),n.head.appendChild(i)}}}function K2(t,e,n){Mi.S(t,e,n);var i=Lo;if(i&&t){var r=Ua(i).hoistableStyles,s=so(t);e=e||"default";var a=r.get(s);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(sc(s)))o.loading=5;else{t=Ue({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Cn.get(s))&&Yy(t,n);var l=a=i.createElement("link");vt(l),Dt(l,"link",t),l._p=new Promise(function(c,h){l.onload=c,l.onerror=h}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Ih(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(s,a)}}}function Q2(t,e){Mi.X(t,e);var n=Lo;if(n&&t){var i=Ua(n).hoistableScripts,r=Uo(t),s=i.get(r);s||(s=n.querySelector(ac(r)),s||(t=Ue({src:t,async:!0},e),(e=Cn.get(r))&&Wy(t,e),s=n.createElement("script"),vt(s),Dt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function $2(t,e){Mi.M(t,e);var n=Lo;if(n&&t){var i=Ua(n).hoistableScripts,r=Uo(t),s=i.get(r);s||(s=n.querySelector(ac(r)),s||(t=Ue({src:t,async:!0,type:"module"},e),(e=Cn.get(r))&&Wy(t,e),s=n.createElement("script"),vt(s),Dt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function KT(t,e,n,i){var r=(r=Er.current)?yf(r):null;if(!r)throw Error(B(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=so(n.href),n=Ua(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=so(n.href);var s=Ua(r).hoistableStyles,a=s.get(t);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,a),(s=r.querySelector(sc(t)))&&!s._p&&(a.instance=s,a.state.loading=5),Cn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Cn.set(t,n),s||Y2(r,t,n,a.state))),e&&i===null)throw Error(B(528,""));return a}if(e&&i!==null)throw Error(B(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Uo(n),n=Ua(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(B(444,t))}}function so(t){return'href="'+Sn(t)+'"'}function sc(t){return'link[rel="stylesheet"]['+t+"]"}function iI(t){return Ue({},t,{"data-precedence":t.precedence,precedence:null})}function Y2(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),Dt(e,"link",n),vt(e),t.head.appendChild(e))}function Uo(t){return'[src="'+Sn(t)+'"]'}function ac(t){return"script[async]"+t}function QT(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+Sn(n.href)+'"]');if(i)return e.instance=i,vt(i),i;var r=Ue({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),vt(i),Dt(i,"style",r),Ih(i,n.precedence,t),e.instance=i;case"stylesheet":r=so(n.href);var s=t.querySelector(sc(r));if(s)return e.state.loading|=4,e.instance=s,vt(s),s;i=iI(n),(r=Cn.get(r))&&Yy(i,r),s=(t.ownerDocument||t).createElement("link"),vt(s);var a=s;return a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Dt(s,"link",i),e.state.loading|=4,Ih(s,n.precedence,t),e.instance=s;case"script":return s=Uo(n.src),(r=t.querySelector(ac(s)))?(e.instance=r,vt(r),r):(i=n,(r=Cn.get(s))&&(i=Ue({},n),Wy(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),vt(r),Dt(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(B(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Ih(i,n.precedence,t));return e.instance}function Ih(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===e)s=o;else if(s!==r)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Yy(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Wy(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Rh=null;function $T(t,e,n){if(Rh===null){var i=new Map,r=Rh=new Map;r.set(n,i)}else r=Rh,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var s=n[r];if(!(s[Zu]||s[At]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=t+a;var o=i.get(a);o?o.push(s):i.set(a,[s])}}return i}function YT(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function W2(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function rI(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function X2(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=so(i.href),s=e.querySelector(sc(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=_f.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=s,vt(s);return}s=e.ownerDocument||e,i=iI(i),(r=Cn.get(r))&&Yy(i,r),s=s.createElement("link"),vt(s);var a=s;a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Dt(s,"link",i),n.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=_f.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Jm=0;function J2(t,e){return t.stylesheets&&t.count===0&&Ch(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&Ch(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&Jm===0&&(Jm=62500*V2());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ch(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>Jm?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function _f(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ch(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var vf=null;function Ch(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,vf=new Map,e.forEach(Z2,t),vf=null,_f.call(t))}function Z2(t,e){if(!(e.state.loading&4)){var n=vf.get(t);if(n)var i=n.get(null);else{n=new Map,vf.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=e.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=_f.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var Ru={$$typeof:hi,Provider:null,Consumer:null,_currentValue:bs,_currentValue2:bs,_threadCount:0};function eV(t,e,n,i,r,s,a,o,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tm(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tm(0),this.hiddenUpdates=Tm(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function sI(t,e,n,i,r,s,a,o,l,c,h,f){return t=new eV(t,e,n,a,l,c,h,f,o),e=1,s===!0&&(e|=24),s=rn(3,null,null,e),t.current=s,s.stateNode=t,e=Sy(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},Ay(s),t}function aI(t){return t?(t=Oa,t):Oa}function oI(t,e,n,i,r,s){r=aI(r),i.context===null?i.context=r:i.pendingContext=r,i=Sr(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=wr(t,i,e),n!==null&&($t(n,t,e),Yl(n,t,e))}function WT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xy(t,e){WT(t,e),(t=t.alternate)&&WT(t,e)}function lI(t){if(t.tag===13||t.tag===31){var e=Zs(t,67108864);e!==null&&$t(e,t,67108864),Xy(t,67108864)}}function XT(t){if(t.tag===13||t.tag===31){var e=hn();e=ly(e);var n=Zs(t,e);n!==null&&$t(n,t,e),Xy(t,e)}}var Ef=!0;function tV(t,e,n,i){var r=Z.T;Z.T=null;var s=ge.p;try{ge.p=2,Jy(t,e,n,i)}finally{ge.p=s,Z.T=r}}function nV(t,e,n,i){var r=Z.T;Z.T=null;var s=ge.p;try{ge.p=8,Jy(t,e,n,i)}finally{ge.p=s,Z.T=r}}function Jy(t,e,n,i){if(Ef){var r=fg(i);if(r===null)Wm(t,e,i,Tf,n),JT(t,i);else if(rV(r,t,e,n,i))i.stopPropagation();else if(JT(t,i),e&4&&-1<iV.indexOf(t)){for(;r!==null;){var s=Po(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=fs(s.pendingLanes);if(a!==0){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-cn(a);o.entanglements[1]|=l,a&=~l}ni(s),!(pe&6)&&(cf=ln()+500,rc(0))}}break;case 31:case 13:o=Zs(s,2),o!==null&&$t(o,s,2),cd(),Xy(s,2)}if(s=fg(i),s===null&&Wm(t,e,i,Tf,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Wm(t,e,i,null,n)}}function fg(t){return t=fy(t),Zy(t)}var Tf=null;function Zy(t){if(Tf=null,t=Ca(t),t!==null){var e=Yu(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=Cb(e),t!==null)return t;t=null}else if(n===31){if(t=Db(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Tf=t,null}function uI(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(FN()){case Pb:return 2;case Ob:return 8;case Yh:case qN:return 32;case Mb:return 268435456;default:return 32}default:return 32}}var dg=!1,Ir=null,Rr=null,Cr=null,Cu=new Map,Du=new Map,ar=[],iV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function JT(t,e){switch(t){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":Cu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Du.delete(e.pointerId)}}function Al(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Po(e),e!==null&&lI(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function rV(t,e,n,i,r){switch(e){case"focusin":return Ir=Al(Ir,t,e,n,i,r),!0;case"dragenter":return Rr=Al(Rr,t,e,n,i,r),!0;case"mouseover":return Cr=Al(Cr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Cu.set(s,Al(Cu.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Du.set(s,Al(Du.get(s)||null,t,e,n,i,r)),!0}return!1}function cI(t){var e=Ca(t.target);if(e!==null){var n=Yu(e);if(n!==null){if(e=n.tag,e===13){if(e=Cb(n),e!==null){t.blockedOn=e,kE(t.priority,function(){XT(n)});return}}else if(e===31){if(e=Db(n),e!==null){t.blockedOn=e,kE(t.priority,function(){XT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Dh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fg(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);xp=i,n.target.dispatchEvent(i),xp=null}else return e=Po(n),e!==null&&lI(e),t.blockedOn=n,!1;e.shift()}return!0}function ZT(t,e,n){Dh(t)&&n.delete(e)}function sV(){dg=!1,Ir!==null&&Dh(Ir)&&(Ir=null),Rr!==null&&Dh(Rr)&&(Rr=null),Cr!==null&&Dh(Cr)&&(Cr=null),Cu.forEach(ZT),Du.forEach(ZT)}function nh(t,e){t.blockedOn===e&&(t.blockedOn=null,dg||(dg=!0,ct.unstable_scheduleCallback(ct.unstable_NormalPriority,sV)))}var ih=null;function eS(t){ih!==t&&(ih=t,ct.unstable_scheduleCallback(ct.unstable_NormalPriority,function(){ih===t&&(ih=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(Zy(i||n)===null)continue;break}var s=Po(n);s!==null&&(t.splice(e,3),e-=3,Qp(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function ao(t){function e(l){return nh(l,t)}Ir!==null&&nh(Ir,t),Rr!==null&&nh(Rr,t),Cr!==null&&nh(Cr,t),Cu.forEach(e),Du.forEach(e);for(var n=0;n<ar.length;n++){var i=ar[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<ar.length&&(n=ar[0],n.blockedOn===null);)cI(n),n.blockedOn===null&&ar.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Xt]||null;if(typeof s=="function")a||eS(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Xt]||null)o=a.formAction;else if(Zy(r)!==null)continue}else o=a.action;typeof o=="function"?n[i+1]=o:(n.splice(i,3),i-=3),eS(n)}}}function hI(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(a){return r=a})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function e_(t){this._internalRoot=t}dd.prototype.render=e_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));var n=e.current,i=hn();oI(n,i,t,e,null,null)};dd.prototype.unmount=e_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oI(t.current,2,null,t,null,null),cd(),e[Vo]=null}};function dd(t){this._internalRoot=t}dd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Bb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ar.length&&e!==0&&e<ar[n].priority;n++);ar.splice(n,0,t),n===0&&cI(t)}};var tS=Ib.version;if(tS!=="19.2.3")throw Error(B(527,tS,"19.2.3"));ge.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=MN(e),t=t!==null?Nb(t):null,t=t===null?null:t.stateNode,t};var aV={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rh.isDisabled&&rh.supportsFiber)try{Wu=rh.inject(aV),un=rh}catch{}}Wf.createRoot=function(t,e){if(!Rb(t))throw Error(B(299));var n=!1,i="",r=n0,s=i0,a=r0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=sI(t,1,!1,null,null,n,i,null,r,s,a,hI),t[Vo]=e.current,$y(t),new e_(e)};Wf.hydrateRoot=function(t,e,n){if(!Rb(t))throw Error(B(299));var i=!1,r="",s=n0,a=i0,o=r0,l=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(l=n.formState)),e=sI(t,1,!0,e,n??null,i,r,l,s,a,o,hI),e.context=aI(null),n=e.current,i=hn(),i=ly(i),r=Sr(i),r.callback=null,wr(n,r,i),n=i,e.current.lanes=n,Ju(e,n),ni(e),t[Vo]=e.current,$y(t),new dd(e)};Wf.version="19.2.3";function fI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fI)}catch(t){console.error(t)}}fI(),Eb.exports=Wf;var oV=Eb.exports;/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var nS="popstate";function lV(t={}){function e(i,r){let{pathname:s,search:a,hash:o}=i.location;return mg("",{pathname:s,search:a,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Nu(r)}return cV(e,n,null,t)}function Fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uV(){return Math.random().toString(36).substring(2,10)}function iS(t,e){return{usr:t.state,key:t.key,idx:e}}function mg(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?zo(e):e,state:n,key:e&&e.key||i||uV()}}function Nu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function zo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function cV(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o="POP",l=null,c=h();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function h(){return(a.state||{idx:null}).idx}function f(){o="POP";let N=h(),v=N==null?null:N-c;c=N,l&&l({action:o,location:I.location,delta:v})}function m(N,v){o="PUSH";let y=mg(I.location,N,v);c=h()+1;let E=iS(y,c),x=I.createHref(y);try{a.pushState(E,"",x)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;r.location.assign(x)}s&&l&&l({action:o,location:I.location,delta:1})}function g(N,v){o="REPLACE";let y=mg(I.location,N,v);c=h();let E=iS(y,c),x=I.createHref(y);a.replaceState(E,"",x),s&&l&&l({action:o,location:I.location,delta:0})}function w(N){return hV(N)}let I={get action(){return o},get location(){return t(r,a)},listen(N){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(nS,f),l=N,()=>{r.removeEventListener(nS,f),l=null}},createHref(N){return e(r,N)},createURL:w,encodeLocation(N){let v=w(N);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:g,go(N){return a.go(N)}};return I}function hV(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Fe(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Nu(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function dI(t,e,n="/"){return fV(t,e,n,!1)}function fV(t,e,n,i){let r=typeof e=="string"?zo(e):e,s=Ni(r.pathname||"/",n);if(s==null)return null;let a=mI(t);dV(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=bV(s);o=SV(a[l],c,i)}return o}function mI(t,e=[],n=[],i="",r=!1){let s=(a,o,l=r,c)=>{let h={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(i)&&l)return;Fe(h.relativePath.startsWith(i),`Absolute route path "${h.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(i.length)}let f=wi([i,h.relativePath]),m=n.concat(h);a.children&&a.children.length>0&&(Fe(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),mI(a.children,e,m,f,l)),!(a.path==null&&!a.index)&&e.push({path:f,score:EV(f,a.index),routesMeta:m})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of pI(a.path))s(a,o,!0,c)}),e}function pI(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=pI(i.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),r&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function dV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:TV(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var mV=/^:[\w-]+$/,pV=3,gV=2,yV=1,_V=10,vV=-2,rS=t=>t==="*";function EV(t,e){let n=t.split("/"),i=n.length;return n.some(rS)&&(i+=vV),e&&(i+=gV),n.filter(r=>!rS(r)).reduce((r,s)=>r+(mV.test(s)?pV:s===""?yV:_V),i)}function TV(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function SV(t,e,n=!1){let{routesMeta:i}=t,r={},s="/",a=[];for(let o=0;o<i.length;++o){let l=i[o],c=o===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=Sf({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),m=l.route;if(!f&&c&&n&&!i[i.length-1].route.index&&(f=Sf({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(r,f.params),a.push({params:r,pathname:wi([s,f.pathname]),pathnameBase:CV(wi([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=wi([s,f.pathnameBase]))}return a}function Sf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=wV(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((c,{paramName:h,isOptional:f},m)=>{if(h==="*"){let w=o[m]||"";a=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const g=o[m];return f&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function wV(t,e=!1,n=!0){mn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(i.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function bV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ni(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var gI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AV=t=>gI.test(t);function IV(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?zo(t):t,s;if(n)if(AV(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),mn(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${n}`)}n.startsWith("/")?s=sS(n.substring(1),"/"):s=sS(n,e)}else s=e;return{pathname:s,search:DV(i),hash:NV(r)}}function sS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Zm(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function RV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function t_(t){let e=RV(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function n_(t,e,n,i=!1){let r;typeof t=="string"?r=zo(t):(r={...t},Fe(!r.pathname||!r.pathname.includes("?"),Zm("?","pathname","search",r)),Fe(!r.pathname||!r.pathname.includes("#"),Zm("#","pathname","hash",r)),Fe(!r.search||!r.search.includes("#"),Zm("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=n;else{let f=e.length-1;if(!i&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;r.pathname=m.join("/")}o=f>=0?e[f]:"/"}let l=IV(r,o),c=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}var wi=t=>t.join("/").replace(/\/\/+/g,"/"),CV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),DV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,NV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,xV=class{constructor(t,e,n,i=!1){this.status=t,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function VV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function PV(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var yI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function _I(t,e){let n=t;if(typeof n!="string"||!gI.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,r=!1;if(yI)try{let s=new URL(window.location.href),a=n.startsWith("//")?new URL(s.protocol+n):new URL(n),o=Ni(a.pathname,e);a.origin===s.origin&&o!=null?n=o+a.search+a.hash:r=!0}catch{mn(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:r,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var vI=["POST","PUT","PATCH","DELETE"];new Set(vI);var OV=["GET",...vI];new Set(OV);var Bo=V.createContext(null);Bo.displayName="DataRouter";var md=V.createContext(null);md.displayName="DataRouterState";var MV=V.createContext(!1),EI=V.createContext({isTransitioning:!1});EI.displayName="ViewTransition";var kV=V.createContext(new Map);kV.displayName="Fetchers";var LV=V.createContext(null);LV.displayName="Await";var yn=V.createContext(null);yn.displayName="Navigation";var oc=V.createContext(null);oc.displayName="Location";var zn=V.createContext({outlet:null,matches:[],isDataRoute:!1});zn.displayName="Route";var i_=V.createContext(null);i_.displayName="RouteError";var TI="REACT_ROUTER_ERROR",UV="REDIRECT",zV="ROUTE_ERROR_RESPONSE";function BV(t){if(t.startsWith(`${TI}:${UV}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function jV(t){if(t.startsWith(`${TI}:${zV}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new xV(e.status,e.statusText,e.data)}catch{}}function FV(t,{relative:e}={}){Fe(jo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=V.useContext(yn),{hash:r,pathname:s,search:a}=lc(t,{relative:e}),o=s;return n!=="/"&&(o=s==="/"?n:wi([n,s])),i.createHref({pathname:o,search:a,hash:r})}function jo(){return V.useContext(oc)!=null}function ki(){return Fe(jo(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(oc).location}var SI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wI(t){V.useContext(yn).static||V.useLayoutEffect(t)}function Fo(){let{isDataRoute:t}=V.useContext(zn);return t?tP():qV()}function qV(){Fe(jo(),"useNavigate() may be used only in the context of a <Router> component.");let t=V.useContext(Bo),{basename:e,navigator:n}=V.useContext(yn),{matches:i}=V.useContext(zn),{pathname:r}=ki(),s=JSON.stringify(t_(i)),a=V.useRef(!1);return wI(()=>{a.current=!0}),V.useCallback((l,c={})=>{if(mn(a.current,SI),!a.current)return;if(typeof l=="number"){n.go(l);return}let h=n_(l,JSON.parse(s),r,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:wi([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,s,r,t])}V.createContext(null);function bI(){let{matches:t}=V.useContext(zn),e=t[t.length-1];return e?e.params:{}}function lc(t,{relative:e}={}){let{matches:n}=V.useContext(zn),{pathname:i}=ki(),r=JSON.stringify(t_(n));return V.useMemo(()=>n_(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function HV(t,e){return AI(t,e)}function AI(t,e,n,i,r){var y;Fe(jo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=V.useContext(yn),{matches:a}=V.useContext(zn),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",h=o?o.pathnameBase:"/",f=o&&o.route;{let E=f&&f.path||"";RI(c,!f||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let m=ki(),g;if(e){let E=typeof e=="string"?zo(e):e;Fe(h==="/"||((y=E.pathname)==null?void 0:y.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${E.pathname}" was given in the \`location\` prop.`),g=E}else g=m;let w=g.pathname||"/",I=w;if(h!=="/"){let E=h.replace(/^\//,"").split("/");I="/"+w.replace(/^\//,"").split("/").slice(E.length).join("/")}let N=dI(t,{pathname:I});mn(f||N!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),mn(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=YV(N&&N.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:wi([h,s.encodeLocation?s.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?h:wi([h,s.encodeLocation?s.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),a,n,i,r);return e&&v?V.createElement(oc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},v):v}function GV(){let t=eP(),e=VV(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=V.createElement(V.Fragment,null,V.createElement("p",null," Hey developer "),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:s},"ErrorBoundary")," or"," ",V.createElement("code",{style:s},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:r},n):null,a)}var KV=V.createElement(GV,null),II=class extends V.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=jV(t.digest);n&&(t=n)}let e=t!==void 0?V.createElement(zn.Provider,{value:this.props.routeContext},V.createElement(i_.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?V.createElement(QV,{error:t},e):e}};II.contextType=MV;var ep=new WeakMap;function QV({children:t,error:e}){let{basename:n}=V.useContext(yn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=BV(e.digest);if(i){let r=ep.get(e);if(r)throw r;let s=_I(i.location,n);if(yI&&!ep.get(e))if(s.isExternal||i.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:i.replace}));throw ep.set(e,a),a}return V.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return t}function $V({routeContext:t,match:e,children:n}){let i=V.useContext(Bo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(zn.Provider,{value:t},n)}function YV(t,e=[],n=null,i=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n==null?void 0:n.errors;if(a!=null){let h=s.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);Fe(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let o=!1,l=-1;if(n)for(let h=0;h<s.length;h++){let f=s[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=h),f.route.id){let{loaderData:m,errors:g}=n,w=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!g||g[f.route.id]===void 0);if(f.route.lazy||w){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let c=n&&i?(h,f)=>{var m,g;i(h,{location:n.location,params:((g=(m=n.matches)==null?void 0:m[0])==null?void 0:g.params)??{},unstable_pattern:PV(n.matches),errorInfo:f})}:void 0;return s.reduceRight((h,f,m)=>{let g,w=!1,I=null,N=null;n&&(g=a&&f.route.id?a[f.route.id]:void 0,I=f.route.errorElement||KV,o&&(l<0&&m===0?(RI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,N=null):l===m&&(w=!0,N=f.route.hydrateFallbackElement||null)));let v=e.concat(s.slice(0,m+1)),y=()=>{let E;return g?E=I:w?E=N:f.route.Component?E=V.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=h,V.createElement($V,{match:f,routeContext:{outlet:h,matches:v,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?V.createElement(II,{location:n.location,revalidation:n.revalidation,component:I,error:g,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0},onError:c}):y()},null)}function r_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WV(t){let e=V.useContext(Bo);return Fe(e,r_(t)),e}function XV(t){let e=V.useContext(md);return Fe(e,r_(t)),e}function JV(t){let e=V.useContext(zn);return Fe(e,r_(t)),e}function s_(t){let e=JV(t),n=e.matches[e.matches.length-1];return Fe(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function ZV(){return s_("useRouteId")}function eP(){var i;let t=V.useContext(i_),e=XV("useRouteError"),n=s_("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function tP(){let{router:t}=WV("useNavigate"),e=s_("useNavigate"),n=V.useRef(!1);return wI(()=>{n.current=!0}),V.useCallback(async(r,s={})=>{mn(n.current,SI),n.current&&(typeof r=="number"?await t.navigate(r):await t.navigate(r,{fromRouteId:e,...s}))},[t,e])}var aS={};function RI(t,e,n){!e&&!aS[t]&&(aS[t]=!0,mn(!1,n))}V.memo(nP);function nP({routes:t,future:e,state:n,onError:i}){return AI(t,void 0,n,i,e)}function CI({to:t,replace:e,state:n,relative:i}){Fe(jo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=V.useContext(yn);mn(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=V.useContext(zn),{pathname:a}=ki(),o=Fo(),l=n_(t,t_(s),a,i==="path"),c=JSON.stringify(l);return V.useEffect(()=>{o(JSON.parse(c),{replace:e,state:n,relative:i})},[o,c,i,e,n]),null}function Ta(t){Fe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iP({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:s=!1,unstable_useTransitions:a}){Fe(!jo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=V.useMemo(()=>({basename:o,navigator:r,static:s,unstable_useTransitions:a,future:{}}),[o,r,s,a]);typeof n=="string"&&(n=zo(n));let{pathname:c="/",search:h="",hash:f="",state:m=null,key:g="default"}=n,w=V.useMemo(()=>{let I=Ni(c,o);return I==null?null:{location:{pathname:I,search:h,hash:f,state:m,key:g},navigationType:i}},[o,c,h,f,m,g,i]);return mn(w!=null,`<Router basename="${o}"> is not able to match the URL "${c}${h}${f}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:V.createElement(yn.Provider,{value:l},V.createElement(oc.Provider,{children:e,value:w}))}function rP({children:t,location:e}){return HV(pg(t),e)}function pg(t,e=[]){let n=[];return V.Children.forEach(t,(i,r)=>{if(!V.isValidElement(i))return;let s=[...e,r];if(i.type===V.Fragment){n.push.apply(n,pg(i.props.children,s));return}Fe(i.type===Ta,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fe(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=pg(i.props.children,s)),n.push(a)}),n}var Nh="get",xh="application/x-www-form-urlencoded";function pd(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function sP(t){return pd(t)&&t.tagName.toLowerCase()==="button"}function aP(t){return pd(t)&&t.tagName.toLowerCase()==="form"}function oP(t){return pd(t)&&t.tagName.toLowerCase()==="input"}function lP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function uP(t,e){return t.button===0&&(!e||e==="_self")&&!lP(t)}function gg(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(r=>[n,r]):[[n,i]])},[]))}function cP(t,e){let n=gg(t);return e&&e.forEach((i,r)=>{n.has(r)||e.getAll(r).forEach(s=>{n.append(r,s)})}),n}var sh=null;function hP(){if(sh===null)try{new FormData(document.createElement("form"),0),sh=!1}catch{sh=!0}return sh}var fP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tp(t){return t!=null&&!fP.has(t)?(mn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xh}"`),null):t}function dP(t,e){let n,i,r,s,a;if(aP(t)){let o=t.getAttribute("action");i=o?Ni(o,e):null,n=t.getAttribute("method")||Nh,r=tp(t.getAttribute("enctype"))||xh,s=new FormData(t)}else if(sP(t)||oP(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(i=l?Ni(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Nh,r=tp(t.getAttribute("formenctype"))||tp(o.getAttribute("enctype"))||xh,s=new FormData(o,t),!hP()){let{name:c,type:h,value:f}=t;if(h==="image"){let m=c?`${c}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else c&&s.append(c,f)}}else{if(pd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Nh,i=null,r=xh,a=t}return s&&r==="text/plain"&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function a_(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mP(t,e,n,i){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${i}`:r.pathname=`${r.pathname}.${i}`:r.pathname==="/"?r.pathname=`_root.${i}`:e&&Ni(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${i}`,r}async function pP(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gP(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function yP(t,e,n){let i=await Promise.all(t.map(async r=>{let s=e.routes[r.route.id];if(s){let a=await pP(s,n);return a.links?a.links():[]}return[]}));return TP(i.flat(1).filter(gP).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function oS(t,e,n,i,r,s){let a=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,o=(l,c)=>{var h;return n[c].pathname!==l.pathname||((h=n[c].route.path)==null?void 0:h.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>a(l,c)||o(l,c)):s==="data"?e.filter((l,c)=>{var f;let h=i.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(a(l,c)||o(l,c))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function _P(t,e,{includeHydrateFallback:n}={}){return vP(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function vP(t){return[...new Set(t)]}function EP(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function TP(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let s=JSON.stringify(EP(r));return n.has(s)||(n.add(s),i.push({key:s,link:r})),i},[])}function DI(){let t=V.useContext(Bo);return a_(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function SP(){let t=V.useContext(md);return a_(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var o_=V.createContext(void 0);o_.displayName="FrameworkContext";function NI(){let t=V.useContext(o_);return a_(t,"You must render this element inside a <HydratedRouter> element"),t}function wP(t,e){let n=V.useContext(o_),[i,r]=V.useState(!1),[s,a]=V.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:f}=e,m=V.useRef(null);V.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let I=v=>{v.forEach(y=>{a(y.isIntersecting)})},N=new IntersectionObserver(I,{threshold:.5});return m.current&&N.observe(m.current),()=>{N.disconnect()}}},[t]),V.useEffect(()=>{if(i){let I=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(I)}}},[i]);let g=()=>{r(!0)},w=()=>{r(!1),a(!1)};return n?t!=="intent"?[s,m,{}]:[s,m,{onFocus:Il(o,g),onBlur:Il(l,w),onMouseEnter:Il(c,g),onMouseLeave:Il(h,w),onTouchStart:Il(f,g)}]:[!1,m,{}]}function Il(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function bP({page:t,...e}){let{router:n}=DI(),i=V.useMemo(()=>dI(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?V.createElement(IP,{page:t,matches:i,...e}):null}function AP(t){let{manifest:e,routeModules:n}=NI(),[i,r]=V.useState([]);return V.useEffect(()=>{let s=!1;return yP(t,e,n).then(a=>{s||r(a)}),()=>{s=!0}},[t,e,n]),i}function IP({page:t,matches:e,...n}){let i=ki(),{future:r,manifest:s,routeModules:a}=NI(),{basename:o}=DI(),{loaderData:l,matches:c}=SP(),h=V.useMemo(()=>oS(t,e,c,s,i,"data"),[t,e,c,s,i]),f=V.useMemo(()=>oS(t,e,c,s,i,"assets"),[t,e,c,s,i]),m=V.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let I=new Set,N=!1;if(e.forEach(y=>{var x;let E=s.routes[y.route.id];!E||!E.hasLoader||(!h.some(U=>U.route.id===y.route.id)&&y.route.id in l&&((x=a[y.route.id])!=null&&x.shouldRevalidate)||E.hasClientLoader?N=!0:I.add(y.route.id))}),I.size===0)return[];let v=mP(t,o,r.unstable_trailingSlashAwareDataRequests,"data");return N&&I.size>0&&v.searchParams.set("_routes",e.filter(y=>I.has(y.route.id)).map(y=>y.route.id).join(",")),[v.pathname+v.search]},[o,r.unstable_trailingSlashAwareDataRequests,l,i,s,h,e,t,a]),g=V.useMemo(()=>_P(f,s),[f,s]),w=AP(f);return V.createElement(V.Fragment,null,m.map(I=>V.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...n})),g.map(I=>V.createElement("link",{key:I,rel:"modulepreload",href:I,...n})),w.map(({key:I,link:N})=>V.createElement("link",{key:I,nonce:n.nonce,...N})))}function RP(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var CP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{CP&&(window.__reactRouterVersion="7.12.0")}catch{}function DP({basename:t,children:e,unstable_useTransitions:n,window:i}){let r=V.useRef();r.current==null&&(r.current=lV({window:i,v5Compat:!0}));let s=r.current,[a,o]=V.useState({action:s.action,location:s.location}),l=V.useCallback(c=>{n===!1?o(c):V.startTransition(()=>o(c))},[n]);return V.useLayoutEffect(()=>s.listen(l),[s,l]),V.createElement(iP,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:s,unstable_useTransitions:n})}var xI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VI=V.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:h,viewTransition:f,unstable_defaultShouldRevalidate:m,...g},w){let{basename:I,unstable_useTransitions:N}=V.useContext(yn),v=typeof c=="string"&&xI.test(c),y=_I(c,I);c=y.to;let E=FV(c,{relative:r}),[x,U,F]=wP(i,g),S=PP(c,{replace:a,state:o,target:l,preventScrollReset:h,relative:r,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:N});function T(C){e&&e(C),C.defaultPrevented||S(C)}let b=V.createElement("a",{...g,...F,href:y.absoluteURL||E,onClick:y.isExternal||s?e:T,ref:RP(w,U),target:l,"data-discover":!v&&n==="render"?"true":void 0});return x&&!v?V.createElement(V.Fragment,null,b,V.createElement(bP,{page:E})):b});VI.displayName="Link";var NP=V.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:s,to:a,viewTransition:o,children:l,...c},h){let f=lc(a,{relative:c.relative}),m=ki(),g=V.useContext(md),{navigator:w,basename:I}=V.useContext(yn),N=g!=null&&zP(f)&&o===!0,v=w.encodeLocation?w.encodeLocation(f).pathname:f.pathname,y=m.pathname,E=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(y=y.toLowerCase(),E=E?E.toLowerCase():null,v=v.toLowerCase()),E&&I&&(E=Ni(E,I)||E);const x=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let U=y===v||!r&&y.startsWith(v)&&y.charAt(x)==="/",F=E!=null&&(E===v||!r&&E.startsWith(v)&&E.charAt(v.length)==="/"),S={isActive:U,isPending:F,isTransitioning:N},T=U?e:void 0,b;typeof i=="function"?b=i(S):b=[i,U?"active":null,F?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let C=typeof s=="function"?s(S):s;return V.createElement(VI,{...c,"aria-current":T,className:b,ref:h,style:C,to:a,viewTransition:o},typeof l=="function"?l(S):l)});NP.displayName="NavLink";var xP=V.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:s,method:a=Nh,action:o,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:f,unstable_defaultShouldRevalidate:m,...g},w)=>{let{unstable_useTransitions:I}=V.useContext(yn),N=LP(),v=UP(o,{relative:c}),y=a.toLowerCase()==="get"?"get":"post",E=typeof o=="string"&&xI.test(o),x=U=>{if(l&&l(U),U.defaultPrevented)return;U.preventDefault();let F=U.nativeEvent.submitter,S=(F==null?void 0:F.getAttribute("formmethod"))||a,T=()=>N(F||U.currentTarget,{fetcherKey:e,method:S,navigate:n,replace:r,state:s,relative:c,preventScrollReset:h,viewTransition:f,unstable_defaultShouldRevalidate:m});I&&n!==!1?V.startTransition(()=>T()):T()};return V.createElement("form",{ref:w,method:y,action:v,onSubmit:i?l:x,...g,"data-discover":!E&&t==="render"?"true":void 0})});xP.displayName="Form";function VP(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PI(t){let e=V.useContext(Bo);return Fe(e,VP(t)),e}function PP(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:o,unstable_useTransitions:l}={}){let c=Fo(),h=ki(),f=lc(t,{relative:s});return V.useCallback(m=>{if(uP(m,e)){m.preventDefault();let g=n!==void 0?n:Nu(h)===Nu(f),w=()=>c(t,{replace:g,state:i,preventScrollReset:r,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:o});l?V.startTransition(()=>w()):w()}},[h,c,f,n,i,e,t,r,s,a,o,l])}function OP(t){mn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=V.useRef(gg(t)),n=V.useRef(!1),i=ki(),r=V.useMemo(()=>cP(i.search,n.current?null:e.current),[i.search]),s=Fo(),a=V.useCallback((o,l)=>{const c=gg(typeof o=="function"?o(new URLSearchParams(r)):o);n.current=!0,s("?"+c,l)},[s,r]);return[r,a]}var MP=0,kP=()=>`__${String(++MP)}__`;function LP(){let{router:t}=PI("useSubmit"),{basename:e}=V.useContext(yn),n=ZV(),i=t.fetch,r=t.navigate;return V.useCallback(async(s,a={})=>{let{action:o,method:l,encType:c,formData:h,body:f}=dP(s,e);if(a.navigate===!1){let m=a.fetcherKey||kP();await i(m,n,a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:f,formMethod:a.method||l,formEncType:a.encType||c,flushSync:a.flushSync})}else await r(a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:f,formMethod:a.method||l,formEncType:a.encType||c,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,r,e,n])}function UP(t,{relative:e}={}){let{basename:n}=V.useContext(yn),i=V.useContext(zn);Fe(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...lc(t||".",{relative:e})},a=ki();if(t==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(h=>h==="")){o.delete("index"),l.filter(f=>f).forEach(f=>o.append("index",f));let h=o.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:wi([n,s.pathname])),Nu(s)}function zP(t,{relative:e}={}){let n=V.useContext(EI);Fe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=PI("useViewTransitionState"),r=lc(t,{relative:e});if(!n.isTransitioning)return!1;let s=Ni(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Ni(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Sf(r.pathname,a)!=null||Sf(r.pathname,s)!=null}const BP="modulepreload",jP=function(t){return"/spintowin/"+t},lS={},FP=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=jP(l),l in lS)return;lS[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":BP,c||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),c)return new Promise((m,g)=>{f.addEventListener("load",m),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},qP=()=>{};var uS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},HP=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],o=t[n++],l=((r&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},MI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,o=a?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,h=s>>2,f=(s&3)<<4|o>>4;let m=(o&15)<<2|c>>6,g=c&63;l||(g=64,a||(m=64)),i.push(n[h],n[f],n[m],n[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(OI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):HP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],o=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const f=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||o==null||c==null||f==null)throw new GP;const m=s<<2|o>>4;if(i.push(m),c!==64){const g=o<<4&240|c>>2;if(i.push(g),f!==64){const w=c<<6&192|f;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KP=function(t){const e=OI(t);return MI.encodeByteArray(e,!0)},wf=function(t){return KP(t).replace(/\./g,"")},kI=function(t){try{return MI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=()=>LI().__FIREBASE_DEFAULTS__,$P=()=>{if(typeof process>"u"||typeof uS>"u")return;const t=uS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},YP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kI(t[1]);return e&&JSON.parse(e)},gd=()=>{try{return qP()||QP()||$P()||YP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},UI=t=>{var e,n;return(n=(e=gd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},WP=t=>{const e=UI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},zI=()=>{var t;return(t=gd())==null?void 0:t.config},BI=t=>{var e;return(e=gd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function l_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[wf(JSON.stringify(n)),wf(JSON.stringify(a)),""].join(".")}const ru={};function ZP(){const t={prod:[],emulator:[]};for(const e of Object.keys(ru))ru[e]?t.emulator.push(e):t.prod.push(e);return t}function eO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let cS=!1;function jI(t,e){if(typeof window>"u"||typeof document>"u"||!ta(window.location.host)||ru[t]===e||ru[t]||cS)return;ru[t]=e;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=ZP().prod.length>0;function a(){const m=document.getElementById(i);m&&m.remove()}function o(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{cS=!0,a()},m}function h(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=eO(i),g=n("text"),w=document.getElementById(g)||document.createElement("span"),I=n("learnmore"),N=document.getElementById(I)||document.createElement("a"),v=n("preprendIcon"),y=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const E=m.element;o(E),h(N,I);const x=c();l(y,v),E.append(y,w,N,x),document.body.appendChild(E)}s?(w.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())}function FI(){var e;const t=(e=gd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function rO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sO(){const t=ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qI(){return!FI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HI(){return!FI()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function GI(){try{return typeof indexedDB=="object"}catch{return!1}}function aO(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO="FirebaseError";class Li extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=oO,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uc.prototype.create)}}class uc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?lO(s,i):"Error",o=`${this.serviceName}: ${a} (${r}).`;return new Li(r,o,i)}}function lO(t,e){return t.replace(uO,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const uO=/\{\$([^}]+)}/g;function cO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ln(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(hS(s)&&hS(a)){if(!Ln(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function hS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ul(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function zl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function hO(t,e){const n=new fO(t,e);return n.subscribe.bind(n)}class fO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");dO(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=np),r.error===void 0&&(r.error=np),r.complete===void 0&&(r.complete=np);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function np(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t){return t&&t._delegate?t._delegate:t}class Us{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new XP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gO(e))try{this.getOrInitializeService({instanceIdentifier:ps})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ps){return this.instances.has(e)}getOptions(e=ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);i===o&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:pO(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ps){return this.component?this.component.multipleInstances?e:ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pO(t){return t===ps?void 0:t}function gO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ce||(ce={}));const _O={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},vO=ce.INFO,EO={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},TO=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=EO[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class u_{constructor(e){this.name=e,this._logLevel=vO,this._logHandler=TO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_O[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}}const SO=(t,e)=>e.some(n=>t instanceof n);let fS,dS;function wO(){return fS||(fS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bO(){return dS||(dS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const KI=new WeakMap,yg=new WeakMap,QI=new WeakMap,ip=new WeakMap,c_=new WeakMap;function AO(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Dr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&KI.set(n,t)}).catch(()=>{}),c_.set(e,t),e}function IO(t){if(yg.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});yg.set(t,e)}let _g={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||QI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RO(t){_g=t(_g)}function CO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(rp(this),e,...n);return QI.set(i,e.sort?e.sort():[e]),Dr(i)}:bO().includes(t)?function(...e){return t.apply(rp(this),e),Dr(KI.get(this))}:function(...e){return Dr(t.apply(rp(this),e))}}function DO(t){return typeof t=="function"?CO(t):(t instanceof IDBTransaction&&IO(t),SO(t,wO())?new Proxy(t,_g):t)}function Dr(t){if(t instanceof IDBRequest)return AO(t);if(ip.has(t))return ip.get(t);const e=DO(t);return e!==t&&(ip.set(t,e),c_.set(e,t)),e}const rp=t=>c_.get(t);function NO(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),o=Dr(a);return i&&a.addEventListener("upgradeneeded",l=>{i(Dr(a.result),l.oldVersion,l.newVersion,Dr(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const xO=["get","getKey","getAll","getAllKeys","count"],VO=["put","add","delete","clear"],sp=new Map;function mS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sp.get(e))return sp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=VO.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||xO.includes(n)))return;const s=async function(a,...o){const l=this.transaction(a,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),r&&l.done]))[0]};return sp.set(e,s),s}RO(t=>({...t,get:(e,n,i)=>mS(e,n)||t.get(e,n,i),has:(e,n)=>!!mS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OO(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function OO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vg="@firebase/app",pS="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new u_("@firebase/app"),MO="@firebase/app-compat",kO="@firebase/analytics-compat",LO="@firebase/analytics",UO="@firebase/app-check-compat",zO="@firebase/app-check",BO="@firebase/auth",jO="@firebase/auth-compat",FO="@firebase/database",qO="@firebase/data-connect",HO="@firebase/database-compat",GO="@firebase/functions",KO="@firebase/functions-compat",QO="@firebase/installations",$O="@firebase/installations-compat",YO="@firebase/messaging",WO="@firebase/messaging-compat",XO="@firebase/performance",JO="@firebase/performance-compat",ZO="@firebase/remote-config",eM="@firebase/remote-config-compat",tM="@firebase/storage",nM="@firebase/storage-compat",iM="@firebase/firestore",rM="@firebase/ai",sM="@firebase/firestore-compat",aM="firebase",oM="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf="[DEFAULT]",lM={[vg]:"fire-core",[MO]:"fire-core-compat",[LO]:"fire-analytics",[kO]:"fire-analytics-compat",[zO]:"fire-app-check",[UO]:"fire-app-check-compat",[BO]:"fire-auth",[jO]:"fire-auth-compat",[FO]:"fire-rtdb",[qO]:"fire-data-connect",[HO]:"fire-rtdb-compat",[GO]:"fire-fn",[KO]:"fire-fn-compat",[QO]:"fire-iid",[$O]:"fire-iid-compat",[YO]:"fire-fcm",[WO]:"fire-fcm-compat",[XO]:"fire-perf",[JO]:"fire-perf-compat",[ZO]:"fire-rc",[eM]:"fire-rc-compat",[tM]:"fire-gcs",[nM]:"fire-gcs-compat",[iM]:"fire-fst",[sM]:"fire-fst-compat",[rM]:"fire-vertex","fire-js":"fire-js",[aM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new Map,uM=new Map,Eg=new Map;function gS(t,e){try{t.container.addComponent(e)}catch(n){xi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function oo(t){const e=t.name;if(Eg.has(e))return xi.debug(`There were multiple attempts to register component ${e}.`),!1;Eg.set(e,t);for(const n of Af.values())gS(n,t);for(const n of uM.values())gS(n,t);return!0}function hc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cM(t,e,n=bf){hc(t,e).clearInstance(n)}function sn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nr=new uc("app","Firebase",hM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=oM;function $I(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:bf,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Nr.create("bad-app-name",{appName:String(r)});if(n||(n=zI()),!n)throw Nr.create("no-options");const s=Af.get(r);if(s){if(Ln(n,s.options)&&Ln(i,s.config))return s;throw Nr.create("duplicate-app",{appName:r})}const a=new yO(r);for(const l of Eg.values())a.addComponent(l);const o=new fM(n,i,a);return Af.set(r,o),o}function YI(t=bf){const e=Af.get(t);if(!e&&t===bf&&zI())return $I();if(!e)throw Nr.create("no-app",{appName:t});return e}function xr(t,e,n){let i=lM[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=e.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xi.warn(a.join(" "));return}oo(new Us(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM="firebase-heartbeat-database",mM=1,xu="firebase-heartbeat-store";let ap=null;function WI(){return ap||(ap=NO(dM,mM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Nr.create("idb-open",{originalErrorMessage:t.message})})),ap}async function pM(t){try{const n=(await WI()).transaction(xu),i=await n.objectStore(xu).get(XI(t));return await n.done,i}catch(e){if(e instanceof Li)xi.warn(e.message);else{const n=Nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xi.warn(n.message)}}}async function yS(t,e){try{const i=(await WI()).transaction(xu,"readwrite");await i.objectStore(xu).put(e,XI(t)),await i.done}catch(n){if(n instanceof Li)xi.warn(n.message);else{const i=Nr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xi.warn(i.message)}}}function XI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=1024,yM=30;class _M{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new EM(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_S();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>yM){const a=TM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){xi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_S(),{heartbeatsToSend:i,unsentEntries:r}=vM(this._heartbeatsCache.heartbeats),s=wf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return xi.warn(n),""}}}function _S(){return new Date().toISOString().substring(0,10)}function vM(t,e=gM){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),vS(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),vS(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class EM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GI()?aO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return yS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return yS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function vS(t){return wf(JSON.stringify({version:2,heartbeats:t})).length}function TM(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(t){oo(new Us("platform-logger",e=>new PO(e),"PRIVATE")),oo(new Us("heartbeat",e=>new _M(e),"PRIVATE")),xr(vg,pS,t),xr(vg,pS,"esm2020"),xr("fire-js","")}SM("");function JI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wM=JI,ZI=new uc("auth","Firebase",JI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If=new u_("@firebase/auth");function bM(t,...e){If.logLevel<=ce.WARN&&If.warn(`Auth (${qo}): ${t}`,...e)}function Vh(t,...e){If.logLevel<=ce.ERROR&&If.error(`Auth (${qo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,...e){throw f_(t,...e)}function On(t,...e){return f_(t,...e)}function h_(t,e,n){const i={...wM(),[e]:n};return new uc("auth","Firebase",i).create(e,{appName:t.name})}function bi(t){return h_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function AM(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Dn(t,"argument-error"),h_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function f_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return ZI.create(t,...e)}function X(t,e,...n){if(!t)throw f_(e,...n)}function mi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vh(e),new Error(e)}function Vi(t,e){t||mi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function IM(){return ES()==="http:"||ES()==="https:"}function ES(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IM()||iO()||"connection"in navigator)?navigator.onLine:!0}function CM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vi(n>e,"Short delay should be less than long delay!"),this.isMobile=tO()||rO()}get(){return RM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(t,e){Vi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xM=new fc(3e4,6e4);function $r(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ui(t,e,n,i,r={}){return tR(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const o=cc({key:t.config.apiKey,...a}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return nO()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&ta(t.emulatorConfig.host)&&(c.credentials="include"),eR.fetch()(await nR(t,t.config.apiHost,n,o),c)})}async function tR(t,e,n){t._canInitEmulator=!1;const i={...DM,...e};try{const r=new PM(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw ah(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ah(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw ah(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw ah(t,"user-disabled",a);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw h_(t,h,c);Dn(t,h)}}catch(r){if(r instanceof Li)throw r;Dn(t,"network-request-failed",{message:String(r)})}}async function dc(t,e,n,i,r={}){const s=await Ui(t,e,n,i,r);return"mfaPendingCredential"in s&&Dn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function nR(t,e,n,i){const r=`${e}${n}?${i}`,s=t,a=s.config.emulator?d_(t.config,r):`${t.config.apiScheme}://${r}`;return NM.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function VM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(On(this.auth,"network-request-failed")),xM.get())})}}function ah(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=On(t,e,i);return r.customData._tokenResponse=n,r}function TS(t){return t!==void 0&&t.enterprise!==void 0}class OM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return VM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function MM(t,e){return Ui(t,"GET","/v2/recaptchaConfig",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kM(t,e){return Ui(t,"POST","/v1/accounts:delete",e)}async function Rf(t,e){return Ui(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LM(t,e=!1){const n=we(t),i=await n.getIdToken(e),r=m_(i);X(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:su(op(r.auth_time)),issuedAtTime:su(op(r.iat)),expirationTime:su(op(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function op(t){return Number(t)*1e3}function m_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Vh("JWT malformed, contained fewer than 3 sections"),null;try{const r=kI(n);return r?JSON.parse(r):(Vh("Failed to decode base64 JWT payload"),null)}catch(r){return Vh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function SS(t){const e=m_(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lo(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Li&&UM(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function UM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=su(this.lastLoginAt),this.creationTime=su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cf(t){var f;const e=t.auth,n=await t.getIdToken(),i=await lo(t,Rf(e,{idToken:n}));X(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const s=(f=r.providerUserInfo)!=null&&f.length?iR(r.providerUserInfo):[],a=jM(t.providerData,s),o=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),c=o?l:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Sg(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function BM(t){const e=we(t);await Cf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jM(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function iR(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FM(t,e){const n=await tR(t,{},async()=>{const i=cc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=await nR(t,r,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:i};return t.emulatorConfig&&ta(t.emulatorConfig.host)&&(l.credentials="include"),eR.fetch()(a,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qM(t,e){return Ui(t,"POST","/v2/accounts:revokeToken",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):SS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=SS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await FM(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new Ga;return i&&(X(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(X(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(X(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ga,this.toJSON())}_performRefresh(){return mi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Pn{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new zM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Sg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await lo(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LM(this,e)}reload(){return BM(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Pn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Cf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sn(this.auth.app))return Promise.reject(bi(this.auth));const e=await this.getIdToken();return await lo(this,kM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:g,providerData:w,stsTokenManager:I}=n;X(f&&I,e,"internal-error");const N=Ga.fromJSON(this.name,I);X(typeof f=="string",e,"internal-error"),Xi(i,e.name),Xi(r,e.name),X(typeof m=="boolean",e,"internal-error"),X(typeof g=="boolean",e,"internal-error"),Xi(s,e.name),Xi(a,e.name),Xi(o,e.name),Xi(l,e.name),Xi(c,e.name),Xi(h,e.name);const v=new Pn({uid:f,auth:e,email:r,emailVerified:m,displayName:i,isAnonymous:g,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:N,createdAt:c,lastLoginAt:h});return w&&Array.isArray(w)&&(v.providerData=w.map(y=>({...y}))),l&&(v._redirectEventId=l),v}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ga;r.updateFromServerResponse(n);const s=new Pn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Cf(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];X(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?iR(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),o=new Ga;o.updateFromIdToken(i);const l=new Pn({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Sg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=new Map;function pi(t){Vi(t instanceof Function,"Expected a class definition");let e=wS.get(t);return e?(Vi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,wS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}rR.type="NONE";const bS=rR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(t,e,n){return`firebase:${t}:${e}:${n}`}class Ka{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Ph(this.userKey,r.apiKey,s),this.fullPersistenceKey=Ph("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Rf(this.auth,{idToken:e}).catch(()=>{});return n?Pn._fromGetAccountInfoResponse(this.auth,n,e):null}return Pn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ka(pi(bS),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||pi(bS);const a=Ph(i,e.config.apiKey,e.name);let o=null;for(const c of n)try{const h=await c._get(a);if(h){let f;if(typeof h=="string"){const m=await Rf(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Pn._fromGetAccountInfoResponse(e,m,h)}else f=Pn._fromJSON(e,h);c!==s&&(o=f),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ka(s,e,i):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new Ka(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cR(e))return"Blackberry";if(hR(e))return"Webos";if(aR(e))return"Safari";if((e.includes("chrome/")||oR(e))&&!e.includes("edge/"))return"Chrome";if(uR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function sR(t=ht()){return/firefox\//i.test(t)}function aR(t=ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oR(t=ht()){return/crios\//i.test(t)}function lR(t=ht()){return/iemobile/i.test(t)}function uR(t=ht()){return/android/i.test(t)}function cR(t=ht()){return/blackberry/i.test(t)}function hR(t=ht()){return/webos/i.test(t)}function p_(t=ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HM(t=ht()){var e;return p_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function GM(){return sO()&&document.documentMode===10}function fR(t=ht()){return p_(t)||uR(t)||hR(t)||cR(t)||/windows phone/i.test(t)||lR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t,e=[]){let n;switch(t){case"Browser":n=AS(ht());break;case"Worker":n=`${AS(ht())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QM(t,e={}){return Ui(t,"GET","/v2/passwordPolicy",$r(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=6;class YM{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??$M,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new IS(this),this.idTokenSubscription=new IS(this),this.beforeStateQueue=new KM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pi(n)),this._initializationPromise=this.queue(async()=>{var i,r,s;if(!this._deleted&&(this.persistenceManager=await Ka.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Rf(this,{idToken:e}),i=await Pn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(sn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sn(this.app))return Promise.reject(bi(this));const n=e?we(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sn(this.app)?Promise.reject(bi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sn(this.app)?Promise.reject(bi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QM(this),n=new YM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await qM(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&pi(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await Ka.create(this,[pi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&bM(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Yr(t){return we(t)}class IS{constructor(e){this.auth=e,this.observer=null,this.addObserver=hO(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XM(t){yd=t}function mR(t){return yd.loadJS(t)}function JM(){return yd.recaptchaEnterpriseScript}function ZM(){return yd.gapiScript}function ek(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class tk{constructor(){this.enterprise=new nk}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class nk{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const ik="recaptcha-enterprise",pR="NO_RECAPTCHA";class rk{constructor(e){this.type=ik,this.auth=Yr(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{MM(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new OM(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function r(s,a,o){const l=window.grecaptcha;TS(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{a(c)}).catch(()=>{a(pR)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tk().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{i(this.auth).then(o=>{if(!n&&TS(window.grecaptcha))r(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=JM();l.length!==0&&(l+=o),mR(l).then(()=>{r(o,s,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function RS(t,e,n,i=!1,r=!1){const s=new rk(t);let a;if(r)a=pR;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,c=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return i?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function wg(t,e,n,i,r){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await RS(t,e,n,n==="getOobCode");return i(t,a)}else return i(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await RS(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t,e){const n=hc(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Ln(s,e??{}))return r;Dn(r,"already-initialized")}return n.initialize({options:e})}function ak(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(pi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function ok(t,e,n){const i=Yr(t);X(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=gR(e),{host:a,port:o}=lk(e),l=o===null?"":`:${o}`,c={url:`${s}//${a}${l}/`},h=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){X(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),X(Ln(c,i.config.emulator)&&Ln(h,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,ta(a)?(l_(`${s}//${a}${l}`),jI("Auth",!0)):uk()}function gR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lk(t){const e=gR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:CS(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:CS(a)}}}function CS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return mi("not implemented")}_getIdTokenResponse(e){return mi("not implemented")}_linkToIdToken(e,n){return mi("not implemented")}_getReauthenticationResolver(e){return mi("not implemented")}}async function ck(t,e){return Ui(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hk(t,e){return dc(t,"POST","/v1/accounts:signInWithPassword",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(t,e){return dc(t,"POST","/v1/accounts:signInWithEmailLink",$r(t,e))}async function dk(t,e){return dc(t,"POST","/v1/accounts:signInWithEmailLink",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends g_{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Vu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Vu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wg(e,n,"signInWithPassword",hk);case"emailLink":return fk(e,{email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wg(e,i,"signUpPassword",ck);case"emailLink":return dk(e,{idToken:n,email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qa(t,e){return dc(t,"POST","/v1/accounts:signInWithIdp",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk="http://localhost";class zs extends g_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const a=new zs(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Qa(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Qa(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Qa(e,n)}buildRequest(){const e={requestUri:mk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=cc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gk(t){const e=Ul(zl(t)).link,n=e?Ul(zl(e)).deep_link_id:null,i=Ul(zl(t)).deep_link_id;return(i?Ul(zl(i)).link:null)||i||n||e||t}class y_{constructor(e){const n=Ul(zl(e)),i=n.apiKey??null,r=n.oobCode??null,s=pk(n.mode??null);X(i&&r&&s,"argument-error"),this.apiKey=i,this.operation=s,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=gk(e);try{return new y_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.providerId=Ho.PROVIDER_ID}static credential(e,n){return Vu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=y_.parseLink(n);return X(i,"argument-error"),Vu._fromEmailAndCode(e,i.code,i.tenantId)}}Ho.PROVIDER_ID="password";Ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends __{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends mc{constructor(){super("facebook.com")}static credential(e){return zs._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.FACEBOOK_SIGN_IN_METHOD="facebook.com";or.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends mc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zs._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ci.credential(n,i)}catch{return null}}}ci.GOOGLE_SIGN_IN_METHOD="google.com";ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends mc{constructor(){super("github.com")}static credential(e){return zs._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.GITHUB_SIGN_IN_METHOD="github.com";lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends mc{constructor(){super("twitter.com")}static credential(e,n){return zs._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ur.credential(n,i)}catch{return null}}}ur.TWITTER_SIGN_IN_METHOD="twitter.com";ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yk(t,e){return dc(t,"POST","/v1/accounts:signUp",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Pn._fromIdTokenResponse(e,i,r),a=DS(i);return new Bs({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=DS(i);return new Bs({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function DS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends Li{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Df.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Df(e,n,i,r)}}function yR(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Df._fromErrorAndOperation(t,s,e,i):s})}async function _k(t,e,n=!1){const i=await lo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bs._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(t,e,n=!1){const{auth:i}=t;if(sn(i.app))return Promise.reject(bi(i));const r="reauthenticate";try{const s=await lo(t,yR(i,r,e,t),n);X(s.idToken,i,"internal-error");const a=m_(s.idToken);X(a,i,"internal-error");const{sub:o}=a;return X(t.uid===o,i,"user-mismatch"),Bs._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Dn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(t,e,n=!1){if(sn(t.app))return Promise.reject(bi(t));const i="signIn",r=await yR(t,i,e),s=await Bs._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function Ek(t,e){return _R(Yr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(t){const e=Yr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Tk(t,e,n){if(sn(t.app))return Promise.reject(bi(t));const i=Yr(t),a=await wg(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yk).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&vR(t),l}),o=await Bs._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(o.user),o}function Sk(t,e,n){return sn(t.app)?Promise.reject(bi(t)):Ek(we(t),Ho.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&vR(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wk(t,e){return Ui(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bk(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=we(t),s={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await lo(i,wk(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find(({providerId:l})=>l==="password");o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function Ak(t,e,n,i){return we(t).onIdTokenChanged(e,n,i)}function Ik(t,e,n){return we(t).beforeAuthStateChanged(e,n)}function Rk(t,e,n,i){return we(t).onAuthStateChanged(e,n,i)}function Ck(t){return we(t).signOut()}const Nf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nf,"1"),this.storage.removeItem(Nf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=1e3,Nk=10;class TR extends ER{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);GM()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Nk):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},Dk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}TR.type="LOCAL";const xk=TR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR extends ER{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}SR.type="SESSION";const wR=SR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new _d(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const o=Array.from(a).map(async c=>c(n.origin,s)),l=await Vk(o);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_d.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const c=v_("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(m.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(){return window}function Ok(t){Xn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(){return typeof Xn().WorkerGlobalScope<"u"&&typeof Xn().importScripts=="function"}async function Mk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Lk(){return bR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="firebaseLocalStorageDb",Uk=1,xf="firebaseLocalStorage",IR="fbase_key";class pc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vd(t,e){return t.transaction([xf],e?"readwrite":"readonly").objectStore(xf)}function zk(){const t=indexedDB.deleteDatabase(AR);return new pc(t).toPromise()}function bg(){const t=indexedDB.open(AR,Uk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(xf,{keyPath:IR})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(xf)?e(i):(i.close(),await zk(),e(await bg()))})})}async function NS(t,e,n){const i=vd(t,!0).put({[IR]:e,value:n});return new pc(i).toPromise()}async function Bk(t,e){const n=vd(t,!1).get(e),i=await new pc(n).toPromise();return i===void 0?null:i.value}function xS(t,e){const n=vd(t,!0).delete(e);return new pc(n).toPromise()}const jk=800,Fk=3;class RR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>Fk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_d._getInstance(Lk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await Mk(),!this.activeServiceWorker)return;this.sender=new Pk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bg();return await NS(e,Nf,"1"),await xS(e,Nf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>NS(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>Bk(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=vd(r,!1).getAll();return new pc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RR.type="LOCAL";const qk=RR;new fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(t,e){return e?pi(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_ extends g_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Qa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Qa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Hk(t){return _R(t.auth,new E_(t),t.bypassAuthState)}function Gk(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),vk(n,new E_(t),t.bypassAuthState)}async function Kk(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),_k(n,new E_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Hk;case"linkViaPopup":case"linkViaRedirect":return Kk;case"reauthViaPopup":case"reauthViaRedirect":return Gk;default:Dn(this.auth,"internal-error")}}resolve(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=new fc(2e3,1e4);async function $k(t,e,n){if(sn(t.app))return Promise.reject(On(t,"operation-not-supported-in-this-environment"));const i=Yr(t);AM(t,e,__);const r=CR(i,n);return new Ss(i,"signInViaPopup",e,r).executeNotNull()}class Ss extends DR{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Ss.currentPopupAction&&Ss.currentPopupAction.cancel(),Ss.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){Vi(this.filter.length===1,"Popup operations only handle one event");const e=v_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(On(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(On(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ss.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(On(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Qk.get())};e()}}Ss.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk="pendingRedirect",Oh=new Map;class Wk extends DR{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Oh.get(this.auth._key());if(!e){try{const i=await Xk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Oh.set(this.auth._key(),e)}return this.bypassAuthState||Oh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Xk(t,e){const n=e4(e),i=Zk(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function Jk(t,e){Oh.set(t._key(),e)}function Zk(t){return pi(t._redirectPersistence)}function e4(t){return Ph(Yk,t.config.apiKey,t.name)}async function t4(t,e,n=!1){if(sn(t.app))return Promise.reject(bi(t));const i=Yr(t),r=CR(i,e),a=await new Wk(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=10*60*1e3;class i4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!r4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!NR(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(On(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=n4&&this.cachedEventUids.clear(),this.cachedEventUids.has(VS(e))}saveEventToCache(e){this.cachedEventUids.add(VS(e)),this.lastProcessedEventTime=Date.now()}}function VS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function NR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function r4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s4(t,e={}){return Ui(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o4=/^https?/;async function l4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await s4(t);for(const n of e)try{if(u4(n))return}catch{}Dn(t,"unauthorized-domain")}function u4(t){const e=Tg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!o4.test(n))return!1;if(a4.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=new fc(3e4,6e4);function PS(){const t=Xn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function h4(t){return new Promise((e,n)=>{var r,s,a;function i(){PS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PS(),n(On(t,"network-request-failed"))},timeout:c4.get()})}if((s=(r=Xn().gapi)==null?void 0:r.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=Xn().gapi)!=null&&a.load)i();else{const o=ek("iframefcb");return Xn()[o]=()=>{gapi.load?i():n(On(t,"network-request-failed"))},mR(`${ZM()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw Mh=null,e})}let Mh=null;function f4(t){return Mh=Mh||h4(t),Mh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=new fc(5e3,15e3),m4="__/auth/iframe",p4="emulator/auth/iframe",g4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},y4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _4(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?d_(e,p4):`https://${t.config.authDomain}/${m4}`,i={apiKey:e.apiKey,appName:t.name,v:qo},r=y4.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${cc(i).slice(1)}`}async function v4(t){const e=await f4(t),n=Xn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:_4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:g4,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=On(t,"network-request-failed"),o=Xn().setTimeout(()=>{s(a)},d4.get());function l(){Xn().clearTimeout(o),r(i)}i.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},T4=500,S4=600,w4="_blank",b4="http://localhost";class OS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function A4(t,e,n,i=T4,r=S4){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const l={...E4,width:i.toString(),height:r.toString(),top:s,left:a},c=ht().toLowerCase();n&&(o=oR(c)?w4:n),sR(c)&&(e=e||b4,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[g,w])=>`${m}${g}=${w},`,"");if(HM(c)&&o!=="_self")return I4(e||"",o),new OS(null);const f=window.open(e||"",o,h);X(f,t,"popup-blocked");try{f.focus()}catch{}return new OS(f)}function I4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4="__/auth/handler",C4="emulator/auth/handler",D4=encodeURIComponent("fac");async function MS(t,e,n,i,r,s){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:qo,eventId:r};if(e instanceof __){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",cO(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof mc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const l=await t._getAppCheckToken(),c=l?`#${D4}=${encodeURIComponent(l)}`:"";return`${N4(t)}?${cc(o).slice(1)}${c}`}function N4({config:t}){return t.emulator?d_(t,C4):`https://${t.authDomain}/${R4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="webStorageSupport";class x4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wR,this._completeRedirectFn=t4,this._overrideRedirectResult=Jk}async _openPopup(e,n,i,r){var a;Vi((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await MS(e,n,i,Tg(),r);return A4(e,s,v_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await MS(e,n,i,Tg(),r);return Ok(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Vi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await v4(e),i=new i4(e);return n.register("authEvent",r=>(X(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(lp,{type:lp},r=>{var a;const s=(a=r==null?void 0:r[0])==null?void 0:a[lp];s!==void 0&&n(!!s),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=l4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fR()||aR()||p_()}}const V4=x4;var kS="@firebase/auth",LS="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function M4(t){oo(new Us("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=i.options;X(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dR(t)},c=new WM(i,r,s,l);return ak(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),oo(new Us("auth-internal",e=>{const n=Yr(e.getProvider("auth").getImmediate());return(i=>new P4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xr(kS,LS,O4(t)),xr(kS,LS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=5*60,L4=BI("authIdTokenMaxAge")||k4;let US=null;const U4=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>L4)return;const r=n==null?void 0:n.token;US!==r&&(US=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function z4(t=YI()){const e=hc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=sk(t,{popupRedirectResolver:V4,persistence:[qk,xk,wR]}),i=BI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=U4(s.toString());Ik(n,a,()=>a(n.currentUser)),Ak(n,o=>a(o))}}const r=UI("auth");return r&&ok(n,`http://${r}`),n}function B4(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}XM({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=On("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",B4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});M4("Browser");var zS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vr,xR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function b(){}b.prototype=T.prototype,S.F=T.prototype,S.prototype=new b,S.prototype.constructor=S,S.D=function(C,D,P){for(var R=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)R[Ze-2]=arguments[Ze];return T.prototype[D].apply(C,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,T,b){b||(b=0);const C=Array(16);if(typeof T=="string")for(var D=0;D<16;++D)C[D]=T.charCodeAt(b++)|T.charCodeAt(b++)<<8|T.charCodeAt(b++)<<16|T.charCodeAt(b++)<<24;else for(D=0;D<16;++D)C[D]=T[b++]|T[b++]<<8|T[b++]<<16|T[b++]<<24;T=S.g[0],b=S.g[1],D=S.g[2];let P=S.g[3],R;R=T+(P^b&(D^P))+C[0]+3614090360&4294967295,T=b+(R<<7&4294967295|R>>>25),R=P+(D^T&(b^D))+C[1]+3905402710&4294967295,P=T+(R<<12&4294967295|R>>>20),R=D+(b^P&(T^b))+C[2]+606105819&4294967295,D=P+(R<<17&4294967295|R>>>15),R=b+(T^D&(P^T))+C[3]+3250441966&4294967295,b=D+(R<<22&4294967295|R>>>10),R=T+(P^b&(D^P))+C[4]+4118548399&4294967295,T=b+(R<<7&4294967295|R>>>25),R=P+(D^T&(b^D))+C[5]+1200080426&4294967295,P=T+(R<<12&4294967295|R>>>20),R=D+(b^P&(T^b))+C[6]+2821735955&4294967295,D=P+(R<<17&4294967295|R>>>15),R=b+(T^D&(P^T))+C[7]+4249261313&4294967295,b=D+(R<<22&4294967295|R>>>10),R=T+(P^b&(D^P))+C[8]+1770035416&4294967295,T=b+(R<<7&4294967295|R>>>25),R=P+(D^T&(b^D))+C[9]+2336552879&4294967295,P=T+(R<<12&4294967295|R>>>20),R=D+(b^P&(T^b))+C[10]+4294925233&4294967295,D=P+(R<<17&4294967295|R>>>15),R=b+(T^D&(P^T))+C[11]+2304563134&4294967295,b=D+(R<<22&4294967295|R>>>10),R=T+(P^b&(D^P))+C[12]+1804603682&4294967295,T=b+(R<<7&4294967295|R>>>25),R=P+(D^T&(b^D))+C[13]+4254626195&4294967295,P=T+(R<<12&4294967295|R>>>20),R=D+(b^P&(T^b))+C[14]+2792965006&4294967295,D=P+(R<<17&4294967295|R>>>15),R=b+(T^D&(P^T))+C[15]+1236535329&4294967295,b=D+(R<<22&4294967295|R>>>10),R=T+(D^P&(b^D))+C[1]+4129170786&4294967295,T=b+(R<<5&4294967295|R>>>27),R=P+(b^D&(T^b))+C[6]+3225465664&4294967295,P=T+(R<<9&4294967295|R>>>23),R=D+(T^b&(P^T))+C[11]+643717713&4294967295,D=P+(R<<14&4294967295|R>>>18),R=b+(P^T&(D^P))+C[0]+3921069994&4294967295,b=D+(R<<20&4294967295|R>>>12),R=T+(D^P&(b^D))+C[5]+3593408605&4294967295,T=b+(R<<5&4294967295|R>>>27),R=P+(b^D&(T^b))+C[10]+38016083&4294967295,P=T+(R<<9&4294967295|R>>>23),R=D+(T^b&(P^T))+C[15]+3634488961&4294967295,D=P+(R<<14&4294967295|R>>>18),R=b+(P^T&(D^P))+C[4]+3889429448&4294967295,b=D+(R<<20&4294967295|R>>>12),R=T+(D^P&(b^D))+C[9]+568446438&4294967295,T=b+(R<<5&4294967295|R>>>27),R=P+(b^D&(T^b))+C[14]+3275163606&4294967295,P=T+(R<<9&4294967295|R>>>23),R=D+(T^b&(P^T))+C[3]+4107603335&4294967295,D=P+(R<<14&4294967295|R>>>18),R=b+(P^T&(D^P))+C[8]+1163531501&4294967295,b=D+(R<<20&4294967295|R>>>12),R=T+(D^P&(b^D))+C[13]+2850285829&4294967295,T=b+(R<<5&4294967295|R>>>27),R=P+(b^D&(T^b))+C[2]+4243563512&4294967295,P=T+(R<<9&4294967295|R>>>23),R=D+(T^b&(P^T))+C[7]+1735328473&4294967295,D=P+(R<<14&4294967295|R>>>18),R=b+(P^T&(D^P))+C[12]+2368359562&4294967295,b=D+(R<<20&4294967295|R>>>12),R=T+(b^D^P)+C[5]+4294588738&4294967295,T=b+(R<<4&4294967295|R>>>28),R=P+(T^b^D)+C[8]+2272392833&4294967295,P=T+(R<<11&4294967295|R>>>21),R=D+(P^T^b)+C[11]+1839030562&4294967295,D=P+(R<<16&4294967295|R>>>16),R=b+(D^P^T)+C[14]+4259657740&4294967295,b=D+(R<<23&4294967295|R>>>9),R=T+(b^D^P)+C[1]+2763975236&4294967295,T=b+(R<<4&4294967295|R>>>28),R=P+(T^b^D)+C[4]+1272893353&4294967295,P=T+(R<<11&4294967295|R>>>21),R=D+(P^T^b)+C[7]+4139469664&4294967295,D=P+(R<<16&4294967295|R>>>16),R=b+(D^P^T)+C[10]+3200236656&4294967295,b=D+(R<<23&4294967295|R>>>9),R=T+(b^D^P)+C[13]+681279174&4294967295,T=b+(R<<4&4294967295|R>>>28),R=P+(T^b^D)+C[0]+3936430074&4294967295,P=T+(R<<11&4294967295|R>>>21),R=D+(P^T^b)+C[3]+3572445317&4294967295,D=P+(R<<16&4294967295|R>>>16),R=b+(D^P^T)+C[6]+76029189&4294967295,b=D+(R<<23&4294967295|R>>>9),R=T+(b^D^P)+C[9]+3654602809&4294967295,T=b+(R<<4&4294967295|R>>>28),R=P+(T^b^D)+C[12]+3873151461&4294967295,P=T+(R<<11&4294967295|R>>>21),R=D+(P^T^b)+C[15]+530742520&4294967295,D=P+(R<<16&4294967295|R>>>16),R=b+(D^P^T)+C[2]+3299628645&4294967295,b=D+(R<<23&4294967295|R>>>9),R=T+(D^(b|~P))+C[0]+4096336452&4294967295,T=b+(R<<6&4294967295|R>>>26),R=P+(b^(T|~D))+C[7]+1126891415&4294967295,P=T+(R<<10&4294967295|R>>>22),R=D+(T^(P|~b))+C[14]+2878612391&4294967295,D=P+(R<<15&4294967295|R>>>17),R=b+(P^(D|~T))+C[5]+4237533241&4294967295,b=D+(R<<21&4294967295|R>>>11),R=T+(D^(b|~P))+C[12]+1700485571&4294967295,T=b+(R<<6&4294967295|R>>>26),R=P+(b^(T|~D))+C[3]+2399980690&4294967295,P=T+(R<<10&4294967295|R>>>22),R=D+(T^(P|~b))+C[10]+4293915773&4294967295,D=P+(R<<15&4294967295|R>>>17),R=b+(P^(D|~T))+C[1]+2240044497&4294967295,b=D+(R<<21&4294967295|R>>>11),R=T+(D^(b|~P))+C[8]+1873313359&4294967295,T=b+(R<<6&4294967295|R>>>26),R=P+(b^(T|~D))+C[15]+4264355552&4294967295,P=T+(R<<10&4294967295|R>>>22),R=D+(T^(P|~b))+C[6]+2734768916&4294967295,D=P+(R<<15&4294967295|R>>>17),R=b+(P^(D|~T))+C[13]+1309151649&4294967295,b=D+(R<<21&4294967295|R>>>11),R=T+(D^(b|~P))+C[4]+4149444226&4294967295,T=b+(R<<6&4294967295|R>>>26),R=P+(b^(T|~D))+C[11]+3174756917&4294967295,P=T+(R<<10&4294967295|R>>>22),R=D+(T^(P|~b))+C[2]+718787259&4294967295,D=P+(R<<15&4294967295|R>>>17),R=b+(P^(D|~T))+C[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+P&4294967295}i.prototype.v=function(S,T){T===void 0&&(T=S.length);const b=T-this.blockSize,C=this.C;let D=this.h,P=0;for(;P<T;){if(D==0)for(;P<=b;)r(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<T;)if(C[D++]=S.charCodeAt(P++),D==this.blockSize){r(this,C),D=0;break}}else for(;P<T;)if(C[D++]=S[P++],D==this.blockSize){r(this,C),D=0;break}}this.h=D,this.o+=T},i.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;T=this.o*8;for(var b=S.length-8;b<S.length;++b)S[b]=T&255,T/=256;for(this.v(S),S=Array(16),T=0,b=0;b<4;++b)for(let C=0;C<32;C+=8)S[T++]=this.g[b]>>>C&255;return S};function s(S,T){var b=o;return Object.prototype.hasOwnProperty.call(b,S)?b[S]:b[S]=T(S)}function a(S,T){this.h=T;const b=[];let C=!0;for(let D=S.length-1;D>=0;D--){const P=S[D]|0;C&&P==T||(b[D]=P,C=!1)}this.g=b}var o={};function l(S){return-128<=S&&S<128?s(S,function(T){return new a([T|0],T<0?-1:0)}):new a([S|0],S<0?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return f;if(S<0)return N(c(-S));const T=[];let b=1;for(let C=0;S>=b;C++)T[C]=S/b|0,b*=4294967296;return new a(T,0)}function h(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return N(h(S.substring(1),T));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=c(Math.pow(T,8));let C=f;for(let P=0;P<S.length;P+=8){var D=Math.min(8,S.length-P);const R=parseInt(S.substring(P,P+D),T);D<8?(D=c(Math.pow(T,D)),C=C.j(D).add(c(R))):(C=C.j(b),C=C.add(c(R)))}return C}var f=l(0),m=l(1),g=l(16777216);t=a.prototype,t.m=function(){if(I(this))return-N(this).m();let S=0,T=1;for(let b=0;b<this.g.length;b++){const C=this.i(b);S+=(C>=0?C:4294967296+C)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(I(this))return"-"+N(this).toString(S);const T=c(Math.pow(S,6));var b=this;let C="";for(;;){const D=x(b,T).g;b=v(b,D.j(T));let P=((b.g.length>0?b.g[0]:b.h)>>>0).toString(S);if(b=D,w(b))return P+C;for(;P.length<6;)P="0"+P;C=P+C}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(let T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function I(S){return S.h==-1}t.l=function(S){return S=v(this,S),I(S)?-1:w(S)?0:1};function N(S){const T=S.g.length,b=[];for(let C=0;C<T;C++)b[C]=~S.g[C];return new a(b,~S.h).add(m)}t.abs=function(){return I(this)?N(this):this},t.add=function(S){const T=Math.max(this.g.length,S.g.length),b=[];let C=0;for(let D=0;D<=T;D++){let P=C+(this.i(D)&65535)+(S.i(D)&65535),R=(P>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);C=R>>>16,P&=65535,R&=65535,b[D]=R<<16|P}return new a(b,b[b.length-1]&-2147483648?-1:0)};function v(S,T){return S.add(N(T))}t.j=function(S){if(w(this)||w(S))return f;if(I(this))return I(S)?N(this).j(N(S)):N(N(this).j(S));if(I(S))return N(this.j(N(S)));if(this.l(g)<0&&S.l(g)<0)return c(this.m()*S.m());const T=this.g.length+S.g.length,b=[];for(var C=0;C<2*T;C++)b[C]=0;for(C=0;C<this.g.length;C++)for(let D=0;D<S.g.length;D++){const P=this.i(C)>>>16,R=this.i(C)&65535,Ze=S.i(D)>>>16,St=S.i(D)&65535;b[2*C+2*D]+=R*St,y(b,2*C+2*D),b[2*C+2*D+1]+=P*St,y(b,2*C+2*D+1),b[2*C+2*D+1]+=R*Ze,y(b,2*C+2*D+1),b[2*C+2*D+2]+=P*Ze,y(b,2*C+2*D+2)}for(S=0;S<T;S++)b[S]=b[2*S+1]<<16|b[2*S];for(S=T;S<2*T;S++)b[S]=0;return new a(b,0)};function y(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function E(S,T){this.g=S,this.h=T}function x(S,T){if(w(T))throw Error("division by zero");if(w(S))return new E(f,f);if(I(S))return T=x(N(S),T),new E(N(T.g),N(T.h));if(I(T))return T=x(S,N(T)),new E(N(T.g),T.h);if(S.g.length>30){if(I(S)||I(T))throw Error("slowDivide_ only works with positive integers.");for(var b=m,C=T;C.l(S)<=0;)b=U(b),C=U(C);var D=F(b,1),P=F(C,1);for(C=F(C,2),b=F(b,2);!w(C);){var R=P.add(C);R.l(S)<=0&&(D=D.add(b),P=R),C=F(C,1),b=F(b,1)}return T=v(S,D.j(T)),new E(D,T)}for(D=f;S.l(T)>=0;){for(b=Math.max(1,Math.floor(S.m()/T.m())),C=Math.ceil(Math.log(b)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),P=c(b),R=P.j(T);I(R)||R.l(S)>0;)b-=C,P=c(b),R=P.j(T);w(P)&&(P=m),D=D.add(P),S=v(S,R)}return new E(D,S)}t.B=function(S){return x(this,S).h},t.and=function(S){const T=Math.max(this.g.length,S.g.length),b=[];for(let C=0;C<T;C++)b[C]=this.i(C)&S.i(C);return new a(b,this.h&S.h)},t.or=function(S){const T=Math.max(this.g.length,S.g.length),b=[];for(let C=0;C<T;C++)b[C]=this.i(C)|S.i(C);return new a(b,this.h|S.h)},t.xor=function(S){const T=Math.max(this.g.length,S.g.length),b=[];for(let C=0;C<T;C++)b[C]=this.i(C)^S.i(C);return new a(b,this.h^S.h)};function U(S){const T=S.g.length+1,b=[];for(let C=0;C<T;C++)b[C]=S.i(C)<<1|S.i(C-1)>>>31;return new a(b,S.h)}function F(S,T){const b=T>>5;T%=32;const C=S.g.length-b,D=[];for(let P=0;P<C;P++)D[P]=T>0?S.i(P+b)>>>T|S.i(P+b+1)<<32-T:S.i(P+b);return new a(D,S.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,xR=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=h,Vr=a}).apply(typeof zS<"u"?zS:typeof self<"u"?self:typeof window<"u"?window:{});var oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VR,Bl,PR,kh,Ag,OR,MR,kR;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof oh=="object"&&oh];for(var d=0;d<u.length;++d){var p=u[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var i=n(this);function r(u,d){if(d)e:{var p=i;u=u.split(".");for(var _=0;_<u.length-1;_++){var M=u[_];if(!(M in p))break e;p=p[M]}u=u[u.length-1],_=p[u],d=d(_),d!=_&&d!=null&&e(p,u,{configurable:!0,writable:!0,value:d})}}r("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(u){return u||function(d){var p=[],_;for(_ in d)Object.prototype.hasOwnProperty.call(d,_)&&p.push([_,d[_]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function o(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function l(u,d,p){return u.call.apply(u.bind,arguments)}function c(u,d,p){return c=l,c.apply(null,arguments)}function h(u,d){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),u.apply(this,_)}}function f(u,d){function p(){}p.prototype=d.prototype,u.Z=d.prototype,u.prototype=new p,u.prototype.constructor=u,u.Ob=function(_,M,L){for(var G=Array(arguments.length-2),se=2;se<arguments.length;se++)G[se-2]=arguments[se];return d.prototype[M].apply(_,G)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function g(u){const d=u.length;if(d>0){const p=Array(d);for(let _=0;_<d;_++)p[_]=u[_];return p}return[]}function w(u,d){for(let _=1;_<arguments.length;_++){const M=arguments[_];var p=typeof M;if(p=p!="object"?p:M?Array.isArray(M)?"array":p:"null",p=="array"||p=="object"&&typeof M.length=="number"){p=u.length||0;const L=M.length||0;u.length=p+L;for(let G=0;G<L;G++)u[p+G]=M[G]}else u.push(M)}}class I{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function N(u){a.setTimeout(()=>{throw u},0)}function v(){var u=S;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class y{constructor(){this.h=this.g=null}add(d,p){const _=E.get();_.set(d,p),this.h?this.h.next=_:this.g=_,this.h=_}}var E=new I(()=>new x,u=>u.reset());class x{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let U,F=!1,S=new y,T=()=>{const u=Promise.resolve(void 0);U=()=>{u.then(b)}};function b(){for(var u;u=v();){try{u.h.call(u.g)}catch(p){N(p)}var d=E;d.j(u),d.h<100&&(d.h++,u.next=d.g,d.g=u)}F=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};a.addEventListener("test",p,d),a.removeEventListener("test",p,d)}catch{}return u}();function R(u){return/^[\s\xa0]*$/.test(u)}function Ze(u,d){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,d)}f(Ze,D),Ze.prototype.init=function(u,d){const p=this.type=u.type,_=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget,d||(p=="mouseover"?d=u.fromElement:p=="mouseout"&&(d=u.toElement)),this.relatedTarget=d,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ze.Z.h.call(this)},Ze.prototype.h=function(){Ze.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var St="closure_listenable_"+(Math.random()*1e6|0),K=0;function te(u,d,p,_,M){this.listener=u,this.proxy=null,this.src=d,this.type=p,this.capture=!!_,this.ha=M,this.key=++K,this.da=this.fa=!1}function ee(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function be(u,d,p){for(const _ in u)d.call(p,u[_],_,u)}function He(u,d){for(const p in u)d.call(void 0,u[p],p,u)}function Bn(u){const d={};for(const p in u)d[p]=u[p];return d}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function et(u,d){let p,_;for(let M=1;M<arguments.length;M++){_=arguments[M];for(p in _)u[p]=_[p];for(let L=0;L<$.length;L++)p=$[L],Object.prototype.hasOwnProperty.call(_,p)&&(u[p]=_[p])}}function mt(u){this.src=u,this.g={},this.h=0}mt.prototype.add=function(u,d,p,_,M){const L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);const G=Qd(u,d,_,M);return G>-1?(d=u[G],p||(d.fa=!1)):(d=new te(d,this.src,L,!!_,M),d.fa=p,u.push(d)),d};function qi(u,d){const p=d.type;if(p in u.g){var _=u.g[p],M=Array.prototype.indexOf.call(_,d,void 0),L;(L=M>=0)&&Array.prototype.splice.call(_,M,1),L&&(ee(d),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Qd(u,d,p,_){for(let M=0;M<u.length;++M){const L=u[M];if(!L.da&&L.listener==d&&L.capture==!!p&&L.ha==_)return M}return-1}var $d="closure_lm_"+(Math.random()*1e6|0),Yd={};function Nv(u,d,p,_,M){if(Array.isArray(d)){for(let L=0;L<d.length;L++)Nv(u,d[L],p,_,M);return null}return p=Pv(p),u&&u[St]?u.J(d,p,o(_)?!!_.capture:!1,M):kD(u,d,p,!1,_,M)}function kD(u,d,p,_,M,L){if(!d)throw Error("Invalid event type");const G=o(M)?!!M.capture:!!M;let se=Xd(u);if(se||(u[$d]=se=new mt(u)),p=se.add(d,p,_,G,L),p.proxy)return p;if(_=LD(),p.proxy=_,_.src=u,_.listener=p,u.addEventListener)P||(M=G),M===void 0&&(M=!1),u.addEventListener(d.toString(),_,M);else if(u.attachEvent)u.attachEvent(Vv(d.toString()),_);else if(u.addListener&&u.removeListener)u.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function LD(){function u(p){return d.call(u.src,u.listener,p)}const d=UD;return u}function xv(u,d,p,_,M){if(Array.isArray(d))for(var L=0;L<d.length;L++)xv(u,d[L],p,_,M);else _=o(_)?!!_.capture:!!_,p=Pv(p),u&&u[St]?(u=u.i,L=String(d).toString(),L in u.g&&(d=u.g[L],p=Qd(d,p,_,M),p>-1&&(ee(d[p]),Array.prototype.splice.call(d,p,1),d.length==0&&(delete u.g[L],u.h--)))):u&&(u=Xd(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Qd(d,p,_,M)),(p=u>-1?d[u]:null)&&Wd(p))}function Wd(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[St])qi(d.i,u);else{var p=u.type,_=u.proxy;d.removeEventListener?d.removeEventListener(p,_,u.capture):d.detachEvent?d.detachEvent(Vv(p),_):d.addListener&&d.removeListener&&d.removeListener(_),(p=Xd(d))?(qi(p,u),p.h==0&&(p.src=null,d[$d]=null)):ee(u)}}}function Vv(u){return u in Yd?Yd[u]:Yd[u]="on"+u}function UD(u,d){if(u.da)u=!0;else{d=new Ze(d,this);const p=u.listener,_=u.ha||u.src;u.fa&&Wd(u),u=p.call(_,d)}return u}function Xd(u){return u=u[$d],u instanceof mt?u:null}var Jd="__closure_events_fn_"+(Math.random()*1e9>>>0);function Pv(u){return typeof u=="function"?u:(u[Jd]||(u[Jd]=function(d){return u.handleEvent(d)}),u[Jd])}function Nt(){C.call(this),this.i=new mt(this),this.M=this,this.G=null}f(Nt,C),Nt.prototype[St]=!0,Nt.prototype.removeEventListener=function(u,d,p,_){xv(this,u,d,p,_)};function Mt(u,d){var p,_=u.G;if(_)for(p=[];_;_=_.G)p.push(_);if(u=u.M,_=d.type||d,typeof d=="string")d=new D(d,u);else if(d instanceof D)d.target=d.target||u;else{var M=d;d=new D(_,u),et(d,M)}M=!0;let L,G;if(p)for(G=p.length-1;G>=0;G--)L=d.g=p[G],M=xc(L,_,!0,d)&&M;if(L=d.g=u,M=xc(L,_,!0,d)&&M,M=xc(L,_,!1,d)&&M,p)for(G=0;G<p.length;G++)L=d.g=p[G],M=xc(L,_,!1,d)&&M}Nt.prototype.N=function(){if(Nt.Z.N.call(this),this.i){var u=this.i;for(const d in u.g){const p=u.g[d];for(let _=0;_<p.length;_++)ee(p[_]);delete u.g[d],u.h--}}this.G=null},Nt.prototype.J=function(u,d,p,_){return this.i.add(String(u),d,!1,p,_)},Nt.prototype.K=function(u,d,p,_){return this.i.add(String(u),d,!0,p,_)};function xc(u,d,p,_){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();let M=!0;for(let L=0;L<d.length;++L){const G=d[L];if(G&&!G.da&&G.capture==p){const se=G.listener,lt=G.ha||G.src;G.fa&&qi(u.i,G),M=se.call(lt,_)!==!1&&M}}return M&&!_.defaultPrevented}function zD(u,d){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=c(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:a.setTimeout(u,d||0)}function Ov(u){u.g=zD(()=>{u.g=null,u.i&&(u.i=!1,Ov(u))},u.l);const d=u.h;u.h=null,u.m.apply(null,d)}class BD extends C{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Ov(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function il(u){C.call(this),this.h=u,this.g={}}f(il,C);var Mv=[];function kv(u){be(u.g,function(d,p){this.g.hasOwnProperty(p)&&Wd(d)},u),u.g={}}il.prototype.N=function(){il.Z.N.call(this),kv(this)},il.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zd=a.JSON.stringify,jD=a.JSON.parse,FD=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Lv(){}function Uv(){}var rl={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function em(){D.call(this,"d")}f(em,D);function tm(){D.call(this,"c")}f(tm,D);var rs={},zv=null;function Vc(){return zv=zv||new Nt}rs.Ia="serverreachability";function Bv(u){D.call(this,rs.Ia,u)}f(Bv,D);function sl(u){const d=Vc();Mt(d,new Bv(d))}rs.STAT_EVENT="statevent";function jv(u,d){D.call(this,rs.STAT_EVENT,u),this.stat=d}f(jv,D);function kt(u){const d=Vc();Mt(d,new jv(d,u))}rs.Ja="timingevent";function Fv(u,d){D.call(this,rs.Ja,u),this.size=d}f(Fv,D);function al(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function ol(){this.g=!0}ol.prototype.ua=function(){this.g=!1};function qD(u,d,p,_,M,L){u.info(function(){if(u.g)if(L){var G="",se=L.split("&");for(let Ce=0;Ce<se.length;Ce++){var lt=se[Ce].split("=");if(lt.length>1){const pt=lt[0];lt=lt[1];const Fn=pt.split("_");G=Fn.length>=2&&Fn[1]=="type"?G+(pt+"="+lt+"&"):G+(pt+"=redacted&")}}}else G=null;else G=L;return"XMLHTTP REQ ("+_+") [attempt "+M+"]: "+d+`
`+p+`
`+G})}function HD(u,d,p,_,M,L,G){u.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+M+"]: "+d+`
`+p+`
`+L+" "+G})}function oa(u,d,p,_){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+KD(u,p)+(_?" "+_:"")})}function GD(u,d){u.info(function(){return"TIMEOUT: "+d})}ol.prototype.info=function(){};function KD(u,d){if(!u.g)return d;if(!d)return null;try{const L=JSON.parse(d);if(L){for(u=0;u<L.length;u++)if(Array.isArray(L[u])){var p=L[u];if(!(p.length<2)){var _=p[1];if(Array.isArray(_)&&!(_.length<1)){var M=_[0];if(M!="noop"&&M!="stop"&&M!="close")for(let G=1;G<_.length;G++)_[G]=""}}}}return Zd(L)}catch{return d}}var Pc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},qv={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Hv;function nm(){}f(nm,Lv),nm.prototype.g=function(){return new XMLHttpRequest},Hv=new nm;function ll(u){return encodeURIComponent(String(u))}function QD(u){var d=1;u=u.split(":");const p=[];for(;d>0&&u.length;)p.push(u.shift()),d--;return u.length&&p.push(u.join(":")),p}function Hi(u,d,p,_){this.j=u,this.i=d,this.l=p,this.S=_||1,this.V=new il(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Gv}function Gv(){this.i=null,this.g="",this.h=!1}var Kv={},im={};function rm(u,d,p){u.M=1,u.A=Mc(jn(d)),u.u=p,u.R=!0,Qv(u,null)}function Qv(u,d){u.F=Date.now(),Oc(u),u.B=jn(u.A);var p=u.B,_=u.S;Array.isArray(_)||(_=[String(_)]),aE(p.i,"t",_),u.C=0,p=u.j.L,u.h=new Gv,u.g=bE(u.j,p?d:null,!u.u),u.P>0&&(u.O=new BD(c(u.Y,u,u.g),u.P)),d=u.V,p=u.g,_=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(Mv[0]=M.toString()),M=Mv);for(let L=0;L<M.length;L++){const G=Nv(p,M[L],_||d.handleEvent,!1,d.h||d);if(!G)break;d.g[G.key]=G}d=u.J?Bn(u.J):{},u.u?(u.v||(u.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,d)):(u.v="GET",u.g.ea(u.B,u.v,null,d)),sl(),qD(u.i,u.v,u.B,u.l,u.S,u.u)}Hi.prototype.ba=function(u){u=u.target;const d=this.O;d&&Qi(u)==3?d.j():this.Y(u)},Hi.prototype.Y=function(u){try{if(u==this.g)e:{const se=Qi(this.g),lt=this.g.ya(),Ce=this.g.ca();if(!(se<3)&&(se!=3||this.g&&(this.h.h||this.g.la()||dE(this.g)))){this.K||se!=4||lt==7||(lt==8||Ce<=0?sl(3):sl(2)),sm(this);var d=this.g.ca();this.X=d;var p=$D(this);if(this.o=d==200,HD(this.i,this.v,this.B,this.l,this.S,se,d),this.o){if(this.U&&!this.L){t:{if(this.g){var _,M=this.g;if((_=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(_)){var L=_;break t}}L=null}if(u=L)oa(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,am(this,u);else{this.o=!1,this.m=3,kt(12),ss(this),ul(this);break e}}if(this.R){u=!0;let pt;for(;!this.K&&this.C<p.length;)if(pt=YD(this,p),pt==im){se==4&&(this.m=4,kt(14),u=!1),oa(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==Kv){this.m=4,kt(15),oa(this.i,this.l,p,"[Invalid Chunk]"),u=!1;break}else oa(this.i,this.l,pt,null),am(this,pt);if($v(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),se!=4||p.length!=0||this.h.h||(this.m=1,kt(16),u=!1),this.o=this.o&&u,!u)oa(this.i,this.l,p,"[Invalid Chunked Response]"),ss(this),ul(this);else if(p.length>0&&!this.W){this.W=!0;var G=this.j;G.g==this&&G.aa&&!G.P&&(G.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),mm(G),G.P=!0,kt(11))}}else oa(this.i,this.l,p,null),am(this,p);se==4&&ss(this),this.o&&!this.K&&(se==4?EE(this.j,this):(this.o=!1,Oc(this)))}else uN(this.g),d==400&&p.indexOf("Unknown SID")>0?(this.m=3,kt(12)):(this.m=0,kt(13)),ss(this),ul(this)}}}catch{}finally{}};function $D(u){if(!$v(u))return u.g.la();const d=dE(u.g);if(d==="")return"";let p="";const _=d.length,M=Qi(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ss(u),ul(u),"";u.h.i=new a.TextDecoder}for(let L=0;L<_;L++)u.h.h=!0,p+=u.h.i.decode(d[L],{stream:!(M&&L==_-1)});return d.length=0,u.h.g+=p,u.C=0,u.h.g}function $v(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function YD(u,d){var p=u.C,_=d.indexOf(`
`,p);return _==-1?im:(p=Number(d.substring(p,_)),isNaN(p)?Kv:(_+=1,_+p>d.length?im:(d=d.slice(_,_+p),u.C=_+p,d)))}Hi.prototype.cancel=function(){this.K=!0,ss(this)};function Oc(u){u.T=Date.now()+u.H,Yv(u,u.H)}function Yv(u,d){if(u.D!=null)throw Error("WatchDog timer not null");u.D=al(c(u.aa,u),d)}function sm(u){u.D&&(a.clearTimeout(u.D),u.D=null)}Hi.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(GD(this.i,this.B),this.M!=2&&(sl(),kt(17)),ss(this),this.m=2,ul(this)):Yv(this,this.T-u)};function ul(u){u.j.I==0||u.K||EE(u.j,u)}function ss(u){sm(u);var d=u.O;d&&typeof d.dispose=="function"&&d.dispose(),u.O=null,kv(u.V),u.g&&(d=u.g,u.g=null,d.abort(),d.dispose())}function am(u,d){try{var p=u.j;if(p.I!=0&&(p.g==u||om(p.h,u))){if(!u.L&&om(p.h,u)&&p.I==3){try{var _=p.Ba.g.parse(d)}catch{_=null}if(Array.isArray(_)&&_.length==3){var M=_;if(M[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<u.F)Bc(p),Uc(p);else break e;dm(p),kt(18)}}else p.xa=M[1],0<p.xa-p.K&&M[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=al(c(p.Va,p),6e3));Jv(p.h)<=1&&p.ta&&(p.ta=void 0)}else os(p,11)}else if((u.L||p.g==u)&&Bc(p),!R(d))for(M=p.Ba.g.parse(d),d=0;d<M.length;d++){let Ce=M[d];const pt=Ce[0];if(!(pt<=p.K))if(p.K=pt,Ce=Ce[1],p.I==2)if(Ce[0]=="c"){p.M=Ce[1],p.ba=Ce[2];const Fn=Ce[3];Fn!=null&&(p.ka=Fn,p.j.info("VER="+p.ka));const ls=Ce[4];ls!=null&&(p.za=ls,p.j.info("SVER="+p.za));const $i=Ce[5];$i!=null&&typeof $i=="number"&&$i>0&&(_=1.5*$i,p.O=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const Yi=u.g;if(Yi){const Fc=Yi.g?Yi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fc){var L=_.h;L.g||Fc.indexOf("spdy")==-1&&Fc.indexOf("quic")==-1&&Fc.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(lm(L,L.h),L.h=null))}if(_.G){const pm=Yi.g?Yi.g.getResponseHeader("X-HTTP-Session-Id"):null;pm&&(_.wa=pm,Ve(_.J,_.G,pm))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-u.F,p.j.info("Handshake RTT: "+p.T+"ms")),_=p;var G=u;if(_.na=wE(_,_.L?_.ba:null,_.W),G.L){Zv(_.h,G);var se=G,lt=_.O;lt&&(se.H=lt),se.D&&(sm(se),Oc(se)),_.g=G}else _E(_);p.i.length>0&&zc(p)}else Ce[0]!="stop"&&Ce[0]!="close"||os(p,7);else p.I==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?os(p,7):fm(p):Ce[0]!="noop"&&p.l&&p.l.qa(Ce),p.A=0)}}sl(4)}catch{}}var WD=class{constructor(u,d){this.g=u,this.map=d}};function Wv(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xv(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Jv(u){return u.h?1:u.g?u.g.size:0}function om(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function lm(u,d){u.g?u.g.add(d):u.h=d}function Zv(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}Wv.prototype.cancel=function(){if(this.i=eE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function eE(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let d=u.i;for(const p of u.g.values())d=d.concat(p.G);return d}return g(u.i)}var tE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function XD(u,d){if(u){u=u.split("&");for(let p=0;p<u.length;p++){const _=u[p].indexOf("=");let M,L=null;_>=0?(M=u[p].substring(0,_),L=u[p].substring(_+1)):M=u[p],d(M,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Gi(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;u instanceof Gi?(this.l=u.l,cl(this,u.j),this.o=u.o,this.g=u.g,hl(this,u.u),this.h=u.h,um(this,oE(u.i)),this.m=u.m):u&&(d=String(u).match(tE))?(this.l=!1,cl(this,d[1]||"",!0),this.o=fl(d[2]||""),this.g=fl(d[3]||"",!0),hl(this,d[4]),this.h=fl(d[5]||"",!0),um(this,d[6]||"",!0),this.m=fl(d[7]||"")):(this.l=!1,this.i=new ml(null,this.l))}Gi.prototype.toString=function(){const u=[];var d=this.j;d&&u.push(dl(d,nE,!0),":");var p=this.g;return(p||d=="file")&&(u.push("//"),(d=this.o)&&u.push(dl(d,nE,!0),"@"),u.push(ll(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&u.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(dl(p,p.charAt(0)=="/"?eN:ZD,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",dl(p,nN)),u.join("")},Gi.prototype.resolve=function(u){const d=jn(this);let p=!!u.j;p?cl(d,u.j):p=!!u.o,p?d.o=u.o:p=!!u.g,p?d.g=u.g:p=u.u!=null;var _=u.h;if(p)hl(d,u.u);else if(p=!!u.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var M=d.h.lastIndexOf("/");M!=-1&&(_=d.h.slice(0,M+1)+_)}if(M=_,M==".."||M==".")_="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){_=M.lastIndexOf("/",0)==0,M=M.split("/");const L=[];for(let G=0;G<M.length;){const se=M[G++];se=="."?_&&G==M.length&&L.push(""):se==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),_&&G==M.length&&L.push("")):(L.push(se),_=!0)}_=L.join("/")}else _=M}return p?d.h=_:p=u.i.toString()!=="",p?um(d,oE(u.i)):p=!!u.m,p&&(d.m=u.m),d};function jn(u){return new Gi(u)}function cl(u,d,p){u.j=p?fl(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function hl(u,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);u.u=d}else u.u=null}function um(u,d,p){d instanceof ml?(u.i=d,iN(u.i,u.l)):(p||(d=dl(d,tN)),u.i=new ml(d,u.l))}function Ve(u,d,p){u.i.set(d,p)}function Mc(u){return Ve(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function fl(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function dl(u,d,p){return typeof u=="string"?(u=encodeURI(u).replace(d,JD),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function JD(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var nE=/[#\/\?@]/g,ZD=/[#\?:]/g,eN=/[#\?]/g,tN=/[#\?@]/g,nN=/#/g;function ml(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function as(u){u.g||(u.g=new Map,u.h=0,u.i&&XD(u.i,function(d,p){u.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}t=ml.prototype,t.add=function(u,d){as(this),this.i=null,u=la(this,u);let p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(d),this.h+=1,this};function iE(u,d){as(u),d=la(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function rE(u,d){return as(u),d=la(u,d),u.g.has(d)}t.forEach=function(u,d){as(this),this.g.forEach(function(p,_){p.forEach(function(M){u.call(d,M,_,this)},this)},this)};function sE(u,d){as(u);let p=[];if(typeof d=="string")rE(u,d)&&(p=p.concat(u.g.get(la(u,d))));else for(u=Array.from(u.g.values()),d=0;d<u.length;d++)p=p.concat(u[d]);return p}t.set=function(u,d){return as(this),this.i=null,u=la(this,u),rE(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=sE(this,u),u.length>0?String(u[0]):d):d};function aE(u,d,p){iE(u,d),p.length>0&&(u.i=null,u.g.set(la(u,d),g(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],d=Array.from(this.g.keys());for(let _=0;_<d.length;_++){var p=d[_];const M=ll(p);p=sE(this,p);for(let L=0;L<p.length;L++){let G=M;p[L]!==""&&(G+="="+ll(p[L])),u.push(G)}}return this.i=u.join("&")};function oE(u){const d=new ml;return d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),d}function la(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function iN(u,d){d&&!u.j&&(as(u),u.i=null,u.g.forEach(function(p,_){const M=_.toLowerCase();_!=M&&(iE(this,_),aE(this,M,p))},u)),u.j=d}function rN(u,d){const p=new ol;if(a.Image){const _=new Image;_.onload=h(Ki,p,"TestLoadImage: loaded",!0,d,_),_.onerror=h(Ki,p,"TestLoadImage: error",!1,d,_),_.onabort=h(Ki,p,"TestLoadImage: abort",!1,d,_),_.ontimeout=h(Ki,p,"TestLoadImage: timeout",!1,d,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=u}else d(!1)}function sN(u,d){const p=new ol,_=new AbortController,M=setTimeout(()=>{_.abort(),Ki(p,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:_.signal}).then(L=>{clearTimeout(M),L.ok?Ki(p,"TestPingServer: ok",!0,d):Ki(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(M),Ki(p,"TestPingServer: error",!1,d)})}function Ki(u,d,p,_,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),_(p)}catch{}}function aN(){this.g=new FD}function cm(u){this.i=u.Sb||null,this.h=u.ab||!1}f(cm,Lv),cm.prototype.g=function(){return new kc(this.i,this.h)};function kc(u,d){Nt.call(this),this.H=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(kc,Nt),t=kc.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=d,this.readyState=1,gl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(d.body=u),(this.H||a).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,pl(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,gl(this)),this.g&&(this.readyState=3,gl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;lE(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function lE(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?pl(this):gl(this),this.readyState==3&&lE(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,pl(this))},t.Na=function(u){this.g&&(this.response=u,pl(this))},t.ga=function(){this.g&&pl(this)};function pl(u){u.readyState=4,u.l=null,u.j=null,u.B=null,gl(u)}t.setRequestHeader=function(u,d){this.A.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=d.next();return u.join(`\r
`)};function gl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(kc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function uE(u){let d="";return be(u,function(p,_){d+=_,d+=":",d+=p,d+=`\r
`}),d}function hm(u,d,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=uE(p),typeof u=="string"?p!=null&&ll(p):Ve(u,d,p))}function Ke(u){Nt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Ke,Nt);var oN=/^https?$/i,lN=["POST","PUT"];t=Ke.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,d,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Hv.g(),this.g.onreadystatechange=m(c(this.Ca,this));try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(L){cE(this,L);return}if(u=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var M in _)p.set(M,_[M]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const L of _.keys())p.set(L,_.get(L));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(L=>L.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(Array.prototype.indexOf.call(lN,d,void 0)>=0)||_||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,G]of p)this.g.setRequestHeader(L,G);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(L){cE(this,L)}};function cE(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.o=5,hE(u),Lc(u)}function hE(u){u.A||(u.A=!0,Mt(u,"complete"),Mt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Mt(this,"complete"),Mt(this,"abort"),Lc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lc(this,!0)),Ke.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?fE(this):this.Xa())},t.Xa=function(){fE(this)};function fE(u){if(u.h&&typeof s<"u"){if(u.v&&Qi(u)==4)setTimeout(u.Ca.bind(u),0);else if(Mt(u,"readystatechange"),Qi(u)==4){u.h=!1;try{const L=u.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var _;if(_=L===0){let G=String(u.D).match(tE)[1]||null;!G&&a.self&&a.self.location&&(G=a.self.location.protocol.slice(0,-1)),_=!oN.test(G?G.toLowerCase():"")}p=_}if(p)Mt(u,"complete"),Mt(u,"success");else{u.o=6;try{var M=Qi(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",hE(u)}}finally{Lc(u)}}}}function Lc(u,d){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const p=u.g;u.g=null,d||Mt(u,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Qi(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Qi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),jD(d)}};function dE(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function uN(u){const d={};u=(u.g&&Qi(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<u.length;_++){if(R(u[_]))continue;var p=QD(u[_]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const L=d[M]||[];d[M]=L,L.push(p)}He(d,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function yl(u,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||d}function mE(u){this.za=0,this.i=[],this.j=new ol,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=yl("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=yl("baseRetryDelayMs",5e3,u),this.Za=yl("retryDelaySeedMs",1e4,u),this.Ta=yl("forwardChannelMaxRetries",2,u),this.va=yl("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Wv(u&&u.concurrentRequestLimit),this.Ba=new aN,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=mE.prototype,t.ka=8,t.I=1,t.connect=function(u,d,p,_){kt(0),this.W=u,this.H=d||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.J=wE(this,null,this.W),zc(this)};function fm(u){if(pE(u),u.I==3){var d=u.V++,p=jn(u.J);if(Ve(p,"SID",u.M),Ve(p,"RID",d),Ve(p,"TYPE","terminate"),_l(u,p),d=new Hi(u,u.j,d),d.M=2,d.A=Mc(jn(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(d.A.toString(),"")}catch{}!p&&a.Image&&(new Image().src=d.A,p=!0),p||(d.g=bE(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Oc(d)}SE(u)}function Uc(u){u.g&&(mm(u),u.g.cancel(),u.g=null)}function pE(u){Uc(u),u.v&&(a.clearTimeout(u.v),u.v=null),Bc(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&a.clearTimeout(u.m),u.m=null)}function zc(u){if(!Xv(u.h)&&!u.m){u.m=!0;var d=u.Ea;U||T(),F||(U(),F=!0),S.add(d,u),u.D=0}}function cN(u,d){return Jv(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=d.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=al(c(u.Ea,u,d),TE(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new Hi(this,this.j,u);let L=this.o;if(this.U&&(L?(L=Bn(L),et(L,this.U)):L=this.U),this.u!==null||this.R||(M.J=L,L=null),this.S)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(d+=_,d>4096){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=yE(this,M,d),p=jn(this.J),Ve(p,"RID",u),Ve(p,"CVER",22),this.G&&Ve(p,"X-HTTP-Session-Id",this.G),_l(this,p),L&&(this.R?d="headers="+ll(uE(L))+"&"+d:this.u&&hm(p,this.u,L)),lm(this.h,M),this.Ra&&Ve(p,"TYPE","init"),this.S?(Ve(p,"$req",d),Ve(p,"SID","null"),M.U=!0,rm(M,p,null)):rm(M,p,d),this.I=2}}else this.I==3&&(u?gE(this,u):this.i.length==0||Xv(this.h)||gE(this))};function gE(u,d){var p;d?p=d.l:p=u.V++;const _=jn(u.J);Ve(_,"SID",u.M),Ve(_,"RID",p),Ve(_,"AID",u.K),_l(u,_),u.u&&u.o&&hm(_,u.u,u.o),p=new Hi(u,u.j,p,u.D+1),u.u===null&&(p.J=u.o),d&&(u.i=d.G.concat(u.i)),d=yE(u,p,1e3),p.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),lm(u.h,p),rm(p,_,d)}function _l(u,d){u.H&&be(u.H,function(p,_){Ve(d,_,p)}),u.l&&be({},function(p,_){Ve(d,_,p)})}function yE(u,d,p){p=Math.min(u.i.length,p);const _=u.l?c(u.l.Ka,u.l,u):null;e:{var M=u.i;let se=-1;for(;;){const lt=["count="+p];se==-1?p>0?(se=M[0].g,lt.push("ofs="+se)):se=0:lt.push("ofs="+se);let Ce=!0;for(let pt=0;pt<p;pt++){var L=M[pt].g;const Fn=M[pt].map;if(L-=se,L<0)se=Math.max(0,M[pt].g-100),Ce=!1;else try{L="req"+L+"_"||"";try{var G=Fn instanceof Map?Fn:Object.entries(Fn);for(const[ls,$i]of G){let Yi=$i;o($i)&&(Yi=Zd($i)),lt.push(L+ls+"="+encodeURIComponent(Yi))}}catch(ls){throw lt.push(L+"type="+encodeURIComponent("_badmap")),ls}}catch{_&&_(Fn)}}if(Ce){G=lt.join("&");break e}}G=void 0}return u=u.i.splice(0,p),d.G=u,G}function _E(u){if(!u.g&&!u.v){u.Y=1;var d=u.Da;U||T(),F||(U(),F=!0),S.add(d,u),u.A=0}}function dm(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=al(c(u.Da,u),TE(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,vE(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=al(c(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,kt(10),Uc(this),vE(this))};function mm(u){u.B!=null&&(a.clearTimeout(u.B),u.B=null)}function vE(u){u.g=new Hi(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var d=jn(u.na);Ve(d,"RID","rpc"),Ve(d,"SID",u.M),Ve(d,"AID",u.K),Ve(d,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ve(d,"TO",u.ia),Ve(d,"TYPE","xmlhttp"),_l(u,d),u.u&&u.o&&hm(d,u.u,u.o),u.O&&(u.g.H=u.O);var p=u.g;u=u.ba,p.M=1,p.A=Mc(jn(d)),p.u=null,p.R=!0,Qv(p,u)}t.Va=function(){this.C!=null&&(this.C=null,Uc(this),dm(this),kt(19))};function Bc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function EE(u,d){var p=null;if(u.g==d){Bc(u),mm(u),u.g=null;var _=2}else if(om(u.h,d))p=d.G,Zv(u.h,d),_=1;else return;if(u.I!=0){if(d.o)if(_==1){p=d.u?d.u.length:0,d=Date.now()-d.F;var M=u.D;_=Vc(),Mt(_,new Fv(_,p)),zc(u)}else _E(u);else if(M=d.m,M==3||M==0&&d.X>0||!(_==1&&cN(u,d)||_==2&&dm(u)))switch(p&&p.length>0&&(d=u.h,d.i=d.i.concat(p)),M){case 1:os(u,5);break;case 4:os(u,10);break;case 3:os(u,6);break;default:os(u,2)}}}function TE(u,d){let p=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(p*=2),p*d}function os(u,d){if(u.j.info("Error code "+d),d==2){var p=c(u.bb,u),_=u.Ua;const M=!_;_=new Gi(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||cl(_,"https"),Mc(_),M?rN(_.toString(),p):sN(_.toString(),p)}else kt(2);u.I=0,u.l&&u.l.pa(d),SE(u),pE(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function SE(u){if(u.I=0,u.ja=[],u.l){const d=eE(u.h);(d.length!=0||u.i.length!=0)&&(w(u.ja,d),w(u.ja,u.i),u.h.i.length=0,g(u.i),u.i.length=0),u.l.oa()}}function wE(u,d,p){var _=p instanceof Gi?jn(p):new Gi(p);if(_.g!="")d&&(_.g=d+"."+_.g),hl(_,_.u);else{var M=a.location;_=M.protocol,d=d?d+"."+M.hostname:M.hostname,M=+M.port;const L=new Gi(null);_&&cl(L,_),d&&(L.g=d),M&&hl(L,M),p&&(L.h=p),_=L}return p=u.G,d=u.wa,p&&d&&Ve(_,p,d),Ve(_,"VER",u.ka),_l(u,_),_}function bE(u,d,p){if(d&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Aa&&!u.ma?new Ke(new cm({ab:p})):new Ke(u.ma),d.Fa(u.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function AE(){}t=AE.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function jc(){}jc.prototype.g=function(u,d){return new Zt(u,d)};function Zt(u,d){Nt.call(this),this.g=new mE(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(u?u["X-WebChannel-Client-Profile"]=d.sa:u={"X-WebChannel-Client-Profile":d.sa}),this.g.U=u,(u=d&&d.Qb)&&!R(u)&&(this.g.u=u),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!R(d)&&(this.g.G=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new ua(this)}f(Zt,Nt),Zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){fm(this.g)},Zt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.v&&(p={},p.__data__=Zd(u),u=p);d.i.push(new WD(d.Ya++,u)),d.I==3&&zc(d)},Zt.prototype.N=function(){this.g.l=null,delete this.j,fm(this.g),delete this.g,Zt.Z.N.call(this)};function IE(u){em.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(const p in d){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}f(IE,em);function RE(){tm.call(this),this.status=1}f(RE,tm);function ua(u){this.g=u}f(ua,AE),ua.prototype.ra=function(){Mt(this.g,"a")},ua.prototype.qa=function(u){Mt(this.g,new IE(u))},ua.prototype.pa=function(u){Mt(this.g,new RE)},ua.prototype.oa=function(){Mt(this.g,"b")},jc.prototype.createWebChannel=jc.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,kR=function(){return new jc},MR=function(){return Vc()},OR=rs,Ag={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Pc.NO_ERROR=0,Pc.TIMEOUT=8,Pc.HTTP_ERROR=6,kh=Pc,qv.COMPLETE="complete",PR=qv,Uv.EventType=rl,rl.OPEN="a",rl.CLOSE="b",rl.ERROR="c",rl.MESSAGE="d",Nt.prototype.listen=Nt.prototype.J,Bl=Uv,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,VR=Ke}).apply(typeof oh<"u"?oh:typeof self<"u"?self:typeof window<"u"?window:{});const BS="@firebase/firestore",jS="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Go="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new u_("@firebase/firestore");function Sa(){return Ur.logLevel}function j4(t){Ur.setLogLevel(t)}function j(t,...e){if(Ur.logLevel<=ce.DEBUG){const n=e.map(T_);Ur.debug(`Firestore (${Go}): ${t}`,...n)}}function We(t,...e){if(Ur.logLevel<=ce.ERROR){const n=e.map(T_);Ur.error(`Firestore (${Go}): ${t}`,...n)}}function pn(t,...e){if(Ur.logLevel<=ce.WARN){const n=e.map(T_);Ur.warn(`Firestore (${Go}): ${t}`,...n)}}function T_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,LR(t,i,n)}function LR(t,e,n){let i=`FIRESTORE (${Go}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw We(i),new Error(i)}function Y(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||LR(e,r,i)}function F4(t,e){t||Q(57014,e)}function H(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Li{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class q4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class H4{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Y(this.o===void 0,42304);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Tt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Tt,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},o=l=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Tt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Y(typeof i.accessToken=="string",31837,{l:i}),new UR(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Y(e===null||typeof e=="string",2055,{h:e}),new _t(e)}}class G4{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class K4{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new G4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ig{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Q4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Y(this.o===void 0,3512);const i=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,j("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?r(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ig(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Y(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ig(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class $4{getToken(){return Promise.resolve(new Ig(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=Y4(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}}function J(t,e){return t<e?-1:t>e?1:0}function Rg(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),s=e.charAt(i);if(r!==s)return up(r)===up(s)?J(r,s):up(r)?1:-1}return J(t.length,e.length)}const W4=55296,X4=57343;function up(t){const e=t.charCodeAt(0);return e>=W4&&e<=X4}function uo(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function BR(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="__name__";class qn{constructor(e,n,i){n===void 0?n=0:n>e.length&&Q(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Q(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return qn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qn?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=qn.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return J(e.length,n.length)}static compareSegments(e,n){const i=qn.isNumericId(e),r=qn.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?qn.extractNumericId(e).compare(qn.extractNumericId(n)):Rg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vr.fromString(e.substring(4,e.length-2))}}class ae extends qn{construct(e,n,i){return new ae(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new z(k.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new ae(n)}static emptyPath(){return new ae([])}}const J4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ke extends qn{construct(e,n,i){return new ke(e,n,i)}static isValidIdentifier(e){return J4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ke.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Cg}static keyField(){return new ke([Cg])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const o=e[r];if(o==="\\"){if(r+1===e.length)throw new z(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new z(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else o==="`"?(a=!a,r++):o!=="."||a?(i+=o,r++):(s(),r++)}if(s(),a)throw new z(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ke(n)}static emptyPath(){return new ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(ae.fromString(e))}static fromName(e){return new q(ae.fromString(e).popFirst(5))}static empty(){return new q(ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new ae(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(t,e,n){if(!n)throw new z(k.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function jR(t,e,n,i){if(e===!0&&i===!0)throw new z(k.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function FS(t){if(!q.isDocumentKey(t))throw new z(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qS(t){if(q.isDocumentKey(t))throw new z(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function FR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Td(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q(12329,{type:typeof t})}function oe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Td(t);throw new z(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function qR(t,e){if(e<=0)throw new z(k.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t,e){const n={typeString:t};return e&&(n.value=e),n}function na(t,e){if(!FR(t))throw new z(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new z(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=-62135596800,GS=1e6;class ye{static now(){return ye.fromMillis(Date.now())}static fromDate(e){return ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*GS);return new ye(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<HS)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GS}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(na(e,ye._jsonSchema))return new ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-HS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ye._jsonSchemaVersion="firestore/timestamp/1.0",ye._jsonSchema={type:ot("string",ye._jsonSchemaVersion),seconds:ot("number"),nanoseconds:ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{static fromTimestamp(e){return new W(e)}static min(){return new W(new ye(0,0))}static max(){return new W(new ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=-1;class ho{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}}function Dg(t){return t.fields.find(e=>e.kind===2)}function gs(t){return t.fields.filter(e=>e.kind!==2)}function Z4(t,e){let n=J(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let i=0;i<Math.min(t.fields.length,e.fields.length);++i)if(n=eL(t.fields[i],e.fields[i]),n!==0)return n;return J(t.fields.length,e.fields.length)}ho.UNKNOWN_ID=-1;class Ds{constructor(e,n){this.fieldPath=e,this.kind=n}}function eL(t,e){const n=ke.comparator(t.fieldPath,e.fieldPath);return n!==0?n:J(t.kind,e.kind)}class fo{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new fo(0,gn.min())}}function HR(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=W.fromTimestamp(i===1e9?new ye(n+1,0):new ye(n,i));return new gn(r,q.empty(),e)}function GR(t){return new gn(t.readTime,t.key,co)}class gn{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new gn(W.min(),q.empty(),co)}static max(){return new gn(W.max(),q.empty(),co)}}function w_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:J(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wr(t){if(t.code!==k.FAILED_PRECONDITION||t.message!==KR)throw t;j("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,i)=>{n(e)})}static reject(e){return new O((n,i)=>{i(e)})}static waitFor(e){return new O((n,i)=>{let r=0,s=0,a=!1;e.forEach(o=>{++r,o.next(()=>{++s,a&&s===r&&n()},l=>i(l))}),a=!0,s===r&&n()})}static or(e){let n=O.resolve(!1);for(const i of e)n=n.next(r=>r?O.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new O((i,r)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{a[c]=h,++o,o===s&&i(a)},h=>r(h))}})}static doWhile(e,n){return new O((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="SimpleDb";class Sd{static open(e,n,i,r){try{return new Sd(n,e.transaction(r,i))}catch(s){throw new au(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Tt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new au(e,n.error)):this.S.resolve()},this.transaction.onerror=i=>{const r=b_(i.target.error);this.S.reject(new au(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(j(tn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new nL(n)}}class Jn{static delete(e){return j(tn,"Removing database:",e),_s(LI().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!GI())return!1;if(Jn.F())return!0;const e=ht(),n=Jn.M(e),i=0<n&&n<10,r=$R(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,n,i){this.name=e,this.version=n,this.N=i,this.B=null,Jn.M(ht())===12.2&&We("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(j(tn,"Opening database:",this.name),this.db=await new Promise((n,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{const a=s.target.result;n(a)},r.onblocked=()=>{i(new au(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{const a=s.target.error;a.name==="VersionError"?i(new z(k.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?i(new z(k.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):i(new au(e,a))},r.onupgradeneeded=s=>{j(tn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,r.transaction,s.oldVersion,this.version).next(()=>{j(tn,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,r){const s=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=Sd.open(this.db,e,s?"readonly":"readwrite",i),l=r(o).next(c=>(o.C(),c)).catch(c=>(o.abort(c),O.reject(c))).toPromise();return l.catch(()=>{}),await o.D,l}catch(o){const l=o,c=l.name!=="FirebaseError"&&a<3;if(j(tn,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function $R(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class tL{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return _s(this.U.delete())}}class au extends z{constructor(e,n){super(k.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Xr(t){return t.name==="IndexedDbTransactionError"}class nL{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(j(tn,"PUT",this.store.name,e,n),i=this.store.put(n,e)):(j(tn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),_s(i)}add(e){return j(tn,"ADD",this.store.name,e,e),_s(this.store.add(e))}get(e){return _s(this.store.get(e)).next(n=>(n===void 0&&(n=null),j(tn,"GET",this.store.name,e,n),n))}delete(e){return j(tn,"DELETE",this.store.name,e),_s(this.store.delete(e))}count(){return j(tn,"COUNT",this.store.name),_s(this.store.count())}J(e,n){const i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const s=r.getAll(i.range);return new O((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}})}{const s=this.cursor(i),a=[];return this.H(s,(o,l)=>{a.push(l)}).next(()=>a)}}Y(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new O((r,s)=>{i.onerror=a=>{s(a.target.error)},i.onsuccess=a=>{r(a.target.result)}})}Z(e,n){j(tn,"DELETE ALL",this.store.name);const i=this.options(e,n);i.X=!1;const r=this.cursor(i);return this.H(r,(s,a,o)=>o.delete())}ee(e,n){let i;n?i=e:(i={},n=e);const r=this.cursor(i);return this.H(r,n)}te(e){const n=this.cursor({});return new O((i,r)=>{n.onerror=s=>{const a=b_(s.target.error);r(a)},n.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():i()}):i()}})}H(e,n){const i=[];return new O((r,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void r();const l=new tL(o),c=n(o.primaryKey,o.value,l);if(c instanceof O){const h=c.catch(f=>(l.done(),O.reject(f)));i.push(h)}l.isDone?r():l.G===null?o.continue():o.continue(l.G)}}).next(()=>O.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function _s(t){return new O((e,n)=>{t.onsuccess=i=>{const r=i.target.result;e(r)},t.onerror=i=>{const r=b_(i.target.error);n(r)}})}let KS=!1;function b_(t){const e=Jn.M(ht());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return KS||(KS=!0,setTimeout(()=>{throw i},0)),i}}return t}const ou="IndexBackfiller";class iL{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){j(ou,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();j(ou,`Documents written: ${n}`)}catch(n){Xr(n)?j(ou,"Ignoring IndexedDB error during index backfill: ",n):await Wr(n)}await this.re(6e4)})}}class rL{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const i=new Set;let r=n,s=!0;return O.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!i.has(a))return j(ou,`Processing collection: ${a}`),this.oe(e,a,r).next(o=>{r-=o,i.add(a)});s=!1})).next(()=>n-r)}oe(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this._e(r,s)).next(o=>(j(ou,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,n,o))).next(()=>a.size)}))}_e(e,n){let i=e;return n.changes.forEach((r,s)=>{const a=GR(s);w_(a,i)>0&&(i=a)}),new gn(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gt.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=-1;function gc(t){return t==null}function Pu(t){return t===0&&1/t==-1/0}function YR(t){return typeof t=="number"&&Number.isInteger(t)&&!Pu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="";function Pt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=QS(e)),e=sL(t.get(n),e);return QS(e)}function sL(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case Vf:n+="";break;default:n+=s}}return n}function QS(t){return t+Vf+""}function $n(t){const e=t.length;if(Y(e>=2,64408,{path:t}),e===2)return Y(t.charAt(0)===Vf&&t.charAt(1)==="",56145,{path:t}),ae.emptyPath();const n=e-2,i=[];let r="";for(let s=0;s<e;){const a=t.indexOf(Vf,s);switch((a<0||a>n)&&Q(50515,{path:t}),t.charAt(a+1)){case"":const o=t.substring(s,a);let l;r.length===0?l=o:(r+=o,l=r,r=""),i.push(l);break;case"":r+=t.substring(s,a),r+="\0";break;case"":r+=t.substring(s,a+1);break;default:Q(61167,{path:t})}s=a+2}return new ae(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="remoteDocuments",yc="owner",fa="owner",Ou="mutationQueues",aL="userId",Vn="mutations",$S="batchId",ws="userMutationsIndex",YS=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(t,e){return[t,Pt(e)]}function WR(t,e,n){return[t,Pt(e),n]}const oL={},mo="documentMutations",Pf="remoteDocumentsV14",lL=["prefixPath","collectionGroup","readTime","documentId"],Uh="documentKeyIndex",uL=["prefixPath","collectionGroup","documentId"],XR="collectionGroupIndex",cL=["collectionGroup","readTime","prefixPath","documentId"],Mu="remoteDocumentGlobal",Ng="remoteDocumentGlobalKey",po="targets",JR="queryTargetsIndex",hL=["canonicalId","targetId"],go="targetDocuments",fL=["targetId","path"],A_="documentTargetsIndex",dL=["path","targetId"],Of="targetGlobalKey",Ns="targetGlobal",ku="collectionParents",mL=["collectionId","parent"],yo="clientMetadata",pL="clientId",wd="bundles",gL="bundleId",bd="namedQueries",yL="name",I_="indexConfiguration",_L="indexId",xg="collectionGroupIndex",vL="collectionGroup",lu="indexState",EL=["indexId","uid"],ZR="sequenceNumberIndex",TL=["uid","sequenceNumber"],uu="indexEntries",SL=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],e1="documentKeyIndex",wL=["indexId","uid","orderedDocumentKey"],Ad="documentOverlays",bL=["userId","collectionPath","documentId"],Vg="collectionPathOverlayIndex",AL=["userId","collectionPath","largestBatchId"],t1="collectionGroupOverlayIndex",IL=["userId","collectionGroup","largestBatchId"],R_="globals",RL="name",n1=[Ou,Vn,mo,ys,po,yc,Ns,go,yo,Mu,ku,wd,bd],CL=[...n1,Ad],i1=[Ou,Vn,mo,Pf,po,yc,Ns,go,yo,Mu,ku,wd,bd,Ad],r1=i1,C_=[...r1,I_,lu,uu],DL=C_,s1=[...C_,R_],NL=s1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg extends QR{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function dt(t,e){const n=H(t);return Jn.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function a1(t,e){const n=[];for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.push(e(t[i],i,t));return n}function o1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e,n){this.comparator=e,this.root=n||bt.EMPTY}insert(e,n){return new xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lh(this.root,e,this.comparator,!0)}}class lh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??bt.RED,this.left=r??bt.EMPTY,this.right=s??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new bt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return bt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,n,i,r,s){return this}insert(e,n,i){return new bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new XS(this.data.getIterator())}getIteratorFrom(e){return new XS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Se)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Se(this.comparator);return n.data=e,n}}class XS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function da(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.fields=e,e.sort(ke.comparator)}static empty(){return new Kt([])}unionWith(e){let n=new Se(ke.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Kt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new l1("Invalid base64 string: "+s):s}}(e);return new Ge(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new Ge(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ge.EMPTY_BYTE_STRING=new Ge("");const VL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pi(t){if(Y(!!t,39018),typeof t=="string"){let e=0;const n=VL.exec(t);if(Y(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Oi(t){return typeof t=="string"?Ge.fromBase64String(t):Ge.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="server_timestamp",c1="__type__",h1="__previous_value__",f1="__local_write_time__";function Id(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[c1])==null?void 0:i.stringValue)===u1}function Rd(t){const e=t.mapValue.fields[h1];return Id(e)?Rd(e):e}function Lu(t){const e=Pi(t.mapValue.fields[f1].timestampValue);return new ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e,n,i,r,s,a,o,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const Uu="(default)";class zr{constructor(e,n){this.projectId=e,this.database=n||Uu}static empty(){return new zr("","")}get isDefaultDatabase(){return this.database===Uu}isEqual(e){return e instanceof zr&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="__type__",d1="__max__",_r={mapValue:{fields:{__type__:{stringValue:d1}}}},N_="__vector__",_o="value",zh={nullValue:"NULL_VALUE"};function Br(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Id(t)?4:m1(t)?9007199254740991:Cd(t)?10:11:Q(28295,{value:t})}function ei(t,e){if(t===e)return!0;const n=Br(t);if(n!==Br(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lu(t).isEqual(Lu(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Pi(r.timestampValue),o=Pi(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Oi(r.bytesValue).isEqual(Oi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Be(r.geoPointValue.latitude)===Be(s.geoPointValue.latitude)&&Be(r.geoPointValue.longitude)===Be(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Be(r.integerValue)===Be(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Be(r.doubleValue),o=Be(s.doubleValue);return a===o?Pu(a)===Pu(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return uo(t.arrayValue.values||[],e.arrayValue.values||[],ei);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},o=s.mapValue.fields||{};if(WS(a)!==WS(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!ei(a[l],o[l])))return!1;return!0}(t,e);default:return Q(52216,{left:t})}}function zu(t,e){return(t.values||[]).find(n=>ei(n,e))!==void 0}function jr(t,e){if(t===e)return 0;const n=Br(t),i=Br(e);if(n!==i)return J(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=Be(s.integerValue||s.doubleValue),l=Be(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return JS(t.timestampValue,e.timestampValue);case 4:return JS(Lu(t),Lu(e));case 5:return Rg(t.stringValue,e.stringValue);case 6:return function(s,a){const o=Oi(s),l=Oi(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const h=J(o[c],l[c]);if(h!==0)return h}return J(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=J(Be(s.latitude),Be(a.latitude));return o!==0?o:J(Be(s.longitude),Be(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ZS(t.arrayValue,e.arrayValue);case 10:return function(s,a){var m,g,w,I;const o=s.fields||{},l=a.fields||{},c=(m=o[_o])==null?void 0:m.arrayValue,h=(g=l[_o])==null?void 0:g.arrayValue,f=J(((w=c==null?void 0:c.values)==null?void 0:w.length)||0,((I=h==null?void 0:h.values)==null?void 0:I.length)||0);return f!==0?f:ZS(c,h)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===_r.mapValue&&a===_r.mapValue)return 0;if(s===_r.mapValue)return 1;if(a===_r.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),c=a.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=Rg(l[f],h[f]);if(m!==0)return m;const g=jr(o[l[f]],c[h[f]]);if(g!==0)return g}return J(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Q(23264,{he:n})}}function JS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return J(t,e);const n=Pi(t),i=Pi(e),r=J(n.seconds,i.seconds);return r!==0?r:J(n.nanos,i.nanos)}function ZS(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=jr(n[r],i[r]);if(s)return s}return J(n.length,i.length)}function vo(t){return Og(t)}function Og(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Pi(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Oi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Og(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${Og(n.fields[a])}`;return r+"}"}(t.mapValue):Q(61005,{value:t})}function Bh(t){switch(Br(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rd(t);return e?16+Bh(e):16;case 5:return 2*t.stringValue.length;case 6:return Oi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+Bh(s),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return Jr(i.fields,(s,a)=>{r+=s.length+Bh(a)}),r}(t.mapValue);default:throw Q(13486,{value:t})}}function js(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Mg(t){return!!t&&"integerValue"in t}function Bu(t){return!!t&&"arrayValue"in t}function ew(t){return!!t&&"nullValue"in t}function tw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jh(t){return!!t&&"mapValue"in t}function Cd(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[D_])==null?void 0:i.stringValue)===N_}function cu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Jr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=cu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=cu(t.arrayValue.values[n]);return e}return{...t}}function m1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===d1}const p1={mapValue:{fields:{[D_]:{stringValue:N_},[_o]:{arrayValue:{}}}}};function OL(t){return"nullValue"in t?zh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?js(zr.empty(),q.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Cd(t)?p1:{mapValue:{}}:Q(35942,{value:t})}function ML(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?js(zr.empty(),q.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?p1:"mapValue"in t?Cd(t)?{mapValue:{}}:_r:Q(61959,{value:t})}function nw(t,e){const n=jr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function iw(t,e){const n=jr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.value=e}static empty(){return new Rt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!jh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=cu(n)}setAll(e){let n=ke.emptyPath(),i={},r=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=o.popLast()}a?i[o.lastSegment()]=cu(a):r.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());jh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ei(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];jh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Jr(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Rt(cu(this.value))}}function g1(t){const e=[];return Jr(t.fields,(n,i)=>{const r=new ke([n]);if(jh(i)){const s=g1(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new Kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n,i,r,s,a,o){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Me(e,0,W.min(),W.min(),W.min(),Rt.empty(),0)}static newFoundDocument(e,n,i,r){return new Me(e,1,n,W.min(),i,r,0)}static newNoDocument(e,n){return new Me(e,2,n,W.min(),W.min(),Rt.empty(),0)}static newUnknownDocument(e,n){return new Me(e,3,n,W.min(),W.min(),Rt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Me&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Me(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n){this.position=e,this.inclusive=n}}function rw(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=q.comparator(q.fromName(a.referenceValue),n.key):i=jr(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function sw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ei(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n="asc"){this.field=e,this.dir=n}}function kL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{}class fe extends y1{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new LL(e,n,i):n==="array-contains"?new BL(e,i):n==="in"?new w1(e,i):n==="not-in"?new jL(e,i):n==="array-contains-any"?new FL(e,i):new fe(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new UL(e,i):new zL(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(jr(n,this.value)):n!==null&&Br(this.value)===Br(n)&&this.matchesComparison(jr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ee extends y1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ee(e,n)}matches(e){return Eo(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Eo(t){return t.op==="and"}function kg(t){return t.op==="or"}function x_(t){return _1(t)&&Eo(t)}function _1(t){for(const e of t.filters)if(e instanceof Ee)return!1;return!0}function Lg(t){if(t instanceof fe)return t.field.canonicalString()+t.op.toString()+vo(t.value);if(x_(t))return t.filters.map(e=>Lg(e)).join(",");{const e=t.filters.map(n=>Lg(n)).join(",");return`${t.op}(${e})`}}function v1(t,e){return t instanceof fe?function(i,r){return r instanceof fe&&i.op===r.op&&i.field.isEqual(r.field)&&ei(i.value,r.value)}(t,e):t instanceof Ee?function(i,r){return r instanceof Ee&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,o)=>s&&v1(a,r.filters[o]),!0):!1}(t,e):void Q(19439)}function E1(t,e){const n=t.filters.concat(e);return Ee.create(n,t.op)}function T1(t){return t instanceof fe?function(n){return`${n.field.canonicalString()} ${n.op} ${vo(n.value)}`}(t):t instanceof Ee?function(n){return n.op.toString()+" {"+n.getFilters().map(T1).join(" ,")+"}"}(t):"Filter"}class LL extends fe{constructor(e,n,i){super(e,n,i),this.key=q.fromName(i.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class UL extends fe{constructor(e,n){super(e,"in",n),this.keys=S1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zL extends fe{constructor(e,n){super(e,"not-in",n),this.keys=S1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function S1(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>q.fromName(i.referenceValue))}class BL extends fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bu(n)&&zu(n.arrayValue,this.value)}}class w1 extends fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zu(this.value.arrayValue,n)}}class jL extends fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zu(this.value.arrayValue,n)}}class FL extends fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>zu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e,n=null,i=[],r=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function Ug(t,e=null,n=[],i=[],r=null,s=null,a=null){return new qL(t,e,n,i,r,s,a)}function Fs(t){const e=H(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Lg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),gc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>vo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>vo(i)).join(",")),e.Te=n}return e.Te}function _c(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!v1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sw(t.startAt,e.startAt)&&sw(t.endAt,e.endAt)}function Mf(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function kf(t,e){return t.filters.filter(n=>n instanceof fe&&n.field.isEqual(e))}function aw(t,e,n){let i=zh,r=!0;for(const s of kf(t,e)){let a=zh,o=!0;switch(s.op){case"<":case"<=":a=OL(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=zh}nw({value:i,inclusive:r},{value:a,inclusive:o})<0&&(i=a,r=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];nw({value:i,inclusive:r},{value:a,inclusive:n.inclusive})<0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}function ow(t,e,n){let i=_r,r=!0;for(const s of kf(t,e)){let a=_r,o=!0;switch(s.op){case">=":case">":a=ML(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=_r}iw({value:i,inclusive:r},{value:a,inclusive:o})>0&&(i=a,r=o)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const a=n.position[s];iw({value:i,inclusive:r},{value:a,inclusive:n.inclusive})>0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n=null,i=[],r=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function b1(t,e,n,i,r,s,a,o){return new zi(t,e,n,i,r,s,a,o)}function Ko(t){return new zi(t)}function lw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function V_(t){return t.collectionGroup!==null}function $a(t){const e=H(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Se(ke.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new ju(s,i))}),n.has(ke.keyField().canonicalString())||e.Ie.push(new ju(ke.keyField(),i))}return e.Ie}function Ot(t){const e=H(t);return e.Ee||(e.Ee=I1(e,$a(t))),e.Ee}function A1(t){const e=H(t);return e.de||(e.de=I1(e,t.explicitOrderBy)),e.de}function I1(t,e){if(t.limitType==="F")return Ug(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new ju(r.field,s)});const n=t.endAt?new Fr(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Fr(t.startAt.position,t.startAt.inclusive):null;return Ug(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function zg(t,e){const n=t.filters.concat([e]);return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Lf(t,e,n){return new zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vc(t,e){return _c(Ot(t),Ot(e))&&t.limitType===e.limitType}function R1(t){return`${Fs(Ot(t))}|lt:${t.limitType}`}function wa(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>T1(r)).join(", ")}]`),gc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>vo(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>vo(r)).join(",")),`Target(${i})`}(Ot(t))}; limitType=${t.limitType})`}function Ec(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):q.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of $a(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,o,l){const c=rw(a,o,l);return a.inclusive?c<=0:c<0}(i.startAt,$a(i),r)||i.endAt&&!function(a,o,l){const c=rw(a,o,l);return a.inclusive?c>=0:c>0}(i.endAt,$a(i),r))}(t,e)}function C1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function D1(t){return(e,n)=>{let i=!1;for(const r of $a(t)){const s=HL(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function HL(t,e,n){const i=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,a,o){const l=a.data.field(s),c=o.data.field(s);return l!==null&&c!==null?jr(l,c):Q(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Q(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Jr(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return o1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL=new xe(q.comparator);function Qt(){return GL}const N1=new xe(q.comparator);function jl(...t){let e=N1;for(const n of t)e=e.insert(n.key,n);return e}function x1(t){let e=N1;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Yn(){return hu()}function V1(){return hu()}function hu(){return new Bi(t=>t.toString(),(t,e)=>t.isEqual(e))}const KL=new xe(q.comparator),QL=new Se(q.comparator);function ne(...t){let e=QL;for(const n of t)e=e.add(n);return e}const $L=new Se(J);function P_(){return $L}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pu(e)?"-0":e}}function P1(t){return{integerValue:""+t}}function O1(t,e){return YR(e)?P1(e):O_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(){this._=void 0}}function YL(t,e,n){return t instanceof To?function(r,s){const a={fields:{[c1]:{stringValue:u1},[f1]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Id(s)&&(s=Rd(s)),s&&(a.fields[h1]=s),{mapValue:a}}(n,e):t instanceof qs?k1(t,e):t instanceof Hs?L1(t,e):function(r,s){const a=M1(r,s),o=uw(a)+uw(r.Ae);return Mg(a)&&Mg(r.Ae)?P1(o):O_(r.serializer,o)}(t,e)}function WL(t,e,n){return t instanceof qs?k1(t,e):t instanceof Hs?L1(t,e):n}function M1(t,e){return t instanceof So?function(i){return Mg(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class To extends Dd{}class qs extends Dd{constructor(e){super(),this.elements=e}}function k1(t,e){const n=U1(e);for(const i of t.elements)n.some(r=>ei(r,i))||n.push(i);return{arrayValue:{values:n}}}class Hs extends Dd{constructor(e){super(),this.elements=e}}function L1(t,e){let n=U1(e);for(const i of t.elements)n=n.filter(r=>!ei(r,i));return{arrayValue:{values:n}}}class So extends Dd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function uw(t){return Be(t.integerValue||t.doubleValue)}function U1(t){return Bu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n){this.field=e,this.transform=n}}function XL(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof qs&&r instanceof qs||i instanceof Hs&&r instanceof Hs?uo(i.elements,r.elements,ei):i instanceof So&&r instanceof So?ei(i.Ae,r.Ae):i instanceof To&&r instanceof To}(t.transform,e.transform)}class JL{constructor(e,n){this.version=e,this.transformResults=n}}class je{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new je}static exists(e){return new je(void 0,e)}static updateTime(e){return new je(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nd{}function z1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $o(t.key,je.none()):new Qo(t.key,t.data,je.none());{const n=t.data,i=Rt.empty();let r=new Se(ke.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new ji(t.key,i,new Kt(r.toArray()),je.none())}}function ZL(t,e,n){t instanceof Qo?function(r,s,a){const o=r.value.clone(),l=hw(r.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof ji?function(r,s,a){if(!Fh(r.precondition,s))return void s.convertToUnknownDocument(a.version);const o=hw(r.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(B1(r)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function fu(t,e,n,i){return t instanceof Qo?function(s,a,o,l){if(!Fh(s.precondition,a))return o;const c=s.value.clone(),h=fw(s.fieldTransforms,l,a);return c.setAll(h),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof ji?function(s,a,o,l){if(!Fh(s.precondition,a))return o;const c=fw(s.fieldTransforms,l,a),h=a.data;return h.setAll(B1(s)),h.setAll(c),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,i):function(s,a,o){return Fh(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function e6(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=M1(i.transform,r||null);s!=null&&(n===null&&(n=Rt.empty()),n.set(i.field,s))}return n||null}function cw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&uo(i,r,(s,a)=>XL(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qo extends Nd{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ji extends Nd{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function B1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function hw(t,e,n){const i=new Map;Y(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,o=e.data.field(s.field);i.set(s.field,WL(a,o,n[r]))}return i}function fw(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,YL(s,a,e))}return i}class $o extends Nd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class M_ extends Nd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&ZL(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=fu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=fu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=V1();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(r.key)?null:o;const l=z1(a,o);l!==null&&i.set(r.key,l),a.isValidDocument()||a.convertToNoDocument(W.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,(n,i)=>cw(n,i))&&uo(this.baseMutations,e.baseMutations,(n,i)=>cw(n,i))}}class L_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Y(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return KL}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new L_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n,i){this.alias=e,this.aggregateType=n,this.fieldPath=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,me;function F1(t){switch(t){case k.OK:return Q(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return Q(15467,{code:t})}}function q1(t){if(t===void 0)return We("GRPC error has no .code"),k.UNKNOWN;switch(t){case tt.OK:return k.OK;case tt.CANCELLED:return k.CANCELLED;case tt.UNKNOWN:return k.UNKNOWN;case tt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case tt.INTERNAL:return k.INTERNAL;case tt.UNAVAILABLE:return k.UNAVAILABLE;case tt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case tt.NOT_FOUND:return k.NOT_FOUND;case tt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case tt.ABORTED:return k.ABORTED;case tt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case tt.DATA_LOSS:return k.DATA_LOSS;default:return Q(39323,{code:t})}}(me=tt||(tt={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let du=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=new Vr([4294967295,4294967295],0);function dw(t){const e=H1().encode(t),n=new xR;return n.update(e),new Uint8Array(n.digest())}function mw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Vr([n,i],0),new Vr([r,s],0)]}class z_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Fl(`Invalid padding: ${n}`);if(i<0)throw new Fl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Fl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Fl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Vr.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(Vr.fromNumber(i)));return r.compare(n6)===1&&(r=new Vr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=dw(e),[i,r]=mw(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new z_(s,r,n);return i.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const n=dw(e),[i,r]=mw(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(i,r,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Fl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,wc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Sc(W.min(),r,new xe(J),Qt(),ne())}}class wc{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new wc(i,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class G1{constructor(e,n){this.targetId=e,this.Ce=n}}class K1{constructor(e,n,i=Ge.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class pw{constructor(){this.ve=0,this.Fe=gw(),this.Me=Ge.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ne(),n=ne(),i=ne();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Q(38017,{changeType:s})}}),new wc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=gw()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Y(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class i6{constructor(e){this.Ge=e,this.ze=new Map,this.je=Qt(),this.Je=uh(),this.He=uh(),this.Ye=new xe(J)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const s=r.target;if(Mf(s))if(i===0){const a=new q(s.path);this.et(n,a,Me.newNoDocument(a,W.min()))}else Y(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}du==null||du.lt(function(h,f,m,g,w){var v,y,E;const I={localCacheCount:h,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},N=f.unchangedNames;return N&&(I.bloomFilter={applied:w===0,hashCount:(N==null?void 0:N.hashCount)??0,bitmapLength:((y=(v=N==null?void 0:N.bits)==null?void 0:v.bitmap)==null?void 0:y.length)??0,padding:((E=N==null?void 0:N.bits)==null?void 0:E.padding)??0,mightContain:x=>(g==null?void 0:g.mightContain(x))??!1}),I}(a,e.Ce,this.Ge.ht(),o,l))}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,o;try{a=Oi(i).toUint8Array()}catch(l){if(l instanceof l1)return pn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new z_(a,r,s)}catch(l){return pn(l instanceof Fl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(n,s,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&Mf(o.target)){const l=new q(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,Me.newNoDocument(l,e))}s.Be&&(n.set(a,s.ke()),s.qe())}});let i=ne();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(i=i.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const r=new Sc(e,n,this.Ye,this.je,i);return this.je=Qt(),this.Je=uh(),this.He=uh(),this.Ye=new xe(J),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new pw,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Se(J),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Se(J),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new pw),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function uh(){return new xe(q.comparator)}function gw(){return new xe(q.comparator)}const r6={asc:"ASCENDING",desc:"DESCENDING"},s6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a6={and:"AND",or:"OR"};class o6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bg(t,e){return t.useProto3Json||gc(e)?e:{value:e}}function wo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Q1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function l6(t,e){return wo(t,e.toTimestamp())}function Je(t){return Y(!!t,49232),W.fromTimestamp(function(n){const i=Pi(n);return new ye(i.seconds,i.nanos)}(t))}function B_(t,e){return jg(t,e).canonicalString()}function jg(t,e){const n=function(r){return new ae(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $1(t){const e=ae.fromString(t);return Y(iC(e),10190,{key:e.toString()}),e}function Fu(t,e){return B_(t.databaseId,e.path)}function Zn(t,e){const n=$1(e);if(n.get(1)!==t.databaseId.projectId)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(X1(n))}function Y1(t,e){return B_(t.databaseId,e)}function W1(t){const e=$1(t);return e.length===4?ae.emptyPath():X1(e)}function Fg(t){return new ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function X1(t){return Y(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function yw(t,e,n){return{name:Fu(t,e),fields:n.value.mapValue.fields}}function xd(t,e,n){const i=Zn(t,e.name),r=Je(e.updateTime),s=e.createTime?Je(e.createTime):W.min(),a=new Rt({mapValue:{fields:e.fields}}),o=Me.newFoundDocument(i,r,s,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function u6(t,e){return"found"in e?function(i,r){Y(!!r.found,43571),r.found.name,r.found.updateTime;const s=Zn(i,r.found.name),a=Je(r.found.updateTime),o=r.found.createTime?Je(r.found.createTime):W.min(),l=new Rt({mapValue:{fields:r.found.fields}});return Me.newFoundDocument(s,a,o,l)}(t,e):"missing"in e?function(i,r){Y(!!r.missing,3894),Y(!!r.readTime,22933);const s=Zn(i,r.missing),a=Je(r.readTime);return Me.newNoDocument(s,a)}(t,e):Q(7234,{result:e})}function c6(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Q(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Y(h===void 0||typeof h=="string",58123),Ge.fromBase64String(h||"")):(Y(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ge.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const h=c.code===void 0?k.UNKNOWN:q1(c.code);return new z(h,c.message||"")}(a);n=new K1(i,r,s,o||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Zn(t,i.document.name),s=Je(i.document.updateTime),a=i.document.createTime?Je(i.document.createTime):W.min(),o=new Rt({mapValue:{fields:i.document.fields}}),l=Me.newFoundDocument(r,s,a,o),c=i.targetIds||[],h=i.removedTargetIds||[];n=new qh(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Zn(t,i.document),s=i.readTime?Je(i.readTime):W.min(),a=Me.newNoDocument(r,s),o=i.removedTargetIds||[];n=new qh([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Zn(t,i.document),s=i.removedTargetIds||[];n=new qh([],s,r,null)}else{if(!("filter"in e))return Q(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new t6(r,s),o=i.targetId;n=new G1(o,a)}}return n}function qu(t,e){let n;if(e instanceof Qo)n={update:yw(t,e.key,e.value)};else if(e instanceof $o)n={delete:Fu(t,e.key)};else if(e instanceof ji)n={update:yw(t,e.key,e.data),updateMask:g6(e.fieldMask)};else{if(!(e instanceof M_))return Q(16599,{Vt:e.type});n={verify:Fu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const o=a.transform;if(o instanceof To)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof qs)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Hs)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof So)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw Q(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:l6(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q(27497)}(t,e.precondition)),n}function qg(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?je.updateTime(Je(s.updateTime)):s.exists!==void 0?je.exists(s.exists):je.none()}(e.currentDocument):je.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(a,o){let l=null;if("setToServerValue"in o)Y(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new To;else if("appendMissingElements"in o){const h=o.appendMissingElements.values||[];l=new qs(h)}else if("removeAllFromArray"in o){const h=o.removeAllFromArray.values||[];l=new Hs(h)}else"increment"in o?l=new So(a,o.increment):Q(16584,{proto:o});const c=ke.fromServerFormat(o.fieldPath);return new Tc(c,l)}(t,r)):[];if(e.update){e.update.name;const r=Zn(t,e.update.name),s=new Rt({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(l){const c=l.fieldPaths||[];return new Kt(c.map(h=>ke.fromServerFormat(h)))}(e.updateMask);return new ji(r,s,a,n,i)}return new Qo(r,s,n,i)}if(e.delete){const r=Zn(t,e.delete);return new $o(r,n)}if(e.verify){const r=Zn(t,e.verify);return new M_(r,n)}return Q(1463,{proto:e})}function h6(t,e){return t&&t.length>0?(Y(e!==void 0,14353),t.map(n=>function(r,s){let a=r.updateTime?Je(r.updateTime):Je(s);return a.isEqual(W.min())&&(a=Je(s)),new JL(a,r.transformResults||[])}(n,e))):[]}function J1(t,e){return{documents:[Y1(t,e.path)]}}function Vd(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Y1(t,r);const s=function(c){if(c.length!==0)return nC(Ee.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:cr(m.field),direction:d6(m.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Bg(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:r}}function Z1(t,e,n,i){const{ft:r,parent:s}=Vd(t,e),a={},o=[];let l=0;return n.forEach(c=>{const h=i?c.alias:"aggregate_"+l++;a[h]=c.alias,c.aggregateType==="count"?o.push({alias:h,count:{}}):c.aggregateType==="avg"?o.push({alias:h,avg:{field:cr(c.fieldPath)}}):c.aggregateType==="sum"&&o.push({alias:h,sum:{field:cr(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:r.structuredQuery},parent:r.parent},gt:a,parent:s}}function eC(t){let e=W1(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Y(i===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const m=tC(f);return m instanceof Ee&&x_(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(m=>function(w){return new ju(ba(w.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(n.orderBy));let o=null;n.limit&&(o=function(f){let m;return m=typeof f=="object"?f.value:f,gc(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,g=f.values||[];return new Fr(g,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,g=f.values||[];return new Fr(g,m)}(n.endAt)),b1(e,r,a,s,o,"F",l,c)}function f6(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ba(n.unaryFilter.field);return fe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ba(n.unaryFilter.field);return fe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ba(n.unaryFilter.field);return fe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ba(n.unaryFilter.field);return fe.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(t):t.fieldFilter!==void 0?function(n){return fe.create(ba(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ee.create(n.compositeFilter.filters.map(i=>tC(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(t):Q(30097,{filter:t})}function d6(t){return r6[t]}function m6(t){return s6[t]}function p6(t){return a6[t]}function cr(t){return{fieldPath:t.canonicalString()}}function ba(t){return ke.fromServerFormat(t.fieldPath)}function nC(t){return t instanceof fe?function(n){if(n.op==="=="){if(tw(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NAN"}};if(ew(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tw(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NOT_NAN"}};if(ew(n.value))return{unaryFilter:{field:cr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cr(n.field),op:m6(n.op),value:n.value}}}(t):t instanceof Ee?function(n){const i=n.getFilters().map(r=>nC(r));return i.length===1?i[0]:{compositeFilter:{op:p6(n.op),filters:i}}}(t):Q(54877,{filter:t})}function g6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function iC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n,i,r,s=W.min(),a=W.min(),o=Ge.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.yt=e}}function y6(t,e){let n;if(e.document)n=xd(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=q.fromSegments(e.noDocument.path),r=Ks(e.noDocument.readTime);n=Me.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Q(56709);{const i=q.fromSegments(e.unknownDocument.path),r=Ks(e.unknownDocument.version);n=Me.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){const s=new ye(r[0],r[1]);return W.fromTimestamp(s)}(e.readTime)),n}function _w(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Uf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,a){return{name:Fu(s,a.key),fields:a.data.value.mapValue.fields,updateTime:wo(s,a.version.toTimestamp()),createTime:wo(s,a.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Gs(e.version)};else{if(!e.isUnknownDocument())return Q(57904,{document:e});i.unknownDocument={path:n.path.toArray(),version:Gs(e.version)}}return i}function Uf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Gs(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ks(t){const e=new ye(t.seconds,t.nanoseconds);return W.fromTimestamp(e)}function vs(t,e){const n=(e.baseMutations||[]).map(s=>qg(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const i=e.mutations.map(s=>qg(t.yt,s)),r=ye.fromMillis(e.localWriteTimeMs);return new k_(e.batchId,r,n,i)}function ql(t){const e=Ks(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ks(t.lastLimboFreeSnapshotVersion):W.min();let i;return i=function(s){return s.documents!==void 0}(t.query)?function(s){const a=s.documents.length;return Y(a===1,1966,{count:a}),Ot(Ko(W1(s.documents[0])))}(t.query):function(s){return Ot(eC(s))}(t.query),new gi(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ge.fromBase64String(t.resumeToken))}function sC(t,e){const n=Gs(e.snapshotVersion),i=Gs(e.lastLimboFreeSnapshotVersion);let r;r=Mf(e.target)?J1(t.yt,e.target):Vd(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fs(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Pd(t){const e=eC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lf(e,e.limit,"L"):e}function cp(t,e){return new U_(e.largestBatchId,qg(t.yt,e.overlayMutation))}function vw(t,e){const n=e.path.lastSegment();return[t,Pt(e.path.popLast()),n]}function Ew(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:Gs(i.readTime),documentKey:Pt(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{getBundleMetadata(e,n){return Tw(e).get(n).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:Ks(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,n){return Tw(e).put(function(r){return{bundleId:r.id,createTime:Gs(Je(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return Sw(e).get(n).next(i=>{if(i)return function(s){return{name:s.name,query:Pd(s.bundledQuery),readTime:Ks(s.readTime)}}(i)})}saveNamedQuery(e,n){return Sw(e).put(function(r){return{name:r.name,readTime:Gs(Je(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function Tw(t){return dt(t,wd)}function Sw(t){return dt(t,bd)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const i=n.uid||"";return new Od(e,i)}getOverlay(e,n){return Rl(e).get(vw(this.userId,n)).next(i=>i?cp(this.serializer,i):null)}getOverlays(e,n){const i=Yn();return O.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){const r=[];return i.forEach((s,a)=>{const o=new U_(n,a);r.push(this.St(e,o))}),O.waitFor(r)}removeOverlaysForBatchId(e,n,i){const r=new Set;n.forEach(a=>r.add(Pt(a.getCollectionPath())));const s=[];return r.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);s.push(Rl(e).Z(Vg,o))}),O.waitFor(s)}getOverlaysForCollection(e,n,i){const r=Yn(),s=Pt(n),a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Rl(e).J(Vg,a).next(o=>{for(const l of o){const c=cp(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,n,i,r){const s=Yn();let a;const o=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Rl(e).ee({index:t1,range:o},(l,c,h)=>{const f=cp(this.serializer,c);s.size()<r||f.largestBatchId===a?(s.set(f.getKey(),f),a=f.largestBatchId):h.done()}).next(()=>s)}St(e,n){return Rl(e).put(function(r,s,a){const[o,l,c]=vw(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:qu(r.yt,a.mutation)}}(this.serializer,this.userId,n))}}function Rl(t){return dt(t,Ad)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{bt(e){return dt(e,R_)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const i=n==null?void 0:n.value;return i?Ge.fromUint8Array(i):Ge.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Be(e.integerValue));else if("doubleValue"in e){const i=Be(e.doubleValue);isNaN(i)?this.Ft(n,13):(this.Ft(n,15),Pu(i)?n.Mt(0):n.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(n,20),typeof i=="string"&&(i=Pi(i)),n.xt(`${i.seconds||""}`),n.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Oi(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(n,45),n.Mt(i.latitude||0),n.Mt(i.longitude||0)}else"mapValue"in e?m1(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Cd(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Q(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const i=e.fields||{};this.Ft(n,55);for(const r of Object.keys(i))this.Ot(r,n),this.Ct(i[r],n)}kt(e,n){var a,o;const i=e.fields||{};this.Ft(n,53);const r=_o,s=((o=(a=i[r].arrayValue)==null?void 0:a.values)==null?void 0:o.length)||0;this.Ft(n,15),n.Mt(Be(s)),this.Ot(r,n),this.Ct(i[r],n)}Qt(e,n){const i=e.values||[];this.Ft(n,50);for(const r of i)this.Ct(r,n)}Lt(e,n){this.Ft(n,37),q.fromName(e).path.forEach(i=>{this.Ft(n,60),this.Ut(i,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Es.Kt=new Es;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=255;function E6(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function ww(t){const e=64-function(i){let r=0;for(let s=0;s<8;++s){const a=E6(255&i[s]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}class T6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Gt(i.value),i=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Jt(i.value),i=n.next();this.Ht()}Yt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const r=n.codePointAt(0);this.Gt(240|r>>>18),this.Gt(128|63&r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r)}}this.zt()}Zt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const r=n.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Ht()}Xt(e){const n=this.en(e),i=ww(n);this.tn(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}nn(e){const n=this.en(e),i=ww(n);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}rn(){this.sn(ma),this.sn(255)}_n(){this.an(ma),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),i=!!(128&n[0]);n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===ma?(this.sn(ma),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===ma?(this.an(ma),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class S6{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class w6{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Cl{constructor(){this.cn=new T6,this.ln=new S6(this.cn),this.hn=new w6(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n,i,r){this.Tn=e,this.In=n,this.En=i,this.dn=r}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.dn,0),n!==e?i.set([0],this.dn.length):++i[i.length-1],new Ts(this.Tn,this.In,this.En,i)}Rn(e,n,i){return{indexId:this.Tn,uid:e,arrayValue:Hh(this.En),directionalValue:Hh(this.dn),orderedDocumentKey:Hh(n),documentKey:i.path.toArray()}}Vn(e,n,i){const r=this.Rn(e,n,i);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function Ji(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=bw(t.En,e.En),n!==0?n:(n=bw(t.dn,e.dn),n!==0?n:q.comparator(t.In,e.In)))}function bw(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}function Hh(t){return HI()?function(n){let i="";for(let r=0;r<n.length;r++)i+=String.fromCharCode(n[r]);return i}(t):t}function Aw(t){return typeof t!="string"?t:function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(t)}class Iw{constructor(e){this.mn=new Se((n,i)=>ke.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const i=n;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(Y(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Dg(e);if(n!==void 0&&!this.wn(n))return!1;const i=gs(e);let r=new Set,s=0,a=0;for(;s<i.length&&this.wn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!r.has(o.field.canonicalString())){const l=i[s];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++s}for(;s<i.length;++s){const o=i[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new Se(ke.comparator);const n=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new Ds(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new Ds(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new Ds(i.field,i.dir==="asc"?0:1)));return new ho(ho.UNKNOWN_ID,this.collectionId,n,fo.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(t){var n,i;if(Y(t instanceof fe||t instanceof Ee,20012),t instanceof fe){if(t instanceof w1){const r=((i=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:i.map(s=>fe.create(t.field,"==",s)))||[];return Ee.create(r,"or")}return t}const e=t.filters.map(r=>aC(r));return Ee.create(e,t.op)}function b6(t){if(t.getFilters().length===0)return[];const e=Kg(aC(t));return Y(oC(e),7391),Hg(e)||Gg(e)?[e]:e.getFilters()}function Hg(t){return t instanceof fe}function Gg(t){return t instanceof Ee&&x_(t)}function oC(t){return Hg(t)||Gg(t)||function(n){if(n instanceof Ee&&kg(n)){for(const i of n.getFilters())if(!Hg(i)&&!Gg(i))return!1;return!0}return!1}(t)}function Kg(t){if(Y(t instanceof fe||t instanceof Ee,34018),t instanceof fe)return t;if(t.filters.length===1)return Kg(t.filters[0]);const e=t.filters.map(i=>Kg(i));let n=Ee.create(e,t.op);return n=zf(n),oC(n)?n:(Y(n instanceof Ee,64498),Y(Eo(n),40251),Y(n.filters.length>1,57927),n.filters.reduce((i,r)=>j_(i,r)))}function j_(t,e){let n;return Y(t instanceof fe||t instanceof Ee,38388),Y(e instanceof fe||e instanceof Ee,25473),n=t instanceof fe?e instanceof fe?function(r,s){return Ee.create([r,s],"and")}(t,e):Rw(t,e):e instanceof fe?Rw(e,t):function(r,s){if(Y(r.filters.length>0&&s.filters.length>0,48005),Eo(r)&&Eo(s))return E1(r,s.getFilters());const a=kg(r)?r:s,o=kg(r)?s:r,l=a.filters.map(c=>j_(c,o));return Ee.create(l,"or")}(t,e),zf(n)}function Rw(t,e){if(Eo(e))return E1(e,t.getFilters());{const n=e.filters.map(i=>j_(t,i));return Ee.create(n,"or")}}function zf(t){if(Y(t instanceof fe||t instanceof Ee,11850),t instanceof fe)return t;const e=t.getFilters();if(e.length===1)return zf(e[0]);if(_1(t))return t;const n=e.map(r=>zf(r)),i=[];return n.forEach(r=>{r instanceof fe?i.push(r):r instanceof Ee&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Ee.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(){this.Cn=new F_}addToCollectionParentIndex(e,n){return this.Cn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(gn.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(gn.min())}updateCollectionGroup(e,n,i){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class F_{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Se(ae.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Se(ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="IndexedDbIndexManager",ch=new Uint8Array(0);class I6{constructor(e,n){this.databaseId=n,this.vn=new F_,this.Fn=new Bi(i=>Fs(i),(i,r)=>_c(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:i,parent:Pt(r)};return Dw(e).put(s)}return O.resolve()}getCollectionParents(e,n){const i=[],r=IDBKeyRange.bound([n,""],[BR(n),""],!1,!0);return Dw(e).J(r).next(s=>{for(const a of s){if(a.collectionId!==n)break;i.push($n(a.parent))}return i})}addFieldIndex(e,n){const i=Dl(e),r=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete r.indexId;const s=i.add(r);if(n.indexState){const a=ga(e);return s.next(o=>{a.put(Ew(o,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const i=Dl(e),r=ga(e),s=pa(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Dl(e),i=pa(e),r=ga(e);return n.Z().next(()=>i.Z()).next(()=>r.Z())}createTargetIndexes(e,n){return O.forEach(this.Mn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){const s=new Iw(i).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const i=pa(e);let r=!0;const s=new Map;return O.forEach(this.Mn(n),a=>this.xn(e,a).next(o=>{r&&(r=!!o),s.set(a,o)})).next(()=>{if(r){let a=ne();const o=[];return O.forEach(s,(l,c)=>{j(Cw,`Using index ${function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(x=>`${x.fieldPath}:${x.kind}`).join(",")}`}(l)} to execute ${Fs(n)}`);const h=function(E,x){const U=Dg(x);if(U===void 0)return null;for(const F of kf(E,U.fieldPath))switch(F.op){case"array-contains-any":return F.value.arrayValue.values||[];case"array-contains":return[F.value]}return null}(c,l),f=function(E,x){const U=new Map;for(const F of gs(x))for(const S of kf(E,F.fieldPath))switch(S.op){case"==":case"in":U.set(F.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return U.set(F.fieldPath.canonicalString(),S.value),Array.from(U.values())}return null}(c,l),m=function(E,x){const U=[];let F=!0;for(const S of gs(x)){const T=S.kind===0?aw(E,S.fieldPath,E.startAt):ow(E,S.fieldPath,E.startAt);U.push(T.value),F&&(F=T.inclusive)}return new Fr(U,F)}(c,l),g=function(E,x){const U=[];let F=!0;for(const S of gs(x)){const T=S.kind===0?ow(E,S.fieldPath,E.endAt):aw(E,S.fieldPath,E.endAt);U.push(T.value),F&&(F=T.inclusive)}return new Fr(U,F)}(c,l),w=this.On(l,c,m),I=this.On(l,c,g),N=this.Nn(l,c,f),v=this.Bn(l.indexId,h,w,m.inclusive,I,g.inclusive,N);return O.forEach(v,y=>i.Y(y,n.limit).next(E=>{E.forEach(x=>{const U=q.fromSegments(x.documentKey);a.has(U)||(a=a.add(U),o.push(U))})}))}).next(()=>o)}return O.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=b6(Ee.create(e.filters,"and")).map(i=>Ug(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,i,r,s,a,o){const l=(n!=null?n.length:1)*Math.max(i.length,s.length),c=l/(n!=null?n.length:1),h=[];for(let f=0;f<l;++f){const m=n?this.Ln(n[f/c]):ch,g=this.kn(e,m,i[f%c],r),w=this.qn(e,m,s[f%c],a),I=o.map(N=>this.kn(e,m,N,!0));h.push(...this.createRange(g,w,I))}return h}kn(e,n,i,r){const s=new Ts(e,q.empty(),n,i);return r?s:s.An()}qn(e,n,i,r){const s=new Ts(e,q.empty(),n,i);return r?s.An():s}xn(e,n){const i=new Iw(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let a=null;for(const o of s)i.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,n){let i=2;const r=this.Mn(n);return O.forEach(r,s=>this.xn(e,s).next(a=>{a?i!==0&&a.fields.length<function(l){let c=new Se(ke.comparator),h=!1;for(const f of l.filters)for(const m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:c=c.add(m.field));for(const f of l.orderBy)f.field.isKeyField()||(c=c.add(f.field));return c.size+(h?1:0)}(s)&&(i=1):i=0})).next(()=>function(a){return a.limit!==null}(n)&&r.length>1&&i===2?1:i)}Qn(e,n){const i=new Cl;for(const r of gs(e)){const s=n.data.field(r.fieldPath);if(s==null)return null;const a=i.Pn(r.kind);Es.Kt.Dt(s,a)}return i.un()}Ln(e){const n=new Cl;return Es.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const i=new Cl;return Es.Kt.Dt(js(this.databaseId,n),i.Pn(function(s){const a=gs(s);return a.length===0?0:a[a.length-1].kind}(e))),i.un()}Nn(e,n,i){if(i===null)return[];let r=[];r.push(new Cl);let s=0;for(const a of gs(e)){const o=i[s++];for(const l of r)if(this.Un(n,a.fieldPath)&&Bu(o))r=this.Kn(r,a,o);else{const c=l.Pn(a.kind);Es.Kt.Dt(o,c)}}return this.Wn(r)}On(e,n,i){return this.Nn(e,n,i.position)}Wn(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].un();return n}Kn(e,n,i){const r=[...e],s=[];for(const a of i.arrayValue.values||[])for(const o of r){const l=new Cl;l.seed(o.un()),Es.Kt.Dt(a,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(i=>i instanceof fe&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){const i=Dl(e),r=ga(e);return(n?i.J(xg,IDBKeyRange.bound(n,n)):i.J()).next(s=>{const a=[];return O.forEach(s,o=>r.get([o.indexId,this.uid]).next(l=>{a.push(function(h,f){const m=f?new fo(f.sequenceNumber,new gn(Ks(f.readTime),new q($n(f.documentKey)),f.largestBatchId)):fo.empty(),g=h.fields.map(([w,I])=>new Ds(ke.fromServerFormat(w),I));return new ho(h.indexId,h.collectionGroup,g,m)}(o,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:J(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){const r=Dl(e),s=ga(e);return this.Gn(e).next(a=>r.J(xg,IDBKeyRange.bound(n,n)).next(o=>O.forEach(o,l=>s.put(Ew(l.indexId,this.uid,a,i)))))}updateIndexEntries(e,n){const i=new Map;return O.forEach(n,(r,s)=>{const a=i.get(r.collectionGroup);return(a?O.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(o=>(i.set(r.collectionGroup,o),O.forEach(o,l=>this.zn(e,r,l).next(c=>{const h=this.jn(s,l);return c.isEqual(h)?O.resolve():this.Jn(e,s,l,c,h)}))))})}Hn(e,n,i,r){return pa(e).put(r.Rn(this.uid,this.$n(i,n.key),n.key))}Yn(e,n,i,r){return pa(e).delete(r.Vn(this.uid,this.$n(i,n.key),n.key))}zn(e,n,i){const r=pa(e);let s=new Se(Ji);return r.ee({index:e1,range:IDBKeyRange.only([i.indexId,this.uid,Hh(this.$n(i,n))])},(a,o)=>{s=s.add(new Ts(i.indexId,n,Aw(o.arrayValue),Aw(o.directionalValue)))}).next(()=>s)}jn(e,n){let i=new Se(Ji);const r=this.Qn(n,e);if(r==null)return i;const s=Dg(n);if(s!=null){const a=e.data.field(s.fieldPath);if(Bu(a))for(const o of a.arrayValue.values||[])i=i.add(new Ts(n.indexId,e.key,this.Ln(o),r))}else i=i.add(new Ts(n.indexId,e.key,ch,r));return i}Jn(e,n,i,r,s){j(Cw,"Updating index entries for document '%s'",n.key);const a=[];return function(l,c,h,f,m){const g=l.getIterator(),w=c.getIterator();let I=da(g),N=da(w);for(;I||N;){let v=!1,y=!1;if(I&&N){const E=h(I,N);E<0?y=!0:E>0&&(v=!0)}else I!=null?y=!0:v=!0;v?(f(N),N=da(w)):y?(m(I),I=da(g)):(I=da(g),N=da(w))}}(r,s,Ji,o=>{a.push(this.Hn(e,n,i,o))},o=>{a.push(this.Yn(e,n,i,o))}),O.waitFor(a)}Gn(e){let n=1;return ga(e).ee({index:ZR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((a,o)=>Ji(a,o)).filter((a,o,l)=>!o||Ji(a,l[o-1])!==0);const r=[];r.push(e);for(const a of i){const o=Ji(a,e),l=Ji(a,n);if(o===0)r[0]=e.An();else if(o>0&&l<0)r.push(a),r.push(a.An());else if(l>0)break}r.push(n);const s=[];for(let a=0;a<r.length;a+=2){if(this.Zn(r[a],r[a+1]))return[];const o=r[a].Vn(this.uid,ch,q.empty()),l=r[a+1].Vn(this.uid,ch,q.empty());s.push(IDBKeyRange.bound(o,l))}return s}Zn(e,n){return Ji(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Nw)}getMinOffset(e,n){return O.mapArray(this.Mn(n),i=>this.xn(e,i).next(r=>r||Q(44426))).next(Nw)}}function Dw(t){return dt(t,ku)}function pa(t){return dt(t,uu)}function Dl(t){return dt(t,I_)}function ga(t){return dt(t,lu)}function Nw(t){Y(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const r=t[i].indexState.offset;w_(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new gn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lC=41943040;class Vt{static withCacheSize(e){return new Vt(e,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t,e,n){const i=t.store(Vn),r=t.store(mo),s=[],a=IDBKeyRange.only(n.batchId);let o=0;const l=i.ee({range:a},(h,f,m)=>(o++,m.delete()));s.push(l.next(()=>{Y(o===1,47070,{batchId:n.batchId})}));const c=[];for(const h of n.mutations){const f=WR(e,h.key.path,n.batchId);s.push(r.delete(f)),c.push(h.key)}return O.waitFor(s).next(()=>c)}function Bf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Q(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vt.DEFAULT_COLLECTION_PERCENTILE=10,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vt.DEFAULT=new Vt(lC,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vt.DISABLED=new Vt(-1,0,0);class Md{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Xn={}}static wt(e,n,i,r){Y(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new Md(s,n,i,r)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zi(e).ee({index:ws,range:i},(r,s,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,i,r){const s=Aa(e),a=Zi(e);return a.add({}).next(o=>{Y(typeof o=="number",49019);const l=new k_(o,n,i,r),c=function(g,w,I){const N=I.baseMutations.map(y=>qu(g.yt,y)),v=I.mutations.map(y=>qu(g.yt,y));return{userId:w,batchId:I.batchId,localWriteTimeMs:I.localWriteTime.toMillis(),baseMutations:N,mutations:v}}(this.serializer,this.userId,l),h=[];let f=new Se((m,g)=>J(m.canonicalString(),g.canonicalString()));for(const m of r){const g=WR(this.userId,m.key.path,o);f=f.add(m.key.path.popLast()),h.push(a.put(c)),h.push(s.put(g,oL))}return f.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Xn[o]=l.keys()}),O.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return Zi(e).get(n).next(i=>i?(Y(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:n}),vs(this.serializer,i)):null)}er(e,n){return this.Xn[n]?O.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){const r=i.keys();return this.Xn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Zi(e).ee({index:ws,range:r},(a,o,l)=>{o.userId===this.userId&&(Y(o.batchId>=i,47524,{tr:i}),s=vs(this.serializer,o)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Pr;return Zi(e).ee({index:ws,range:n,reverse:!0},(r,s,a)=>{i=s.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Pr],[this.userId,Number.POSITIVE_INFINITY]);return Zi(e).J(ws,n).next(i=>i.map(r=>vs(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=Lh(this.userId,n.path),r=IDBKeyRange.lowerBound(i),s=[];return Aa(e).ee({range:r},(a,o,l)=>{const[c,h,f]=a,m=$n(h);if(c===this.userId&&n.path.isEqual(m))return Zi(e).get(f).next(g=>{if(!g)throw Q(61480,{nr:a,batchId:f});Y(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:f}),s.push(vs(this.serializer,g))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Se(J);const r=[];return n.forEach(s=>{const a=Lh(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=Aa(e).ee({range:o},(c,h,f)=>{const[m,g,w]=c,I=$n(g);m===this.userId&&s.path.isEqual(I)?i=i.add(w):f.done()});r.push(l)}),O.waitFor(r).next(()=>this.rr(e,i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1,s=Lh(this.userId,i),a=IDBKeyRange.lowerBound(s);let o=new Se(J);return Aa(e).ee({range:a},(l,c,h)=>{const[f,m,g]=l,w=$n(m);f===this.userId&&i.isPrefixOf(w)?w.length===r&&(o=o.add(g)):h.done()}).next(()=>this.rr(e,o))}rr(e,n){const i=[],r=[];return n.forEach(s=>{r.push(Zi(e).get(s).next(a=>{if(a===null)throw Q(35274,{batchId:s});Y(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),i.push(vs(this.serializer,a))}))}),O.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return uC(e.le,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),O.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();const i=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),r=[];return Aa(e).ee({range:i},(s,a,o)=>{if(s[0]===this.userId){const l=$n(s[1]);r.push(l)}else o.done()}).next(()=>{Y(r.length===0,56720,{sr:r.map(s=>s.canonicalString())})})})}containsKey(e,n){return cC(e,this.userId,n)}_r(e){return hC(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Pr,lastStreamToken:""})}}function cC(t,e,n){const i=Lh(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let a=!1;return Aa(t).ee({range:s,X:!0},(o,l,c)=>{const[h,f,m]=o;h===e&&f===r&&(a=!0),c.done()}).next(()=>a)}function Zi(t){return dt(t,Vn)}function Aa(t){return dt(t,mo)}function hC(t){return dt(t,Ou)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Qs(0)}static cr(){return new Qs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const i=new Qs(n.highestTargetId);return n.highestTargetId=i.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>W.fromTimestamp(new ye(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.lr(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.hr(e,r)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(i=>(i.targetCount+=1,this.Tr(n,i),this.hr(e,i))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ya(e).delete(n.targetId)).next(()=>this.lr(e)).next(i=>(Y(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i)))}removeTargets(e,n,i){let r=0;const s=[];return ya(e).ee((a,o)=>{const l=ql(o);l.sequenceNumber<=n&&i.get(l.targetId)===null&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>O.waitFor(s)).next(()=>r)}forEachTarget(e,n){return ya(e).ee((i,r)=>{const s=ql(r);n(s)})}lr(e){return Vw(e).get(Of).next(n=>(Y(n!==null,2888),n))}hr(e,n){return Vw(e).put(Of,n)}Pr(e,n){return ya(e).put(sC(this.serializer,n))}Tr(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const i=Fs(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return ya(e).ee({range:r,index:JR},(a,o,l)=>{const c=ql(o);_c(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,i){const r=[],s=hr(e);return n.forEach(a=>{const o=Pt(a.path);r.push(s.put({targetId:i,path:o})),r.push(this.referenceDelegate.addReference(e,i,a))}),O.waitFor(r)}removeMatchingKeys(e,n,i){const r=hr(e);return O.forEach(n,s=>{const a=Pt(s.path);return O.waitFor([r.delete([i,a]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,n){const i=hr(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),r=hr(e);let s=ne();return r.ee({range:i,X:!0},(a,o,l)=>{const c=$n(a[1]),h=new q(c);s=s.add(h)}).next(()=>s)}containsKey(e,n){const i=Pt(n.path),r=IDBKeyRange.bound([i],[BR(i)],!1,!0);let s=0;return hr(e).ee({index:A_,X:!0,range:r},([a,o],l,c)=>{a!==0&&(s++,c.done())}).next(()=>s>0)}At(e,n){return ya(e).get(n).next(i=>i?ql(i):null)}}function ya(t){return dt(t,po)}function Vw(t){return dt(t,Ns)}function hr(t){return dt(t,go)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="LruGarbageCollector",fC=1048576;function Ow([t,e],[n,i]){const r=J(t,n);return r===0?J(e,i):r}class C6{constructor(e){this.Ir=e,this.buffer=new Se(Ow),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Ow(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class dC{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){j(Pw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xr(n)?j(Pw,"Ignoring IndexedDB error during garbage collection: ",n):await Wr(n)}await this.Vr(3e5)})}}class D6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return O.resolve(Gt.ce);const i=new C6(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(xw)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xw):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,s,a,o,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,a=Date.now(),this.nthSequenceNumber(e,r))).next(f=>(i=f,o=Date.now(),this.removeTargets(e,i,n))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(f=>(c=Date.now(),Sa()<=ce.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${r} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:f})))}}function mC(t,e){return new D6(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e,n){this.db=e,this.garbageCollector=mC(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(i,r)=>n(r))}addReference(e,n,i){return hh(e,i)}removeReference(e,n,i){return hh(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return hh(e,n)}br(e,n){return function(r,s){let a=!1;return hC(r).te(o=>cC(r,o,s).next(l=>(l&&(a=!0),O.resolve(!l)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Sr(e,(a,o)=>{if(o<=n){const l=this.br(e,a).next(c=>{if(!c)return s++,i.getEntry(e,a).next(()=>(i.removeEntry(a,W.min()),hr(e).delete(function(f){return[0,Pt(f.path)]}(a))))});r.push(l)}}).next(()=>O.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return hh(e,n)}Sr(e,n){const i=hr(e);let r,s=Gt.ce;return i.ee({index:A_},([a,o],{path:l,sequenceNumber:c})=>{a===0?(s!==Gt.ce&&n(new q($n(r)),s),s=c,r=l):s=Gt.ce}).next(()=>{s!==Gt.ce&&n(new q($n(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hh(t,e){return hr(t).put(function(i,r){return{targetId:0,path:Pt(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(){this.changes=new Bi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Me.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?O.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return cs(e).put(i)}removeEntry(e,n,i){return cs(e).delete(function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Uf(a),o[o.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.Dr(e,i)))}getEntry(e,n){let i=Me.newInvalidDocument(n);return cs(e).ee({index:Uh,range:IDBKeyRange.only(Nl(n))},(r,s)=>{i=this.Cr(n,s)}).next(()=>i)}vr(e,n){let i={size:0,document:Me.newInvalidDocument(n)};return cs(e).ee({index:Uh,range:IDBKeyRange.only(Nl(n))},(r,s)=>{i={document:this.Cr(n,s),size:Bf(s)}}).next(()=>i)}getEntries(e,n){let i=Qt();return this.Fr(e,n,(r,s)=>{const a=this.Cr(r,s);i=i.insert(r,a)}).next(()=>i)}Mr(e,n){let i=Qt(),r=new xe(q.comparator);return this.Fr(e,n,(s,a)=>{const o=this.Cr(s,a);i=i.insert(s,o),r=r.insert(s,Bf(a))}).next(()=>({documents:i,Or:r}))}Fr(e,n,i){if(n.isEmpty())return O.resolve();let r=new Se(Lw);n.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(Nl(r.first()),Nl(r.last())),a=r.getIterator();let o=a.getNext();return cs(e).ee({index:Uh,range:s},(l,c,h)=>{const f=q.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;o&&Lw(o,f)<0;)i(o,null),o=a.getNext();o&&o.isEqual(f)&&(i(o,c),o=a.hasNext()?a.getNext():null),o?h.j(Nl(o)):h.done()}).next(()=>{for(;o;)i(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,s){const a=n.path,o=[a.popLast().toArray(),a.lastSegment(),Uf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cs(e).J(IDBKeyRange.bound(o,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let h=Qt();for(const f of c){const m=this.Cr(q.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(Ec(n,m)||r.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,i,r){let s=Qt();const a=kw(n,i),o=kw(n,gn.max());return cs(e).ee({index:XR,range:IDBKeyRange.bound(a,o,!0)},(l,c,h)=>{const f=this.Cr(q.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(f.key,f),s.size===r&&h.done()}).next(()=>s)}newChangeBuffer(e){return new V6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Mw(e).get(Ng).next(n=>(Y(!!n,20021),n))}Dr(e,n){return Mw(e).put(Ng,n)}Cr(e,n){if(n){const i=y6(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(W.min())))return i}return Me.newInvalidDocument(e)}}function gC(t){return new x6(t)}class V6 extends pC{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Bi(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const n=[];let i=0,r=new Se((s,a)=>J(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const l=_w(this.Nr.serializer,a);r=r.add(s.path.popLast());const c=Bf(l);i+=c-o.size,n.push(this.Nr.addEntry(e,s,l))}else if(i-=o.size,this.trackRemovals){const l=_w(this.Nr.serializer,a.convertToNoDocument(W.min()));n.push(this.Nr.addEntry(e,s,l))}}),r.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,i)),O.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(i=>(this.Br.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:i,Or:r})=>(r.forEach((s,a)=>{this.Br.set(s,{size:a,readTime:i.get(s).readTime})}),i))}}function Mw(t){return dt(t,Mu)}function cs(t){return dt(t,Pf)}function Nl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kw(t,e){const n=e.documentKey.path.toArray();return[t,Uf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Lw(t,e){const n=t.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=J(n[s],i[s]),r)return r;return r=J(n.length,i.length),r||(r=J(n[n.length-2],i[i.length-2]),r||J(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&fu(i.mutation,r,Kt.empty(),ye.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ne()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ne()){const r=Yn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=jl();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Yn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ne()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,i,r){let s=Qt();const a=hu(),o=function(){return hu()}();return n.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof ji)?s=s.insert(c.key,c):h!==void 0?(a.set(c.key,h.mutation.getFieldMask()),fu(h.mutation,c,h.mutation.getFieldMask(),ye.now())):a.set(c.key,Kt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>a.set(c,h)),n.forEach((c,h)=>o.set(c,new P6(h,a.get(c)??null))),o))}recalculateAndSaveOverlays(e,n){const i=hu();let r=new xe((a,o)=>a-o),s=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||Kt.empty();h=o.applyToLocalView(c,h),i.set(l,h);const f=(r.get(o.batchId)||ne()).add(l);r=r.insert(o.batchId,f)})}).next(()=>{const a=[],o=r.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,h=l.value,f=V1();h.forEach(m=>{if(!s.has(m)){const g=z1(n.get(m),i.get(m));g!==null&&f.set(m,g),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,f))}return O.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):V_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):O.resolve(Yn());let o=co,l=s;return a.next(c=>O.forEach(c,(h,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),s.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ne())).next(h=>({batchId:o,changes:x1(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(i=>{let r=jl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=jl();return this.indexManager.getCollectionParents(e,s).next(o=>O.forEach(o,l=>{const c=function(f,m){return new zi(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(a=>{s.forEach((l,c)=>{const h=c.getKey();a.get(h)===null&&(a=a.insert(h,Me.newInvalidDocument(h)))});let o=jl();return a.forEach((l,c)=>{const h=s.get(l);h!==void 0&&fu(h.mutation,c,Kt.empty(),ye.now()),Ec(n,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return O.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Je(r.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:Pd(r.bundledQuery),readTime:Je(r.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(){this.overlays=new xe(q.comparator),this.qr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Yn();return O.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.St(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),O.resolve()}getOverlaysForCollection(e,n,i){const r=Yn(),s=n.length+1,a=new q(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return O.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new xe((c,h)=>c-h);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=Yn(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const o=Yn(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>o.set(c,h)),!(o.size()>=r)););return O.resolve(o)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new U_(n,i));let s=this.qr.get(n);s===void 0&&(s=ne(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(){this.Qr=new Se(gt.$r),this.Ur=new Se(gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new gt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new gt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new q(new ae([])),i=new gt(n,e),r=new gt(n,e+1),s=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new q(new ae([])),i=new gt(n,e),r=new gt(n,e+1);let s=ne();return this.Ur.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new gt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class gt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return q.comparator(e.key,n.key)||J(e.Yr,n.Yr)}static Kr(e,n){return J(e.Yr,n.Yr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Se(gt.$r)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new k_(s,n,i,r);this.mutationQueue.push(a);for(const o of r)this.Zr=this.Zr.add(new gt(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return O.resolve(a)}lookupMutationBatch(e,n){return O.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),s=r<0?0:r;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Pr:this.tr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new gt(n,0),r=new gt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,r],a=>{const o=this.Xr(a.Yr);s.push(o)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Se(J);return n.forEach(r=>{const s=new gt(r,0),a=new gt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{i=i.add(o.Yr)})}),O.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;q.isDocumentKey(s)||(s=s.child(""));const a=new gt(new q(s),0);let o=new Se(J);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(o=o.add(l.Yr)),!0)},a),O.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Y(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return O.forEach(n.mutations,r=>{const s=new gt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new gt(n,0),r=this.Zr.firstAfterOrEqual(i);return O.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e){this.ri=e,this.docs=function(){return new xe(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return O.resolve(i?i.document.mutableCopy():Me.newInvalidDocument(n))}getEntries(e,n){let i=Qt();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Me.newInvalidDocument(r))}),O.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Qt();const a=n.path,o=new q(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||w_(GR(h),i)<=0||(r.has(h.key)||Ec(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,i,r){Q(9500)}ii(e,n){return O.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new z6(this)}getSize(e){return O.resolve(this.size)}}class z6 extends pC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),O.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e){this.persistence=e,this.si=new Bi(n=>Fs(n),_c),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.oi=0,this._i=new q_,this.targetCount=0,this.ai=Qs.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),O.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Qs(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Pr(n),O.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=n&&i.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),O.waitFor(s).next(()=>r)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return O.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),O.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return O.resolve(i)}containsKey(e,n){return O.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Gt(0),this.li=!1,this.li=!0,this.hi=new k6,this.referenceDelegate=e(this),this.Pi=new B6(this),this.indexManager=new A6,this.remoteDocumentCache=function(r){return new U6(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new rC(n),this.Ii=new O6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new M6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new L6(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){j("MemoryPersistence","Starting transaction:",e);const r=new j6(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(s=>this.referenceDelegate.di(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ai(e,n){return O.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class j6 extends QR{constructor(e){super(),this.currentSequenceNumber=e}}class kd{constructor(e){this.persistence=e,this.Ri=new q_,this.Vi=null}static mi(e){return new kd(e)}get fi(){if(this.Vi)return this.Vi;throw Q(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),O.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.fi,i=>{const r=q.fromPath(i);return this.gi(e,r).next(s=>{s||n.removeEntry(r,W.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class jf{constructor(e,n){this.persistence=e,this.pi=new Bi(i=>Pt(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=mC(this,n)}static mi(e,n){return new jf(e,n)}Ei(){}di(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return O.forEach(this.pi,(i,r)=>this.br(e,i,r).next(s=>s?O.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(o=>{o||(i++,s.removeEntry(a,W.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),O.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Bh(e.data.value)),n}br(e,n,i){return O.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return O.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e){this.serializer=e}k(e,n,i,r){const s=new Sd("createOrUpgrade",n);i<1&&r>=1&&(function(l){l.createObjectStore(yc)}(e),function(l){l.createObjectStore(Ou,{keyPath:aL}),l.createObjectStore(Vn,{keyPath:$S,autoIncrement:!0}).createIndex(ws,YS,{unique:!0}),l.createObjectStore(mo)}(e),Uw(e),function(l){l.createObjectStore(ys)}(e));let a=O.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore(go),l.deleteObjectStore(po),l.deleteObjectStore(Ns)}(e),Uw(e)),a=a.next(()=>function(l){const c=l.store(Ns),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:W.min().toTimestamp(),targetCount:0};return c.put(Of,h)}(s))),i<4&&r>=4&&(i!==0&&(a=a.next(()=>function(l,c){return c.store(Vn).J().next(f=>{l.deleteObjectStore(Vn),l.createObjectStore(Vn,{keyPath:$S,autoIncrement:!0}).createIndex(ws,YS,{unique:!0});const m=c.store(Vn),g=f.map(w=>m.put(w));return O.waitFor(g)})}(e,s))),a=a.next(()=>{(function(l){l.createObjectStore(yo,{keyPath:pL})})(e)})),i<5&&r>=5&&(a=a.next(()=>this.yi(s))),i<6&&r>=6&&(a=a.next(()=>(function(l){l.createObjectStore(Mu)}(e),this.wi(s)))),i<7&&r>=7&&(a=a.next(()=>this.Si(s))),i<8&&r>=8&&(a=a.next(()=>this.bi(e,s))),i<9&&r>=9&&(a=a.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(a=a.next(()=>this.Di(s))),i<11&&r>=11&&(a=a.next(()=>{(function(l){l.createObjectStore(wd,{keyPath:gL})})(e),function(l){l.createObjectStore(bd,{keyPath:yL})}(e)})),i<12&&r>=12&&(a=a.next(()=>{(function(l){const c=l.createObjectStore(Ad,{keyPath:bL});c.createIndex(Vg,AL,{unique:!1}),c.createIndex(t1,IL,{unique:!1})})(e)})),i<13&&r>=13&&(a=a.next(()=>function(l){const c=l.createObjectStore(Pf,{keyPath:lL});c.createIndex(Uh,uL),c.createIndex(XR,cL)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(ys))),i<14&&r>=14&&(a=a.next(()=>this.Fi(e,s))),i<15&&r>=15&&(a=a.next(()=>function(l){l.createObjectStore(I_,{keyPath:_L,autoIncrement:!0}).createIndex(xg,vL,{unique:!1}),l.createObjectStore(lu,{keyPath:EL}).createIndex(ZR,TL,{unique:!1}),l.createObjectStore(uu,{keyPath:SL}).createIndex(e1,wL,{unique:!1})}(e))),i<16&&r>=16&&(a=a.next(()=>{n.objectStore(lu).clear()}).next(()=>{n.objectStore(uu).clear()})),i<17&&r>=17&&(a=a.next(()=>{(function(l){l.createObjectStore(R_,{keyPath:RL})})(e)})),i<18&&r>=18&&HI()&&(a=a.next(()=>{n.objectStore(lu).clear()}).next(()=>{n.objectStore(uu).clear()})),a}wi(e){let n=0;return e.store(ys).ee((i,r)=>{n+=Bf(r)}).next(()=>{const i={byteSize:n};return e.store(Mu).put(Ng,i)})}yi(e){const n=e.store(Ou),i=e.store(Vn);return n.J().next(r=>O.forEach(r,s=>{const a=IDBKeyRange.bound([s.userId,Pr],[s.userId,s.lastAcknowledgedBatchId]);return i.J(ws,a).next(o=>O.forEach(o,l=>{Y(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=vs(this.serializer,l);return uC(e,s.userId,c).next(()=>{})}))}))}Si(e){const n=e.store(go),i=e.store(ys);return e.store(Ns).get(Of).next(r=>{const s=[];return i.ee((a,o)=>{const l=new ae(a),c=function(f){return[0,Pt(f)]}(l);s.push(n.get(c).next(h=>h?O.resolve():(f=>n.put({targetId:0,path:Pt(f),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>O.waitFor(s))})}bi(e,n){e.createObjectStore(ku,{keyPath:mL});const i=n.store(ku),r=new F_,s=a=>{if(r.add(a)){const o=a.lastSegment(),l=a.popLast();return i.put({collectionId:o,parent:Pt(l)})}};return n.store(ys).ee({X:!0},(a,o)=>{const l=new ae(a);return s(l.popLast())}).next(()=>n.store(mo).ee({X:!0},([a,o,l],c)=>{const h=$n(o);return s(h.popLast())}))}Di(e){const n=e.store(po);return n.ee((i,r)=>{const s=ql(r),a=sC(this.serializer,s);return n.put(a)})}Ci(e,n){const i=n.store(ys),r=[];return i.ee((s,a)=>{const o=n.store(Pf),l=function(f){return f.document?new q(ae.fromString(f.document.name).popFirst(5)):f.noDocument?q.fromSegments(f.noDocument.path):f.unknownDocument?q.fromSegments(f.unknownDocument.path):Q(36783)}(a).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(o.put(c))}).next(()=>O.waitFor(r))}Fi(e,n){const i=n.store(Vn),r=gC(this.serializer),s=new H_(kd.mi,this.serializer.yt);return i.J().next(a=>{const o=new Map;return a.forEach(l=>{let c=o.get(l.userId)??ne();vs(this.serializer,l).keys().forEach(h=>c=c.add(h)),o.set(l.userId,c)}),O.forEach(o,(l,c)=>{const h=new _t(c),f=Od.wt(this.serializer,h),m=s.getIndexManager(h),g=Md.wt(h,this.serializer,m,s.referenceDelegate);return new yC(r,g,f,m).recalculateAndSaveOverlaysForDocumentKeys(new Pg(n,Gt.ce),l).next()})})}}function Uw(t){t.createObjectStore(go,{keyPath:fL}).createIndex(A_,dL,{unique:!0}),t.createObjectStore(po,{keyPath:"targetId"}).createIndex(JR,hL,{unique:!0}),t.createObjectStore(Ns)}const er="IndexedDbPersistence",hp=18e5,fp=5e3,dp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",_C="main";class G_{constructor(e,n,i,r,s,a,o,l,c,h,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.Mi=s,this.window=a,this.document=o,this.xi=c,this.Oi=h,this.Ni=f,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!G_.v())throw new z(k.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new N6(this,r),this.$i=n+_C,this.serializer=new rC(l),this.Ui=new Jn(this.$i,this.Ni,new F6(this.serializer)),this.hi=new v6,this.Pi=new R6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gC(this.serializer),this.Ii=new _6,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&We(er,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new z(k.FAILED_PRECONDITION,dp);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Gt(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>fh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(Xr(e))return j(er,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return j(er,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return xl(e).get(fa).next(n=>O.resolve(this.es(n)))}ts(e){return fh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,hp)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=dt(n,yo);return i.J().next(r=>{const s=this.ss(r,hp),a=r.filter(o=>s.indexOf(o)===-1);return O.forEach(a,o=>i.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?O.resolve(!0):xl(e).get(fa).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,fp)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new z(k.FAILED_PRECONDITION,dp);return!1}}return!(!this.networkEnabled||!this.inForeground)||fh(e).J().next(i=>this.ss(i,fp).find(r=>{if(this.clientId!==r.clientId){const s=!this.networkEnabled&&r.networkEnabled,a=!this.inForeground&&r.inForeground,o=this.networkEnabled===r.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&j(er,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[yc,yo],e=>{const n=new Pg(e,Gt.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(i=>this.rs(i.updateTimeMs,n)&&!this.us(i.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>fh(e).J().next(n=>this.ss(n,hp).map(i=>i.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Md.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new I6(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Od.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,i){j(er,"Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?NL:l===17?s1:l===16?DL:l===15?C_:l===14?r1:l===13?i1:l===12?CL:l===11?n1:void Q(60245)}(this.Ni);let a;return this.Ui.runTransaction(e,r,s,o=>(a=new Pg(o,this.ci?this.ci.next():Gt.ce),n==="readwrite-primary"?this.Hi(a).next(l=>!!l||this.Yi(a)).next(l=>{if(!l)throw We(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new z(k.FAILED_PRECONDITION,KR);return i(a)}).next(l=>this.Xi(a).next(()=>l)):this.Is(a).next(()=>i(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Is(e){return xl(e).get(fa).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,fp)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new z(k.FAILED_PRECONDITION,dp)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xl(e).put(fa,n)}static v(){return Jn.v()}Zi(e){const n=xl(e);return n.get(fa).next(i=>this.es(i)?(j(er,"Releasing primary lease."),n.delete(fa)):O.resolve())}rs(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(We(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;qI()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const i=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return j(er,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return We(er,"Failed to get zombied client id.",i),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){We("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xl(t){return dt(t,yc)}function fh(t){return dt(t,yo)}function K_(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=ne(),r=ne();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Q_(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return qI()?8:$R(ht())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.ys(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new q6;return this.Ss(e,n,a).next(o=>{if(s.result=o,this.Vs)return this.bs(e,n,a,o.size)})}).next(()=>s.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(Sa()<=ce.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",wa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),O.resolve()):(Sa()<=ce.DEBUG&&j("QueryEngine","Query:",wa(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Sa()<=ce.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",wa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ot(n))):O.resolve())}ys(e,n){if(lw(n))return O.resolve(null);let i=Ot(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Lf(n,null,"F"),i=Ot(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=ne(...s);return this.ps.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Ds(n,o);return this.Cs(n,c,a,l.readTime)?this.ys(e,Lf(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,i,r){return lw(n)||r.isEqual(W.min())?O.resolve(null):this.ps.getDocuments(e,i).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,i,r)?O.resolve(null):(Sa()<=ce.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),wa(n)),this.vs(e,a,n,HR(r,co)).next(o=>o))})}Ds(e,n){let i=new Se(D1(e));return n.forEach((r,s)=>{Ec(e,s)&&(i=i.add(s))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,n,i){return Sa()<=ce.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",wa(n)),this.ps.getDocumentsMatchingQuery(e,n,gn.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="LocalStore",H6=3e8;class G6{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new xe(J),this.xs=new Bi(s=>Fs(s),_c),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function EC(t,e,n,i){return new G6(t,e,n,i)}async function TC(t,e){const n=H(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],o=[];let l=ne();for(const c of r){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({Ls:c,removedBatchIds:a,addedBatchIds:o}))})})}function K6(t,e){const n=H(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,c,h){const f=c.batch,m=f.keys();let g=O.resolve();return m.forEach(w=>{g=g.next(()=>h.getEntry(l,w)).next(I=>{const N=c.docVersions.get(w);Y(N!==null,48541),I.version.compareTo(N)<0&&(f.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),h.addEntry(I)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(l,f))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let l=ne();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function SC(t){const e=H(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Q6(t,e){const n=H(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const o=[];e.targetChanges.forEach((h,f)=>{const m=r.get(f);if(!m)return;o.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,f)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Ge.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,i)),r=r.insert(f,g),function(I,N,v){return I.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=H6?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,g,h)&&o.push(n.Pi.updateTargetData(s,g))});let l=Qt(),c=ne();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),o.push(wC(s,a,e.documentUpdates).next(h=>{l=h.ks,c=h.qs})),!i.isEqual(W.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(f=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));o.push(h)}return O.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ms=r,s))}function wC(t,e,n){let i=ne(),r=ne();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=Qt();return n.forEach((o,l)=>{const c=s.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(o)),l.isNoDocument()&&l.version.isEqual(W.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):j($_,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{ks:a,qs:r}})}function $6(t,e){const n=H(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Pr),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function bo(t,e){const n=H(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(s=>s?(r=s,O.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new gi(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Ao(t,e,n){const i=H(t),r=i.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Xr(a))throw a;j($_,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function Ff(t,e,n){const i=H(t);let r=W.min(),s=ne();return i.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,h){const f=H(l),m=f.xs.get(h);return m!==void 0?O.resolve(f.Ms.get(m)):f.Pi.getTargetData(c,h)}(i,a,Ot(e)).next(o=>{if(o)return r=o.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:W.min(),n?s:ne())).next(o=>(IC(i,C1(e),o),{documents:o,Qs:s})))}function bC(t,e){const n=H(t),i=H(n.Pi),r=n.Ms.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",s=>i.At(s,e).next(a=>a?a.target:null))}function AC(t,e){const n=H(t),i=n.Os.get(e)||W.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.Ns.getAllFromCollectionGroup(r,e,HR(i,co),Number.MAX_SAFE_INTEGER)).then(r=>(IC(n,e,r),r))}function IC(t,e,n){let i=t.Os.get(e)||W.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.Os.set(e,i)}async function Y6(t,e,n,i){const r=H(t);let s=ne(),a=Qt();for(const c of n){const h=e.$s(c.metadata.name);c.document&&(s=s.add(h));const f=e.Us(c);f.setReadTime(e.Ks(c.metadata.readTime)),a=a.insert(h,f)}const o=r.Ns.newChangeBuffer({trackRemovals:!0}),l=await bo(r,function(h){return Ot(Ko(ae.fromString(`__bundle__/docs/${h}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>wC(c,o,a).next(h=>(o.apply(c),h)).next(h=>r.Pi.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Pi.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,h.ks,h.qs)).next(()=>h.ks)))}async function W6(t,e,n=ne()){const i=await bo(t,Ot(Pd(e.bundledQuery))),r=H(t);return r.persistence.runTransaction("Save named query","readwrite",s=>{const a=Je(e.readTime);if(i.snapshotVersion.compareTo(a)>=0)return r.Ii.saveNamedQuery(s,e);const o=i.withResumeToken(Ge.EMPTY_BYTE_STRING,a);return r.Ms=r.Ms.insert(o.targetId,o),r.Pi.updateTargetData(s,o).next(()=>r.Pi.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Pi.addMatchingKeys(s,n,i.targetId)).next(()=>r.Ii.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC="firestore_clients";function zw(t,e){return`${RC}_${t}_${e}`}const CC="firestore_mutations";function Bw(t,e,n){let i=`${CC}_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const DC="firestore_targets";function mp(t,e){return`${DC}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn="SharedClientState";class qf{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Ws(e,n,i){const r=JSON.parse(i);let s,a=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(s=new z(r.error.code,r.error.message))),a?new qf(e,n,r.state,s):(We(Hn,`Failed to parse mutation state for ID '${n}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mu{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Ws(e,n){const i=JSON.parse(n);let r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new z(i.error.code,i.error.message))),s?new mu(e,i.state,r):(We(Hn,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const i=JSON.parse(n);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=P_();for(let a=0;r&&a<i.activeTargetIds.length;++a)r=YR(i.activeTargetIds[a]),s=s.add(i.activeTargetIds[a]);return r?new Hf(e,s):(We(Hn,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Y_{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Y_(n.clientId,n.onlineState):(We(Hn,`Failed to parse online state: ${e}`),null)}}class Qg{constructor(){this.activeTargetIds=P_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pp{constructor(e,n,i,r,s){this.window=e,this.Mi=n,this.persistenceKey=i,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new xe(J),this.started=!1,this.Xs=[];const a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=zw(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Qg),this.ro=new RegExp(`^${RC}_${a}_([^_]*)$`),this.io=new RegExp(`^${CC}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${DC}_${a}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const r=this.getItem(zw(this.persistenceKey,i));if(r){const s=Hf.Ws(i,r);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const i=this.uo(n);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,i){this.ho(e,n,i),this.Po(e)}addLocalQueryTarget(e,n=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(mp(this.persistenceKey,e));if(r){const s=mu.Ws(e,r);s&&(i=s.state)}}return n&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(mp(this.persistenceKey,e))}updateQueryState(e,n,i){this.Io(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Po(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return j(Hn,"READ",e,n),n}setItem(e,n){j(Hn,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){j(Hn,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(j(Hn,"EVENT",n.key,n.newValue),n.key===this.eo)return void We("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const i=this.Ro(n.key);return this.Vo(i,null)}{const i=this.mo(n.key,n.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(n.key)){if(n.newValue!==null){const i=this.fo(n.key,n.newValue);if(i)return this.po(i)}}else if(this.so.test(n.key)){if(n.newValue!==null){const i=this.yo(n.key,n.newValue);if(i)return this.wo(i)}}else if(n.key===this.oo){if(n.newValue!==null){const i=this.uo(n.newValue);if(i)return this.co(i)}}else if(n.key===this.no){const i=function(s){let a=Gt.ce;if(s!=null)try{const o=JSON.parse(s);Y(typeof o=="number",30636,{So:s}),a=o}catch(o){We(Hn,"Failed to read sequence number from WebStorage",o)}return a}(n.newValue);i!==Gt.ce&&this.sequenceNumberHandler(i)}else if(n.key===this._o){const i=this.bo(n.newValue);await Promise.all(i.map(r=>this.syncEngine.Do(r)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,i){const r=new qf(this.currentUser,e,n,i),s=Bw(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Gs())}Po(e){const n=Bw(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,i){const r=mp(this.persistenceKey,e),s=new mu(e,n,i);this.setItem(r,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const i=this.Ro(e);return Hf.Ws(i,n)}fo(e,n){const i=this.io.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return qf.Ws(new _t(s),r,n)}yo(e,n){const i=this.so.exec(e),r=Number(i[1]);return mu.Ws(r,n)}uo(e){return Y_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);j(Hn,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const i=n?this.Zs.insert(e,n):this.Zs.remove(e),r=this.lo(this.Zs),s=this.lo(i),a=[],o=[];return s.forEach(l=>{r.has(l)||a.push(l)}),r.forEach(l=>{s.has(l)||o.push(l)}),this.syncEngine.Fo(a,o).then(()=>{this.Zs=i})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=P_();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}}class NC{constructor(){this.Mo=new Qg,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Qg,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="ConnectivityMonitor";class Fw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){j(jw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){j(jw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dh=null;function $g(){return dh===null?dh=function(){return 268435456+Math.round(2147483648*Math.random())}():dh++,"0x"+dh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="RestConnection",J6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Z6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Uu?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,s){const a=$g(),o=this.zo(e,n.toUriEncodedString());j(gp,`Sending RPC '${e}' ${a}:`,o,i);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,r,s);const{host:c}=new URL(o),h=ta(c);return this.Jo(e,o,l,i,h).then(f=>(j(gp,`Received RPC '${e}' ${a}: `,f),f),f=>{throw pn(gp,`RPC '${e}' ${a} failed with error: `,f,"url: ",o,"request:",i),f})}Ho(e,n,i,r,s,a){return this.Go(e,n,i,r,s)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Go}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}zo(e,n){const i=J6[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt="WebChannelConnection";class t3 extends Z6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,s){const a=$g();return new Promise((o,l)=>{const c=new VR;c.setWithCredentials(!0),c.listenOnce(PR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case kh.NO_ERROR:const f=c.getResponseJson();j(xt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),o(f);break;case kh.TIMEOUT:j(xt,`RPC '${e}' ${a} timed out`),l(new z(k.DEADLINE_EXCEEDED,"Request time out"));break;case kh.HTTP_ERROR:const m=c.getStatus();if(j(xt,`RPC '${e}' ${a} failed with status:`,m,"response text:",c.getResponseText()),m>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const I=function(v){const y=v.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(y)>=0?y:k.UNKNOWN}(w.status);l(new z(I,w.message))}else l(new z(k.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new z(k.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{j(xt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(r);j(xt,`RPC '${e}' ${a} sending request:`,r),c.send(n,"POST",h,i,15)})}T_(e,n,i){const r=$g(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=kR(),o=MR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");j(xt,`Creating RPC '${e}' stream ${r}: ${h}`,l);const f=a.createWebChannel(h,l);this.I_(f);let m=!1,g=!1;const w=new e3({Yo:N=>{g?j(xt,`Not sending because RPC '${e}' stream ${r} is closed:`,N):(m||(j(xt,`Opening RPC '${e}' stream ${r} transport.`),f.open(),m=!0),j(xt,`RPC '${e}' stream ${r} sending:`,N),f.send(N))},Zo:()=>f.close()}),I=(N,v,y)=>{N.listen(v,E=>{try{y(E)}catch(x){setTimeout(()=>{throw x},0)}})};return I(f,Bl.EventType.OPEN,()=>{g||(j(xt,`RPC '${e}' stream ${r} transport opened.`),w.o_())}),I(f,Bl.EventType.CLOSE,()=>{g||(g=!0,j(xt,`RPC '${e}' stream ${r} transport closed`),w.a_(),this.E_(f))}),I(f,Bl.EventType.ERROR,N=>{g||(g=!0,pn(xt,`RPC '${e}' stream ${r} transport errored. Name:`,N.name,"Message:",N.message),w.a_(new z(k.UNAVAILABLE,"The operation could not be completed")))}),I(f,Bl.EventType.MESSAGE,N=>{var v;if(!g){const y=N.data[0];Y(!!y,16349);const E=y,x=(E==null?void 0:E.error)||((v=E[0])==null?void 0:v.error);if(x){j(xt,`RPC '${e}' stream ${r} received error:`,x);const U=x.status;let F=function(b){const C=tt[b];if(C!==void 0)return q1(C)}(U),S=x.message;F===void 0&&(F=k.INTERNAL,S="Unknown error status: "+U+" with message "+x.message),g=!0,w.a_(new z(F,S)),f.close()}else j(xt,`RPC '${e}' stream ${r} received:`,y),w.u_(y)}}),I(o,OR.STAT_EVENT,N=>{N.stat===Ag.PROXY?j(xt,`RPC '${e}' stream ${r} detected buffering proxy`):N.stat===Ag.NOPROXY&&j(xt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(){return typeof window<"u"?window:null}function Gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t){return new o6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&j("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="PersistentStream";class VC{constructor(e,n,i,r,s,a,o,l){this.Mi=e,this.S_=i,this.b_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new W_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(We(n.toString()),We("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new z(k.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return j(qw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(j(qw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class n3 extends VC{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=c6(this.serializer,e),i=function(s){if(!("targetChange"in s))return W.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?W.min():a.readTime?Je(a.readTime):W.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Fg(this.serializer),n.addTarget=function(s,a){let o;const l=a.target;if(o=Mf(l)?{documents:J1(s,l)}:{query:Vd(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=Q1(s,a.resumeToken);const c=Bg(s,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(W.min())>0){o.readTime=wo(s,a.snapshotVersion.toTimestamp());const c=Bg(s,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const i=f6(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Fg(this.serializer),n.removeTarget=e,this.q_(n)}}class i3 extends VC{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Y(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Y(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Y(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=h6(e.writeResults,e.commitTime),i=Je(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Fg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>qu(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{}class s3 extends r3{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,jg(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(k.UNKNOWN,s.toString())})}Ho(e,n,i,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(e,jg(n,i),r,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new z(k.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class a3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(We(n),this.aa=!1):j("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="RemoteStore";class o3{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{Zr(this)&&(j($s,"Restarting streams for network reachability change."),await async function(l){const c=H(l);c.Ea.add(4),await Yo(c),c.Ra.set("Unknown"),c.Ea.delete(4),await bc(c)}(this))})}),this.Ra=new a3(i,r)}}async function bc(t){if(Zr(t))for(const e of t.da)await e(!0)}async function Yo(t){for(const e of t.da)await e(!1)}function Ld(t,e){const n=H(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Z_(n)?J_(n):Xo(n).O_()&&X_(n,e))}function Io(t,e){const n=H(t),i=Xo(n);n.Ia.delete(e),i.O_()&&PC(n,e),n.Ia.size===0&&(i.O_()?i.L_():Zr(n)&&n.Ra.set("Unknown"))}function X_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(W.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xo(t).Y_(e)}function PC(t,e){t.Va.Ue(e),Xo(t).Z_(e)}function J_(t){t.Va=new i6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Xo(t).start(),t.Ra.ua()}function Z_(t){return Zr(t)&&!Xo(t).x_()&&t.Ia.size>0}function Zr(t){return H(t).Ea.size===0}function OC(t){t.Va=void 0}async function l3(t){t.Ra.set("Online")}async function u3(t){t.Ia.forEach((e,n)=>{X_(t,e)})}async function c3(t,e){OC(t),Z_(t)?(t.Ra.ha(e),J_(t)):t.Ra.set("Unknown")}async function h3(t,e,n){if(t.Ra.set("Online"),e instanceof K1&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const o of s.targetIds)r.Ia.has(o)&&(await r.remoteSyncer.rejectListen(o,a),r.Ia.delete(o),r.Va.removeTarget(o))}(t,e)}catch(i){j($s,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Gf(t,i)}else if(e instanceof qh?t.Va.Ze(e):e instanceof G1?t.Va.st(e):t.Va.tt(e),!n.isEqual(W.min()))try{const i=await SC(t.localStore);n.compareTo(i)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(c);h&&s.Ia.set(c,h.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(Ge.EMPTY_BYTE_STRING,h.snapshotVersion)),PC(s,l);const f=new gi(h.target,l,c,h.sequenceNumber);X_(s,f)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(i){j($s,"Failed to raise snapshot:",i),await Gf(t,i)}}async function Gf(t,e,n){if(!Xr(e))throw e;t.Ea.add(1),await Yo(t),t.Ra.set("Offline"),n||(n=()=>SC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{j($s,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await bc(t)})}function MC(t,e){return e().catch(n=>Gf(t,n,e))}async function Wo(t){const e=H(t),n=qr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pr;for(;f3(e);)try{const r=await $6(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,d3(e,r)}catch(r){await Gf(e,r)}kC(e)&&LC(e)}function f3(t){return Zr(t)&&t.Ta.length<10}function d3(t,e){t.Ta.push(e);const n=qr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function kC(t){return Zr(t)&&!qr(t).x_()&&t.Ta.length>0}function LC(t){qr(t).start()}async function m3(t){qr(t).ra()}async function p3(t){const e=qr(t);for(const n of t.Ta)e.ea(n.mutations)}async function g3(t,e,n){const i=t.Ta.shift(),r=L_.from(i,e,n);await MC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Wo(t)}async function y3(t,e){e&&qr(t).X_&&await async function(i,r){if(function(a){return F1(a)&&a!==k.ABORTED}(r.code)){const s=i.Ta.shift();qr(i).B_(),await MC(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Wo(i)}}(t,e),kC(t)&&LC(t)}async function Hw(t,e){const n=H(t);n.asyncQueue.verifyOperationInProgress(),j($s,"RemoteStore received new credentials");const i=Zr(n);n.Ea.add(3),await Yo(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await bc(n)}async function Yg(t,e){const n=H(t);e?(n.Ea.delete(2),await bc(n)):e||(n.Ea.add(2),await Yo(n),n.Ra.set("Unknown"))}function Xo(t){return t.ma||(t.ma=function(n,i,r){const s=H(n);return s.sa(),new n3(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:l3.bind(null,t),t_:u3.bind(null,t),r_:c3.bind(null,t),H_:h3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Z_(t)?J_(t):t.Ra.set("Unknown")):(await t.ma.stop(),OC(t))})),t.ma}function qr(t){return t.fa||(t.fa=function(n,i,r){const s=H(n);return s.sa(),new i3(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:m3.bind(null,t),r_:y3.bind(null,t),ta:p3.bind(null,t),na:g3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Wo(t)):(await t.fa.stop(),t.Ta.length>0&&(j($s,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Tt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,o=new ev(e,n,a,r,s);return o.start(i),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jo(t,e){if(We("AsyncQueue",`${e}: ${t}`),Xr(t))return new z(k.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{static emptySet(e){return new xs(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||q.comparator(n.key,i.key):(n,i)=>q.comparator(n.key,i.key),this.keyedMap=jl(),this.sortedSet=new xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new xs;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(){this.ga=new xe(q.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Q(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ys{constructor(e,n,i,r,s,a,o,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new Ys(e,n,xs.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class v3{constructor(){this.queries=Kw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=H(n),s=r.queries;r.queries=Kw(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(i)})})(this,new z(k.ABORTED,"Firestore shutting down"))}}function Kw(){return new Bi(t=>R1(t),vc)}async function tv(t,e){const n=H(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.ba()&&e.Da()&&(i=2):(s=new _3,i=e.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(r,!0);break;case 1:s.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const o=Jo(a,`Initialization of query '${wa(e.query)}' failed`);return void e.onError(o)}n.queries.set(r,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&iv(n)}async function nv(t,e){const n=H(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?r=e.Da()?0:1:!s.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function E3(t,e){const n=H(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const o of a.Sa)o.Fa(r)&&(i=!0);a.wa=r}}i&&iv(n)}function T3(t,e,n){const i=H(t),r=i.queries.get(e);if(r)for(const s of r.Sa)s.onError(n);i.queries.delete(e)}function iv(t){t.Ca.forEach(e=>{e.next()})}var Wg,Qw;(Qw=Wg||(Wg={})).Ma="default",Qw.Cache="cache";class rv{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ys(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ys.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Wg.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e){this.serializer=e}$s(e){return Zn(this.serializer,e)}Us(e){return e.metadata.exists?xd(this.serializer,e.document,!1):Me.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return Je(e)}}class sv{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=zC(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const i=ae.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,i=new $w(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.$s(r.metadata.name);for(const a of r.metadata.queries){const o=(n.get(a)||ne()).add(s);n.set(a,o)}}return n}async ja(e){const n=await Y6(e,new $w(this.serializer),this.Wa,this.Ua.id),i=this.za(this.documents);for(const r of this.Ka)await W6(e,r,i.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function zC(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.key=e}}class jC{constructor(e){this.key=e}}class FC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ne(),this.mutatedKeys=ne(),this.eu=D1(e),this.tu=new xs(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Gw,r=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,o=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,f)=>{const m=r.get(h),g=Ec(this.query,f)?f:null,w=!!m&&this.mutatedKeys.has(m.key),I=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let N=!1;m&&g?m.data.isEqual(g.data)?w!==I&&(i.track({type:3,doc:g}),N=!0):this.su(m,g)||(i.track({type:2,doc:g}),N=!0,(l&&this.eu(g,l)>0||c&&this.eu(g,c)<0)&&(o=!0)):!m&&g?(i.track({type:0,doc:g}),N=!0):m&&!g&&(i.track({type:1,doc:m}),N=!0,(l||c)&&(o=!0)),N&&(g?(a=a.add(g),s=I?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{tu:a,iu:i,Cs:o,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,f)=>function(g,w){const I=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{Rt:N})}};return I(g)-I(w)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(i),r=r??!1;const o=n&&!r?this._u():[],l=this.Xa.size===0&&this.current&&!r?1:0,c=l!==this.Za;return this.Za=l,a.length!==0||c?{snapshot:new Ys(this.query,e.tu,s,a,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Gw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ne(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new jC(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new BC(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=ne();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ys.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const es="SyncEngine";class S3{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class w3{constructor(e){this.key=e,this.hu=!1}}class b3{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Bi(o=>R1(o),vc),this.Iu=new Map,this.Eu=new Set,this.du=new xe(q.comparator),this.Au=new Map,this.Ru=new q_,this.Vu={},this.mu=new Map,this.fu=Qs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function A3(t,e,n=!0){const i=Ud(t);let r;const s=i.Tu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.lu()):r=await qC(i,e,n,!0),r}async function I3(t,e){const n=Ud(t);await qC(n,e,!0,!1)}async function qC(t,e,n,i){const r=await bo(t.localStore,Ot(e)),s=r.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return i&&(o=await av(t,e,s,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&Ld(t.remoteStore,r),o}async function av(t,e,n,i,r){t.pu=(f,m,g)=>async function(I,N,v,y){let E=N.view.ru(v);E.Cs&&(E=await Ff(I.localStore,N.query,!1).then(({documents:S})=>N.view.ru(S,E)));const x=y&&y.targetChanges.get(N.targetId),U=y&&y.targetMismatches.get(N.targetId)!=null,F=N.view.applyChanges(E,I.isPrimaryClient,x,U);return Xg(I,N.targetId,F.au),F.snapshot}(t,f,m,g);const s=await Ff(t.localStore,e,!0),a=new FC(e,s.Qs),o=a.ru(s.documents),l=wc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=a.applyChanges(o,t.isPrimaryClient,l);Xg(t,n,c.au);const h=new S3(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function R3(t,e,n){const i=H(t),r=i.Tu.get(e),s=i.Iu.get(r.targetId);if(s.length>1)return i.Iu.set(r.targetId,s.filter(a=>!vc(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Ao(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Io(i.remoteStore,r.targetId),Ro(i,r.targetId)}).catch(Wr)):(Ro(i,r.targetId),await Ao(i.localStore,r.targetId,!0))}async function C3(t,e){const n=H(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Io(n.remoteStore,i.targetId))}async function D3(t,e,n){const i=cv(t);try{const r=await function(a,o){const l=H(a),c=ye.now(),h=o.reduce((g,w)=>g.add(w.key),ne());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=Qt(),I=ne();return l.Ns.getEntries(g,h).next(N=>{w=N,w.forEach((v,y)=>{y.isValidDocument()||(I=I.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,w)).next(N=>{f=N;const v=[];for(const y of o){const E=e6(y,f.get(y.key).overlayedDocument);E!=null&&v.push(new ji(y.key,E,g1(E.value.mapValue),je.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,v,o)}).next(N=>{m=N;const v=N.applyToLocalDocumentSet(f,I);return l.documentOverlayCache.saveOverlays(g,N.batchId,v)})}).then(()=>({batchId:m.batchId,changes:x1(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,o,l){let c=a.Vu[a.currentUser.toKey()];c||(c=new xe(J)),c=c.insert(o,l),a.Vu[a.currentUser.toKey()]=c}(i,r.batchId,n),await Fi(i,r.changes),await Wo(i.remoteStore)}catch(r){const s=Jo(r,"Failed to persist write");n.reject(s)}}async function HC(t,e){const n=H(t);try{const i=await Q6(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.Au.get(s);a&&(Y(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Y(a.hu,14607):r.removedDocuments.size>0&&(Y(a.hu,42227),a.hu=!1))}),await Fi(n,i,e)}catch(i){await Wr(i)}}function Yw(t,e,n){const i=H(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((s,a)=>{const o=a.view.va(e);o.snapshot&&r.push(o.snapshot)}),function(a,o){const l=H(a);l.onlineState=o;let c=!1;l.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(o)&&(c=!0)}),c&&iv(l)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function N3(t,e,n){const i=H(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),s=r&&r.key;if(s){let a=new xe(q.comparator);a=a.insert(s,Me.newNoDocument(s,W.min()));const o=ne().add(s),l=new Sc(W.min(),new Map,new xe(J),a,o);await HC(i,l),i.du=i.du.remove(s),i.Au.delete(e),uv(i)}else await Ao(i.localStore,e,!1).then(()=>Ro(i,e,n)).catch(Wr)}async function x3(t,e){const n=H(t),i=e.batch.batchId;try{const r=await K6(n.localStore,e);lv(n,i,null),ov(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Fi(n,r)}catch(r){await Wr(r)}}async function V3(t,e,n){const i=H(t);try{const r=await function(a,o){const l=H(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,o).next(f=>(Y(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);lv(i,e,n),ov(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Fi(i,r)}catch(r){await Wr(r)}}async function P3(t,e){const n=H(t);Zr(n.remoteStore)||j(es,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(a){const o=H(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>o.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(i===Pr)return void e.resolve();const r=n.mu.get(i)||[];r.push(e),n.mu.set(i,r)}catch(i){const r=Jo(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function ov(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function lv(t,e,n){const i=H(t);let r=i.Vu[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Ro(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||GC(t,i)})}function GC(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Io(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),uv(t))}function Xg(t,e,n){for(const i of n)i instanceof BC?(t.Ru.addReference(i.key,e),O3(t,i)):i instanceof jC?(j(es,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||GC(t,i.key)):Q(19791,{wu:i})}function O3(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(j(es,"New document in limbo: "+n),t.Eu.add(i),uv(t))}function uv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new q(ae.fromString(e)),i=t.fu.next();t.Au.set(i,new w3(n)),t.du=t.du.insert(n,i),Ld(t.remoteStore,new gi(Ot(Ko(n.path)),i,"TargetPurposeLimboResolution",Gt.ce))}}async function Fi(t,e,n){const i=H(t),r=[],s=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((o,l)=>{a.push(i.pu(l,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){r.push(c);const f=Q_.As(l.targetId,c);s.push(f)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(l,c){const h=H(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>O.forEach(c,m=>O.forEach(m.Es,g=>h.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>O.forEach(m.ds,g=>h.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!Xr(f))throw f;j($_,"Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const g=h.Ms.get(m),w=g.snapshotVersion,I=g.withLastLimboFreeSnapshotVersion(w);h.Ms=h.Ms.insert(m,I)}}}(i.localStore,s))}async function M3(t,e){const n=H(t);if(!n.currentUser.isEqual(e)){j(es,"User change. New user:",e.toKey());const i=await TC(n.localStore,e);n.currentUser=e,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new z(k.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Fi(n,i.Ls)}}function k3(t,e){const n=H(t),i=n.Au.get(e);if(i&&i.hu)return ne().add(i.key);{let r=ne();const s=n.Iu.get(e);if(!s)return r;for(const a of s){const o=n.Tu.get(a);r=r.unionWith(o.view.nu)}return r}}async function L3(t,e){const n=H(t),i=await Ff(n.localStore,e.query,!0),r=e.view.cu(i);return n.isPrimaryClient&&Xg(n,e.targetId,r.au),r}async function U3(t,e){const n=H(t);return AC(n.localStore,e).then(i=>Fi(n,i))}async function z3(t,e,n,i){const r=H(t),s=await function(o,l){const c=H(o),h=H(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",f=>h.er(f,l).next(m=>m?c.localDocuments.getDocuments(f,m):O.resolve(null)))}(r.localStore,e);s!==null?(n==="pending"?await Wo(r.remoteStore):n==="acknowledged"||n==="rejected"?(lv(r,e,i||null),ov(r,e),function(o,l){H(H(o).mutationQueue).ir(l)}(r.localStore,e)):Q(6720,"Unknown batchState",{Su:n}),await Fi(r,s)):j(es,"Cannot apply mutation batch with id: "+e)}async function B3(t,e){const n=H(t);if(Ud(n),cv(n),e===!0&&n.gu!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),r=await Ww(n,i.toArray());n.gu=!0,await Yg(n.remoteStore,!0);for(const s of r)Ld(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const i=[];let r=Promise.resolve();n.Iu.forEach((s,a)=>{n.sharedClientState.isLocalQueryTarget(a)?i.push(a):r=r.then(()=>(Ro(n,a),Ao(n.localStore,a,!0))),Io(n.remoteStore,a)}),await r,await Ww(n,i),function(a){const o=H(a);o.Au.forEach((l,c)=>{Io(o.remoteStore,c)}),o.Ru.Jr(),o.Au=new Map,o.du=new xe(q.comparator)}(n),n.gu=!1,await Yg(n.remoteStore,!1)}}async function Ww(t,e,n){const i=H(t),r=[],s=[];for(const a of e){let o;const l=i.Iu.get(a);if(l&&l.length!==0){o=await bo(i.localStore,Ot(l[0]));for(const c of l){const h=i.Tu.get(c),f=await L3(i,h);f.snapshot&&s.push(f.snapshot)}}else{const c=await bC(i.localStore,a);o=await bo(i.localStore,c),await av(i,KC(c),a,!1,o.resumeToken)}r.push(o)}return i.Pu.H_(s),r}function KC(t){return b1(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function j3(t){return function(n){return H(H(n).persistence).Ts()}(H(t).localStore)}async function F3(t,e,n,i){const r=H(t);if(r.gu)return void j(es,"Ignoring unexpected query state notification.");const s=r.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const a=await AC(r.localStore,C1(s[0])),o=Sc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Ge.EMPTY_BYTE_STRING);await Fi(r,a,o);break}case"rejected":await Ao(r.localStore,e,!0),Ro(r,e,i);break;default:Q(64155,n)}}async function q3(t,e,n){const i=Ud(t);if(i.gu){for(const r of e){if(i.Iu.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){j(es,"Adding an already active target "+r);continue}const s=await bC(i.localStore,r),a=await bo(i.localStore,s);await av(i,KC(s),a.targetId,!1,a.resumeToken),Ld(i.remoteStore,a)}for(const r of n)i.Iu.has(r)&&await Ao(i.localStore,r,!1).then(()=>{Io(i.remoteStore,r),Ro(i,r)}).catch(Wr)}}function Ud(t){const e=H(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=k3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N3.bind(null,e),e.Pu.H_=E3.bind(null,e.eventManager),e.Pu.yu=T3.bind(null,e.eventManager),e}function cv(t){const e=H(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V3.bind(null,e),e}function H3(t,e,n){const i=H(t);(async function(s,a,o){try{const l=await a.getMetadata();if(await function(g,w){const I=H(g),N=Je(w.createTime);return I.persistence.runTransaction("hasNewerBundle","readonly",v=>I.Ii.getBundleMetadata(v,w.id)).then(v=>!!v&&v.createTime.compareTo(N)>=0)}(s.localStore,l))return await a.close(),o._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(l)),Promise.resolve(new Set);o._updateProgress(zC(l));const c=new sv(l,a.serializer);let h=await a.bu();for(;h;){const m=await c.Ga(h);m&&o._updateProgress(m),h=await a.bu()}const f=await c.ja(s.localStore);return await Fi(s,f.Ha,void 0),await function(g,w){const I=H(g);return I.persistence.runTransaction("Save bundle","readwrite",N=>I.Ii.saveBundleMetadata(N,w))}(s.localStore,l),o._completeWith(f.progress),Promise.resolve(f.Ja)}catch(l){return pn(es,`Loading bundle failed with ${l}`),o._failWith(l),Promise.resolve(new Set)}})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}class Co{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ia(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return EC(this.persistence,new vC,e.initialUser,this.serializer)}Cu(e){return new H_(kd.mi,this.serializer)}Du(e){return new NC}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Co.provider={build:()=>new Co};class hv extends Co{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Y(this.persistence.referenceDelegate instanceof jf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new dC(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Vt.withCacheSize(this.cacheSizeBytes):Vt.DEFAULT;return new H_(i=>jf.mi(i,n),this.serializer)}}class fv extends Co{constructor(e,n,i){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await cv(this.xu.syncEngine),await Wo(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return EC(this.persistence,new vC,e.initialUser,this.serializer)}Fu(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new dC(i,e.asyncQueue,n)}Mu(e,n){const i=new rL(n,this.persistence);return new iL(e.asyncQueue,i)}Cu(e){const n=K_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Vt.withCacheSize(this.cacheSizeBytes):Vt.DEFAULT;return new G_(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,xC(),Gh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new NC}}class QC extends fv{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof pp&&(this.sharedClientState.syncEngine={Co:z3.bind(null,n),vo:F3.bind(null,n),Fo:q3.bind(null,n),Ts:j3.bind(null,n),Do:U3.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async i=>{await B3(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}Du(e){const n=xC();if(!pp.v(n))throw new z(k.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=K_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new pp(n,e.asyncQueue,i,e.clientId,e.initialUser)}}class Hr{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Yw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=M3.bind(null,this.syncEngine),await Yg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new v3}()}createDatastore(e){const n=ia(e.databaseInfo.databaseId),i=function(s){return new t3(s)}(e.databaseInfo);return function(s,a,o,l){return new s3(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,a,o){return new o3(i,r,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>Yw(this.syncEngine,n,0),function(){return Fw.v()?new Fw:new X6}())}createSyncEngine(e,n){return function(r,s,a,o,l,c,h){const f=new b3(r,s,a,o,l,c);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=H(r);j($s,"RemoteStore shutting down."),s.Ea.add(5),await Yo(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Hr.provider={build:()=>new Hr};function Xw(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):We("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new Tt,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(i=>{i&&i.$a()?this.metadata.resolve(i.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Qa)}`))},i=>this.metadata.reject(i))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),i=Number(n);isNaN(i)&&this.Qu(`length string (${n}) is not valid number`);const r=await this.$u(i);return new UC(JSON.parse(r),e.length+i)}Uu(){return this.buffer.findIndex(e=>e===123)}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let i=this.bu();if(!i||!i.$a())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(i==null?void 0:i.Qa)}`);this.metadata=i;do i=this.bu(),i!==null&&this.elements.push(i);while(i!==null)}getMetadata(){return this.metadata}Wu(){return this.elements}bu(){if(this.cursor===this.bundleData.length)return null;const e=this.qu(),n=this.$u(e);return new UC(JSON.parse(n),e)}$u(e){if(this.cursor+e>this.bundleData.length)throw new z(k.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}qu(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const a=H(r),o={documents:s.map(f=>Fu(a.serializer,f))},l=await a.Ho("BatchGetDocuments",a.serializer.databaseId,ae.emptyPath(),o,s.length),c=new Map;l.forEach(f=>{const m=u6(a.serializer,f);c.set(m.key.toString(),m)});const h=[];return s.forEach(f=>{const m=c.get(f.toString());Y(!!m,55234,{key:f}),h.push(m)}),h}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new $o(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=q.fromPath(i);this.mutations.push(new M_(r,this.precondition(r)))}),await async function(i,r){const s=H(i),a={writes:r.map(o=>qu(s.serializer,o))};await s.Go("Commit",s.serializer.databaseId,ae.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Q(50498,{Gu:e.constructor.name});n=W.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new z(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(W.min())?je.exists(!1):je.updateTime(n):je.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(W.min()))throw new z(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return je.updateTime(n)}return je.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.zu=i.maxAttempts,this.M_=new W_(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new Q3(this.datastore),n=this.Hu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Yu(r)}))}).catch(i=>{this.Yu(i)})})}Hu(e){try{const n=this.updateFunction(e);return!gc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!F1(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="FirestoreClient";class Y3{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=_t.UNAUTHENTICATED,this.clientId=Ed.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{j(Gr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(j(Gr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Jo(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function yp(t,e){t.asyncQueue.verifyOperationInProgress(),j(Gr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await TC(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Jw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await dv(t);j(Gr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Hw(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Hw(e.remoteStore,r)),t._onlineComponents=e}async function dv(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j(Gr,"Using user provided OfflineComponentProvider");try{await yp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===k.FAILED_PRECONDITION||r.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;pn("Error using user provided cache. Falling back to memory cache: "+n),await yp(t,new Co)}}else j(Gr,"Using default OfflineComponentProvider"),await yp(t,new hv(void 0));return t._offlineComponents}async function Bd(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(j(Gr,"Using user provided OnlineComponentProvider"),await Jw(t,t._uninitializedComponentsProvider._online)):(j(Gr,"Using default OnlineComponentProvider"),await Jw(t,new Hr))),t._onlineComponents}function $C(t){return dv(t).then(e=>e.persistence)}function Zo(t){return dv(t).then(e=>e.localStore)}function YC(t){return Bd(t).then(e=>e.remoteStore)}function mv(t){return Bd(t).then(e=>e.syncEngine)}function WC(t){return Bd(t).then(e=>e.datastore)}async function Do(t){const e=await Bd(t),n=e.eventManager;return n.onListen=A3.bind(null,e.syncEngine),n.onUnlisten=R3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=I3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=C3.bind(null,e.syncEngine),n}function W3(t){return t.asyncQueue.enqueue(async()=>{const e=await $C(t),n=await YC(t);return e.setNetworkEnabled(!0),function(r){const s=H(r);return s.Ea.delete(0),bc(s)}(n)})}function X3(t){return t.asyncQueue.enqueue(async()=>{const e=await $C(t),n=await YC(t);return e.setNetworkEnabled(!1),async function(r){const s=H(r);s.Ea.add(0),await Yo(s),s.Ra.set("Offline")}(n)})}function J3(t,e){const n=new Tt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const o=await function(c,h){const f=H(c);return f.persistence.runTransaction("read document","readonly",m=>f.localDocuments.getDocument(m,h))}(r,s);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new z(k.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const l=Jo(o,`Failed to get document '${s} from cache`);a.reject(l)}}(await Zo(t),e,n)),n.promise}function XC(t,e,n={}){const i=new Tt;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const h=new zd({next:m=>{h.Nu(),a.enqueueAndForget(()=>nv(s,f));const g=m.docs.has(o);!g&&m.fromCache?c.reject(new z(k.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?c.reject(new z(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new rv(Ko(o.path),h,{includeMetadataChanges:!0,qa:!0});return tv(s,f)}(await Do(t),t.asyncQueue,e,n,i)),i.promise}function Z3(t,e){const n=new Tt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,a){try{const o=await Ff(r,s,!0),l=new FC(s,o.Qs),c=l.ru(o.documents),h=l.applyChanges(c,!1);a.resolve(h.snapshot)}catch(o){const l=Jo(o,`Failed to execute query '${s} against cache`);a.reject(l)}}(await Zo(t),e,n)),n.promise}function JC(t,e,n={}){const i=new Tt;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const h=new zd({next:m=>{h.Nu(),a.enqueueAndForget(()=>nv(s,f)),m.fromCache&&l.source==="server"?c.reject(new z(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new rv(o,h,{includeMetadataChanges:!0,qa:!0});return tv(s,f)}(await Do(t),t.asyncQueue,e,n,i)),i.promise}function eU(t,e,n){const i=new Tt;return t.asyncQueue.enqueueAndForget(async()=>{try{const r=await WC(t);i.resolve(async function(a,o,l){var I;const c=H(a),{request:h,gt:f,parent:m}=Z1(c.serializer,A1(o),l);c.connection.$o||delete h.parent;const g=(await c.Ho("RunAggregationQuery",c.serializer.databaseId,m,h,1)).filter(N=>!!N.result);Y(g.length===1,64727);const w=(I=g[0].result)==null?void 0:I.aggregateFields;return Object.keys(w).reduce((N,v)=>(N[f[v]]=w[v],N),{})}(r,e,n))}catch(r){i.reject(r)}}),i.promise}function tU(t,e){const n=new zd(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,s){H(r).Ca.add(s),s.next()}(await Do(t),n)),()=>{n.Nu(),t.asyncQueue.enqueueAndForget(async()=>function(r,s){H(r).Ca.delete(s)}(await Do(t),n))}}function nU(t,e,n,i){const r=function(a,o){let l;return l=typeof a=="string"?H1().encode(a):a,function(h,f){return new G3(h,f)}(function(h,f){if(h instanceof Uint8Array)return Xw(h,f);if(h instanceof ArrayBuffer)return Xw(new Uint8Array(h),f);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),o)}(n,ia(e));t.asyncQueue.enqueueAndForget(async()=>{H3(await mv(t),r,i)})}function iU(t,e){return t.asyncQueue.enqueue(async()=>function(i,r){const s=H(i);return s.persistence.runTransaction("Get named query","readonly",a=>s.Ii.getNamedQuery(a,r))}(await Zo(t),e))}function ZC(t,e){return function(i,r){return new K3(i,r)}(t,e)}function rU(t,e){return t.asyncQueue.enqueue(async()=>async function(i,r){const s=H(i),a=s.indexManager,o=[];return s.persistence.runTransaction("Configure indexes","readwrite",l=>a.getFieldIndexes(l).next(c=>function(f,m,g,w,I){f=[...f],m=[...m],f.sort(g),m.sort(g);const N=f.length,v=m.length;let y=0,E=0;for(;y<v&&E<N;){const x=g(f[E],m[y]);x<0?I(f[E++]):x>0?w(m[y++]):(y++,E++)}for(;y<v;)w(m[y++]);for(;E<N;)I(f[E++])}(c,r,Z4,h=>{o.push(a.addFieldIndex(l,h))},h=>{o.push(a.deleteFieldIndex(l,h))})).next(()=>O.waitFor(o)))}(await Zo(t),e))}function sU(t,e){return t.asyncQueue.enqueue(async()=>function(i,r){H(i).Fs.Vs=r}(await Zo(t),e))}function aU(t){return t.asyncQueue.enqueue(async()=>function(n){const i=H(n),r=i.indexManager;return i.persistence.runTransaction("Delete All Indexes","readwrite",s=>r.deleteAllFieldIndexes(s))}(await Zo(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD="firestore.googleapis.com",eb=!0;class tb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new z(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tD,this.ssl=eb}else this.host=e.host,this.ssl=e.ssl??eb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fC)throw new z(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eD(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(k.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ac{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new zR;switch(i.type){case"firstParty":return new K4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new z(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Zw.get(n);i&&(j("ComponentProvider","Removing Datastore"),Zw.delete(n),i.terminate())}(this),Promise.resolve()}}function nD(t,e,n,i={}){var c;t=oe(t,Ac);const r=ta(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;r&&(l_(`https://${o}`),jI("Firestore",!0)),s.host!==tD&&s.host!==o&&pn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:r,emulatorOptions:i};if(!Ln(l,a)&&(t._setSettings(l),i.mockUserToken)){let h,f;if(typeof i.mockUserToken=="string")h=i.mockUserToken,f=_t.MOCK_USER;else{h=JP(i.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new z(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new _t(m)}t._authCredentials=new q4(new UR(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ft(this.firestore,e,this._query)}}class Te{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Te(this.firestore,e,this._key)}toJSON(){return{type:Te._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(na(n,Te._jsonSchema))return new Te(e,i||null,new q(ae.fromString(n.referencePath)))}}Te._jsonSchemaVersion="firestore/documentReference/1.0",Te._jsonSchema={type:ot("string",Te._jsonSchemaVersion),referencePath:ot("string")};class Mn extends ft{constructor(e,n,i){super(e,n,Ko(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Te(this.firestore,null,new q(e))}withConverter(e){return new Mn(this.firestore,e,this._path)}}function yi(t,e,...n){if(t=we(t),S_("collection","path",e),t instanceof Ac){const i=ae.fromString(e,...n);return qS(i),new Mn(t,null,i)}{if(!(t instanceof Te||t instanceof Mn))throw new z(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ae.fromString(e,...n));return qS(i),new Mn(t.firestore,null,i)}}function oU(t,e){if(t=oe(t,Ac),S_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new z(k.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ft(t,null,function(i){return new zi(ae.emptyPath(),i)}(e))}function on(t,e,...n){if(t=we(t),arguments.length===1&&(e=Ed.newId()),S_("doc","path",e),t instanceof Ac){const i=ae.fromString(e,...n);return FS(i),new Te(t,null,new q(i))}{if(!(t instanceof Te||t instanceof Mn))throw new z(k.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ae.fromString(e,...n));return FS(i),new Te(t.firestore,t instanceof Mn?t.converter:null,new q(i))}}function lU(t,e){return t=we(t),e=we(e),(t instanceof Te||t instanceof Mn)&&(e instanceof Te||e instanceof Mn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function pv(t,e){return t=we(t),e=we(e),t instanceof ft&&e instanceof ft&&t.firestore===e.firestore&&vc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="AsyncQueue";class ib{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new W_(this,"async_queue_retry"),this._c=()=>{const i=Gh();i&&j(nb,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Gh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Gh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Tt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xr(e))throw e;j(nb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,We("INTERNAL UNHANDLED ERROR: ",rb(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=ev.createAndSchedule(this,e,n,i,s=>this.hc(s));return this.tc.push(r),r}uc(){this.nc&&Q(47125,{Pc:rb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function rb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class iD{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU=-1;class Re extends Ac{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new ib,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ib(e),this._firestoreClient=void 0,await e}}}function cU(t,e,n){n||(n=Uu);const i=hc(t,"firestore");if(i.isInitialized(n)){const r=i.getImmediate({identifier:n}),s=i.getOptions(n);if(Ln(s,e))return r;throw new z(k.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new z(k.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fC)throw new z(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&ta(e.host)&&l_(e.host),i.initialize({options:e,instanceIdentifier:n})}function rD(t,e){const n=typeof t=="object"?t:YI(),i=typeof t=="string"?t:e||Uu,r=hc(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=WP("firestore");s&&nD(r,...s)}return r}function qe(t){if(t._terminated)throw new z(k.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||sD(t),t._firestoreClient}function sD(t){var i,r,s;const e=t._freezeSettings(),n=function(o,l,c,h){return new PL(o,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,eD(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Y3(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}function hU(t,e){pn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return aD(t,Hr.provider,{build:i=>new fv(i,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function fU(t){pn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();aD(t,Hr.provider,{build:n=>new QC(n,e.cacheSizeBytes)})}function aD(t,e,n){if((t=oe(t,Re))._firestoreClient||t._terminated)throw new z(k.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new z(k.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},sD(t)}function dU(t){if(t._initialized&&!t._terminated)throw new z(k.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Tt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(i){if(!Jn.v())return Promise.resolve();const r=i+_C;await Jn.delete(r)}(K_(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function mU(t){return function(n){const i=new Tt;return n.asyncQueue.enqueueAndForget(async()=>P3(await mv(n),i)),i.promise}(qe(t=oe(t,Re)))}function pU(t){return W3(qe(t=oe(t,Re)))}function gU(t){return X3(qe(t=oe(t,Re)))}function yU(t){return cM(t.app,"firestore",t._databaseId.database),t._delete()}function Jg(t,e){const n=qe(t=oe(t,Re)),i=new iD;return nU(n,t._databaseId,e,i),i}function oD(t,e){return iU(qe(t=oe(t,Re)),e).then(n=>n?new ft(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class lD{constructor(e,n,i){this._userDataWriter=n,this._data=i,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ht(Ge.fromBase64String(e))}catch(n){throw new z(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ht(Ge.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ht._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(na(e,Ht._jsonSchema))return Ht.fromBase64String(e.bytes)}}Ht._jsonSchemaVersion="firestore/bytes/1.0",Ht._jsonSchema={type:ot("string",Ht._jsonSchemaVersion),bytes:ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function _U(){return new ts(Cg)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:kn._jsonSchemaVersion}}static fromJSON(e){if(na(e,kn._jsonSchema))return new kn(e.latitude,e.longitude)}}kn._jsonSchemaVersion="firestore/geoPoint/1.0",kn._jsonSchema={type:ot("string",kn._jsonSchemaVersion),latitude:ot("number"),longitude:ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Rn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(na(e,Rn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Rn(e.vectorValues);throw new z(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Rn._jsonSchemaVersion="firestore/vectorValue/1.0",Rn._jsonSchema={type:ot("string",Rn._jsonSchemaVersion),vectorValues:ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU=/^__.*__$/;class EU{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qo(e,this.data,n,this.fieldTransforms)}}class uD{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ji(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function cD(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ac:t})}}class jd{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new jd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Kf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(cD(this.Ac)&&vU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class TU{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||ia(e)}Cc(e,n,i,r=!1){return new jd({Ac:e,methodName:n,Dc:i,path:ke.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ra(t){const e=t._freezeSettings(),n=ia(t._databaseId);return new TU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Fd(t,e,n,i,r,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,n,r);Sv("Data must be an object, but it was:",a,i);const o=dD(i,a);let l,c;if(s.merge)l=new Kt(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const m=Hu(e,f,n);if(!a.contains(m))throw new z(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);pD(h,m)||h.push(m)}l=new Kt(h),c=a.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=a.fieldTransforms;return new EU(new Rt(o),l,c)}class Ic extends ns{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ic}}function hD(t,e,n){return new jd({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class gv extends ns{_toFieldTransform(e){return new Tc(e.path,new To)}isEqual(e){return e instanceof gv}}class yv extends ns{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=hD(this,e,!0),i=this.vc.map(s=>sa(s,n)),r=new qs(i);return new Tc(e.path,r)}isEqual(e){return e instanceof yv&&Ln(this.vc,e.vc)}}class _v extends ns{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=hD(this,e,!0),i=this.vc.map(s=>sa(s,n)),r=new Hs(i);return new Tc(e.path,r)}isEqual(e){return e instanceof _v&&Ln(this.vc,e.vc)}}class vv extends ns{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new So(e.serializer,O1(e.serializer,this.Fc));return new Tc(e.path,n)}isEqual(e){return e instanceof vv&&this.Fc===e.Fc}}function Ev(t,e,n,i){const r=t.Cc(1,e,n);Sv("Data must be an object, but it was:",r,i);const s=[],a=Rt.empty();Jr(i,(l,c)=>{const h=qd(e,l,n);c=we(c);const f=r.yc(h);if(c instanceof Ic)s.push(h);else{const m=sa(c,f);m!=null&&(s.push(h),a.set(h,m))}});const o=new Kt(s);return new uD(a,o,r.fieldTransforms)}function Tv(t,e,n,i,r,s){const a=t.Cc(1,e,n),o=[Hu(e,i,n)],l=[r];if(s.length%2!=0)throw new z(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)o.push(Hu(e,s[m])),l.push(s[m+1]);const c=[],h=Rt.empty();for(let m=o.length-1;m>=0;--m)if(!pD(c,o[m])){const g=o[m];let w=l[m];w=we(w);const I=a.yc(g);if(w instanceof Ic)c.push(g);else{const N=sa(w,I);N!=null&&(c.push(g),h.set(g,N))}}const f=new Kt(c);return new uD(h,f,a.fieldTransforms)}function fD(t,e,n,i=!1){return sa(n,t.Cc(i?4:3,e))}function sa(t,e){if(mD(t=we(t)))return Sv("Unsupported field value:",e,t),dD(t,e);if(t instanceof ns)return function(i,r){if(!cD(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const o of i){let l=sa(o,r.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=we(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return O1(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=ye.fromDate(i);return{timestampValue:wo(r.serializer,s)}}if(i instanceof ye){const s=new ye(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:wo(r.serializer,s)}}if(i instanceof kn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ht)return{bytesValue:Q1(r.serializer,i._byteString)};if(i instanceof Te){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:B_(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Rn)return function(a,o){return{mapValue:{fields:{[D_]:{stringValue:N_},[_o]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.Sc("VectorValues must only contain numeric values.");return O_(o.serializer,c)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${Td(i)}`)}(t,e)}function dD(t,e){const n={};return o1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jr(t,(i,r)=>{const s=sa(r,e.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function mD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ye||t instanceof kn||t instanceof Ht||t instanceof Te||t instanceof ns||t instanceof Rn)}function Sv(t,e,n){if(!mD(n)||!FR(n)){const i=Td(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Hu(t,e,n){if((e=we(e))instanceof ts)return e._internalPath;if(typeof e=="string")return qd(t,e);throw Kf("Field path arguments must be of type string or ",t,!1,void 0,n)}const SU=new RegExp("[~\\*/\\[\\]]");function qd(t,e,n){if(e.search(SU)>=0)throw Kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ts(...e.split("."))._internalPath}catch{throw Kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kf(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${i}`),a&&(l+=` in document ${r}`),l+=")"),new z(k.INVALID_ARGUMENT,o+t+l)}function pD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Te(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class wU extends Gu{data(){return super.data()}}function Hd(t,e){return typeof e=="string"?qd(t,e):e instanceof ts?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wv{}class el extends wv{}function Ku(t,e,...n){let i=[];e instanceof wv&&i.push(e),i=i.concat(n),function(s){const a=s.filter(l=>l instanceof aa).length,o=s.filter(l=>l instanceof tl).length;if(a>1||a>0&&o>0)throw new z(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class tl extends el{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new tl(e,n,i)}_apply(e){const n=this._parse(e);return _D(e._query,n),new ft(e.firestore,e.converter,zg(e._query,n))}_parse(e){const n=ra(e.firestore);return function(s,a,o,l,c,h,f){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new z(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){ab(f,h);const w=[];for(const I of f)w.push(sb(l,s,I));m={arrayValue:{values:w}}}else m=sb(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||ab(f,h),m=fD(o,a,f,h==="in"||h==="not-in");return fe.create(c,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Qu(t,e,n){const i=e,r=Hd("where",t);return tl._create(r,i,n)}class aa extends wv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new aa(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Ee.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let a=r;const o=s.getFlattenedFilters();for(const l of o)_D(a,l),a=zg(a,l)}(e._query,n),new ft(e.firestore,e.converter,zg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function bU(...t){return t.forEach(e=>vD("or",e)),aa._create("or",t)}function AU(...t){return t.forEach(e=>vD("and",e)),aa._create("and",t)}class Gd extends el{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gd(e,n)}_apply(e){const n=function(r,s,a){if(r.startAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new z(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ju(s,a)}(e._query,this._field,this._direction);return new ft(e.firestore,e.converter,function(r,s){const a=r.explicitOrderBy.concat([s]);return new zi(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function Qf(t,e="asc"){const n=e,i=Hd("orderBy",t);return Gd._create(i,n)}class Rc extends el{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Rc(e,n,i)}_apply(e){return new ft(e.firestore,e.converter,Lf(e._query,this._limit,this._limitType))}}function bv(t){return qR("limit",t),Rc._create("limit",t,"F")}function IU(t){return qR("limitToLast",t),Rc._create("limitToLast",t,"L")}class Cc extends el{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Cc(e,n,i)}_apply(e){const n=yD(e,this.type,this._docOrFields,this._inclusive);return new ft(e.firestore,e.converter,function(r,s){return new zi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,n))}}function RU(...t){return Cc._create("startAt",t,!0)}function CU(...t){return Cc._create("startAfter",t,!1)}class Dc extends el{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Dc(e,n,i)}_apply(e){const n=yD(e,this.type,this._docOrFields,this._inclusive);return new ft(e.firestore,e.converter,function(r,s){return new zi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,n))}}function DU(...t){return Dc._create("endBefore",t,!1)}function NU(...t){return Dc._create("endAt",t,!0)}function yD(t,e,n,i){if(n[0]=we(n[0]),n[0]instanceof Gu)return function(s,a,o,l,c){if(!l)throw new z(k.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const h=[];for(const f of $a(s))if(f.field.isKeyField())h.push(js(a,l.key));else{const m=l.data.field(f.field);if(Id(m))throw new z(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const g=f.field.canonicalString();throw new z(k.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}h.push(m)}return new Fr(h,c)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=ra(t.firestore);return function(a,o,l,c,h,f){const m=a.explicitOrderBy;if(h.length>m.length)throw new z(k.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let w=0;w<h.length;w++){const I=h[w];if(m[w].field.isKeyField()){if(typeof I!="string")throw new z(k.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof I}`);if(!V_(a)&&I.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${I}' contains a slash.`);const N=a.path.child(ae.fromString(I));if(!q.isDocumentKey(N))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const v=new q(N);g.push(js(o,v))}else{const N=fD(l,c,I);g.push(N)}}return new Fr(g,f)}(t._query,t.firestore._databaseId,r,e,n,i)}}function sb(t,e,n){if(typeof(n=we(n))=="string"){if(n==="")throw new z(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!V_(e)&&n.indexOf("/")!==-1)throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(ae.fromString(n));if(!q.isDocumentKey(i))throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return js(t,new q(i))}if(n instanceof Te)return js(t,n._key);throw new z(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Td(n)}.`)}function ab(t,e){if(!Array.isArray(t)||t.length===0)throw new z(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _D(t,e){const n=function(r,s){for(const a of r)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function vD(t,e){if(!(e instanceof tl||e instanceof aa))throw new z(k.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class Av{convertValue(e,n="none"){switch(Br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Jr(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var i,r,s;const n=(s=(r=(i=e.fields)==null?void 0:i[_o].arrayValue)==null?void 0:r.values)==null?void 0:s.map(a=>Be(a.doubleValue));return new Rn(n)}convertGeoPoint(e){return new kn(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Rd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Lu(e));default:return null}}convertTimestamp(e){const n=Pi(e);return new ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ae.fromString(e);Y(iC(i),9688,{name:e});const r=new zr(i.get(1),i.get(3)),s=new q(i.popFirst(5));return r.isEqual(n)||We(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Iv extends Av{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ht(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Te(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xU(t){return new No("sum",Hu("sum",t))}function VU(t){return new No("avg",Hu("average",t))}function ED(){return new No("count")}function PU(t,e){var n,i;return t instanceof No&&e instanceof No&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)==null?void 0:n.canonicalString())===((i=e._internalFieldPath)==null?void 0:i.canonicalString())}function OU(t,e){return pv(t.query,e.query)&&Ln(t.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD="NOT SUPPORTED";class _i{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yt extends Gu{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Hd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Yt._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function MU(t,e,n){if(na(e,Yt._jsonSchema)){if(e.bundle===TD)throw new z(k.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const i=ia(t._databaseId),r=ZC(e.bundle,i),s=r.Wu(),a=new sv(r.getMetadata(),i);for(const h of s)a.Ga(h);const o=a.documents;if(o.length!==1)throw new z(k.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${o.length} documents.`);const l=xd(i,o[0].document),c=new q(ae.fromString(e.bundleName));return new Yt(t,new Iv(t),c,l,new _i(!1,!1),n||null)}}Yt._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yt._jsonSchema={type:ot("string",Yt._jsonSchemaVersion),bundleSource:ot("string","DocumentSnapshot"),bundleName:ot("string"),bundle:ot("string")};class pu extends Yt{data(e={}){return super.data(e)}}class Wt{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new _i(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new pu(this._firestore,this._userDataWriter,i.key,i,new _i(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(o=>{const l=new pu(r._firestore,r._userDataWriter,o.doc.key,o.doc,new _i(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new pu(r._firestore,r._userDataWriter,o.doc.key,o.doc,new _i(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:LU(o.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wt._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ed.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),r.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kU(t,e,n){if(na(e,Wt._jsonSchema)){if(e.bundle===TD)throw new z(k.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const i=ia(t._databaseId),r=ZC(e.bundle,i),s=r.Wu(),a=new sv(r.getMetadata(),i);for(const m of s)a.Ga(m);if(a.queries.length!==1)throw new z(k.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${a.queries.length} queries.`);const o=Pd(a.queries[0].bundledQuery),l=a.documents;let c=new xs;l.map(m=>{const g=xd(i,m.document);c=c.add(g)});const h=Ys.fromInitialDocuments(o,c,ne(),!1,!1),f=new ft(t,n||null,o);return new Wt(t,new Iv(t),f,h)}}function LU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:t})}}function UU(t,e){return t instanceof Yt&&e instanceof Yt?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Wt&&e instanceof Wt&&t._firestore===e._firestore&&pv(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(t){t=oe(t,Te);const e=oe(t.firestore,Re);return XC(qe(e),t._key).then(n=>Cv(e,t,n))}Wt._jsonSchemaVersion="firestore/querySnapshot/1.0",Wt._jsonSchema={type:ot("string",Wt._jsonSchemaVersion),bundleSource:ot("string","QuerySnapshot"),bundleName:ot("string"),bundle:ot("string")};class is extends Av{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ht(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Te(this.firestore,null,n)}}function zU(t){t=oe(t,Te);const e=oe(t.firestore,Re),n=qe(e),i=new is(e);return J3(n,t._key).then(r=>new Yt(e,i,t._key,r,new _i(r!==null&&r.hasLocalMutations,!0),t.converter))}function BU(t){t=oe(t,Te);const e=oe(t.firestore,Re);return XC(qe(e),t._key,{source:"server"}).then(n=>Cv(e,t,n))}function Vs(t){t=oe(t,ft);const e=oe(t.firestore,Re),n=qe(e),i=new is(e);return gD(t._query),JC(n,t._query).then(r=>new Wt(e,i,t,r))}function jU(t){t=oe(t,ft);const e=oe(t.firestore,Re),n=qe(e),i=new is(e);return Z3(n,t._query).then(r=>new Wt(e,i,t,r))}function FU(t){t=oe(t,ft);const e=oe(t.firestore,Re),n=qe(e),i=new is(e);return JC(n,t._query,{source:"server"}).then(r=>new Wt(e,i,t,r))}function $f(t,e,n){t=oe(t,Te);const i=oe(t.firestore,Re),r=Kd(t.converter,e,n);return nl(i,[Fd(ra(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,je.none())])}function $u(t,e,n,...i){t=oe(t,Te);const r=oe(t.firestore,Re),s=ra(r);let a;return a=typeof(e=we(e))=="string"||e instanceof ts?Tv(s,"updateDoc",t._key,e,n,i):Ev(s,"updateDoc",t._key,e),nl(r,[a.toMutation(t._key,je.exists(!0))])}function qU(t){return nl(oe(t.firestore,Re),[new $o(t._key,je.none())])}function Rv(t,e){const n=oe(t.firestore,Re),i=on(t),r=Kd(t.converter,e);return nl(n,[Fd(ra(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,je.exists(!1))]).then(()=>i)}function Zg(t,...e){var l,c,h;t=we(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Ya(e[i])||(n=e[i++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Ya(e[i])){const f=e[i];e[i]=(l=f.next)==null?void 0:l.bind(f),e[i+1]=(c=f.error)==null?void 0:c.bind(f),e[i+2]=(h=f.complete)==null?void 0:h.bind(f)}let s,a,o;if(t instanceof Te)a=oe(t.firestore,Re),o=Ko(t._key.path),s={next:f=>{e[i]&&e[i](Cv(a,t,f))},error:e[i+1],complete:e[i+2]};else{const f=oe(t,ft);a=oe(f.firestore,Re),o=f._query;const m=new is(a);s={next:g=>{e[i]&&e[i](new Wt(a,m,f,g))},error:e[i+1],complete:e[i+2]},gD(t._query)}return function(m,g,w,I){const N=new zd(I),v=new rv(g,N,w);return m.asyncQueue.enqueueAndForget(async()=>tv(await Do(m),v)),()=>{N.Nu(),m.asyncQueue.enqueueAndForget(async()=>nv(await Do(m),v))}}(qe(a),o,r,s)}function HU(t,e,...n){const i=we(t),r=function(l){const c={bundle:"",bundleName:"",bundleSource:""},h=["bundle","bundleName","bundleSource"];for(const f of h){if(!(f in l)){c.error=`snapshotJson missing required field: ${f}`;break}const m=l[f];if(typeof m!="string"){c.error=`snapshotJson field '${f}' must be a string.`;break}if(m.length===0){c.error=`snapshotJson field '${f}' cannot be an empty string.`;break}f==="bundle"?c.bundle=m:f==="bundleName"?c.bundleName=m:f==="bundleSource"&&(c.bundleSource=m)}return c}(e);if(r.error)throw new z(k.INVALID_ARGUMENT,r.error);let s,a=0;if(typeof n[a]!="object"||Ya(n[a])||(s=n[a++]),r.bundleSource==="QuerySnapshot"){let o=null;if(typeof n[a]=="object"&&Ya(n[a])){const l=n[a++];o={next:l.next,error:l.error,complete:l.complete}}else o={next:n[a++],error:n[a++],complete:n[a++]};return function(c,h,f,m,g){let w,I=!1;return Jg(c,h.bundle).then(()=>oD(c,h.bundleName)).then(v=>{v&&!I&&(g&&v.withConverter(g),w=Zg(v,f||{},m))}).catch(v=>(m.error&&m.error(v),()=>{})),()=>{I||(I=!0,w&&w())}}(i,r,s,o,n[a])}if(r.bundleSource==="DocumentSnapshot"){let o=null;if(typeof n[a]=="object"&&Ya(n[a])){const l=n[a++];o={next:l.next,error:l.error,complete:l.complete}}else o={next:n[a++],error:n[a++],complete:n[a++]};return function(c,h,f,m,g){let w,I=!1;return Jg(c,h.bundle).then(()=>{if(!I){const v=new Te(c,g||null,q.fromPath(h.bundleName));w=Zg(v,f||{},m)}}).catch(v=>(m.error&&m.error(v),()=>{})),()=>{I||(I=!0,w&&w())}}(i,r,s,o,n[a])}throw new z(k.INVALID_ARGUMENT,`unsupported bundle source: ${r.bundleSource}`)}function GU(t,e){return tU(qe(t=oe(t,Re)),Ya(e)?e:{next:e})}function nl(t,e){return function(i,r){const s=new Tt;return i.asyncQueue.enqueueAndForget(async()=>D3(await mv(i),r,s)),s.promise}(qe(t),e)}function Cv(t,e,n){const i=n.docs.get(e._key),r=new is(t);return new Yt(t,r,e._key,i,new _i(n.hasPendingWrites,n.fromCache),e.converter)}function KU(t){return wD(t,{count:ED()})}function wD(t,e){const n=oe(t.firestore,Re),i=qe(n),r=a1(e,(s,a)=>new j1(a,s.aggregateType,s._internalFieldPath));return eU(i,t._query,r).then(s=>function(o,l,c){const h=new is(o);return new lD(l,h,c)}(n,t,s))}class QU{constructor(e){this.kind="memory",this._onlineComponentProvider=Hr.provider,this._offlineComponentProvider=e!=null&&e.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new hv(void 0)}}toJSON(){return{kind:this.kind}}}class $U{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=bD(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class YU{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Co.provider}toJSON(){return{kind:this.kind}}}class WU{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new hv(e)}}toJSON(){return{kind:this.kind}}}function XU(){return new YU}function JU(t){return new WU(t==null?void 0:t.cacheSizeBytes)}function ZU(t){return new QU(t)}function e5(t){return new $U(t)}class t5{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Hr.provider,this._offlineComponentProvider={build:n=>new fv(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class n5{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Hr.provider,this._offlineComponentProvider={build:n=>new QC(n,e==null?void 0:e.cacheSizeBytes)}}}function bD(t){return new t5(t==null?void 0:t.forceOwnership)}function i5(){return new n5}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ra(e)}set(e,n,i){this._verifyNotCommitted();const r=vr(e,this._firestore),s=Kd(r.converter,n,i),a=Fd(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,je.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=vr(e,this._firestore);let a;return a=typeof(n=we(n))=="string"||n instanceof ts?Tv(this._dataReader,"WriteBatch.update",s._key,n,i,r):Ev(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,je.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=vr(e,this._firestore);return this._mutations=this._mutations.concat(new $o(n._key,je.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new z(k.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vr(t,e){if((t=we(t)).firestore!==e)throw new z(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=ra(e)}get(e){const n=vr(e,this._firestore),i=new Iv(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return Q(24041);const s=r[0];if(s.isFoundDocument())return new Gu(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new Gu(this._firestore,i,n._key,null,n.converter);throw Q(18433,{doc:s})})}set(e,n,i){const r=vr(e,this._firestore),s=Kd(r.converter,n,i),a=Fd(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,a),this}update(e,n,i,...r){const s=vr(e,this._firestore);let a;return a=typeof(n=we(n))=="string"||n instanceof ts?Tv(this._dataReader,"Transaction.update",s._key,n,i,r):Ev(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,a),this}delete(e){const n=vr(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID extends s5{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=vr(e,this._firestore),i=new is(this._firestore);return super.get(e).then(r=>new Yt(this._firestore,i,n._key,r._document,new _i(!1,!1),n.converter))}}function a5(t,e,n){t=oe(t,Re);const i={...r5,...n};return function(s){if(s.maxAttempts<1)throw new z(k.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,a,o){const l=new Tt;return s.asyncQueue.enqueueAndForget(async()=>{const c=await WC(s);new $3(s.asyncQueue,c,o,a,l).ju()}),l.promise}(qe(t),r=>e(new ID(t,r)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(){return new Ic("deleteField")}function vi(){return new gv("serverTimestamp")}function l5(...t){return new yv("arrayUnion",t)}function u5(...t){return new _v("arrayRemove",t)}function fr(t){return new vv("increment",t)}function c5(t){return new Rn(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(t){return qe(t=oe(t,Re)),new AD(t,e=>nl(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(t,e){const n=qe(t=oe(t,Re));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return pn("Cannot enable indexes when persistence is disabled"),Promise.resolve();const i=function(s){const a=typeof s=="string"?function(c){try{return JSON.parse(c)}catch(h){throw new z(k.INVALID_ARGUMENT,"Failed to parse JSON: "+(h==null?void 0:h.message))}}(s):s,o=[];if(Array.isArray(a.indexes))for(const l of a.indexes){const c=ob(l,"collectionGroup"),h=[];if(Array.isArray(l.fields))for(const f of l.fields){const m=qd("setIndexConfiguration",ob(f,"fieldPath"));f.arrayConfig==="CONTAINS"?h.push(new Ds(m,2)):f.order==="ASCENDING"?h.push(new Ds(m,0)):f.order==="DESCENDING"&&h.push(new Ds(m,1))}o.push(new ho(ho.UNKNOWN_ID,c,h,fo.empty()))}return o}(e);return rU(n,i)}function ob(t,e){if(typeof t[e]!="string")throw new z(k.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function f5(t){var r;t=oe(t,Re);const e=lb.get(t);if(e)return e;if(((r=qe(t)._uninitializedComponentsProvider)==null?void 0:r._offline.kind)!=="persistent")return null;const i=new CD(t);return lb.set(t,i),i}function d5(t){DD(t,!0)}function m5(t){DD(t,!1)}function p5(t){aU(qe(t._firestore)).then(e=>j("deleting all persistent cache indexes succeeded")).catch(e=>pn("deleting all persistent cache indexes failed",e))}function DD(t,e){sU(qe(t._firestore),e).then(n=>j(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>pn(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const lb=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(t){var i;const e=qe(oe(t.firestore,Re)),n=(i=e._onlineComponents)==null?void 0:i.datastore.serializer;return n===void 0?null:Vd(n,Ot(t._query)).ft}function y5(t,e){var s;const n=a1(e,(a,o)=>new j1(o,a.aggregateType,a._internalFieldPath)),i=qe(oe(t.firestore,Re)),r=(s=i._onlineComponents)==null?void 0:s.datastore.serializer;return r===void 0?null:Z1(r,A1(t._query),n,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Dv.instance.onExistenceFilterMismatch(e)}}class Dv{constructor(){this.Mc=new Map}static get instance(){return mh||(mh=new Dv,function(n){if(du)throw new Error("a TestingHooksSpi instance is already set");du=n}(mh)),mh}lt(e){this.Mc.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),i=this.Mc;return i.set(n,e),()=>i.delete(n)}}let mh=null;(function(e,n=!0){(function(r){Go=r})(qo),oo(new Us("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),o=new Re(new H4(i.getProvider("auth-internal")),new Q4(a,i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new z(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zr(c.options.projectId,h)}(a,r),a);return s={useFetchStreams:n,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),xr(BS,jS,e),xr(BS,jS,"esm2020")})();const v5=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Av,AggregateField:No,AggregateQuerySnapshot:lD,Bytes:Ht,CACHE_SIZE_UNLIMITED:uU,CollectionReference:Mn,DocumentReference:Te,DocumentSnapshot:Yt,FieldPath:ts,FieldValue:ns,Firestore:Re,FirestoreError:z,GeoPoint:kn,LoadBundleTask:iD,PersistentCacheIndexManager:CD,Query:ft,QueryCompositeFilterConstraint:aa,QueryConstraint:el,QueryDocumentSnapshot:pu,QueryEndAtConstraint:Dc,QueryFieldFilterConstraint:tl,QueryLimitConstraint:Rc,QueryOrderByConstraint:Gd,QuerySnapshot:Wt,QueryStartAtConstraint:Cc,SnapshotMetadata:_i,Timestamp:ye,Transaction:ID,VectorValue:Rn,WriteBatch:AD,_AutoId:Ed,_ByteString:Ge,_DatabaseId:zr,_DocumentKey:q,_EmptyAppCheckTokenProvider:$4,_EmptyAuthCredentialsProvider:zR,_FieldPath:ke,_TestingHooks:_5,_cast:oe,_debugAssert:F4,_internalAggregationQueryToProtoRunAggregationQueryRequest:y5,_internalQueryToProtoQueryTarget:g5,_isBase64Available:xL,_logWarn:pn,_validateIsNotUsedTogether:jR,addDoc:Rv,aggregateFieldEqual:PU,aggregateQuerySnapshotEqual:OU,and:AU,arrayRemove:u5,arrayUnion:l5,average:VU,clearIndexedDbPersistence:dU,collection:yi,collectionGroup:oU,connectFirestoreEmulator:nD,count:ED,deleteAllPersistentCacheIndexes:p5,deleteDoc:qU,deleteField:o5,disableNetwork:gU,disablePersistentCacheIndexAutoCreation:m5,doc:on,documentId:_U,documentSnapshotFromJSON:MU,enableIndexedDbPersistence:hU,enableMultiTabIndexedDbPersistence:fU,enableNetwork:pU,enablePersistentCacheIndexAutoCreation:d5,endAt:NU,endBefore:DU,ensureFirestoreConfigured:qe,executeWrite:nl,getAggregateFromServer:wD,getCountFromServer:KU,getDoc:SD,getDocFromCache:zU,getDocFromServer:BU,getDocs:Vs,getDocsFromCache:jU,getDocsFromServer:FU,getFirestore:rD,getPersistentCacheIndexManager:f5,increment:fr,initializeFirestore:cU,limit:bv,limitToLast:IU,loadBundle:Jg,memoryEagerGarbageCollector:XU,memoryLocalCache:ZU,memoryLruGarbageCollector:JU,namedQuery:oD,onSnapshot:Zg,onSnapshotResume:HU,onSnapshotsInSync:GU,or:bU,orderBy:Qf,persistentLocalCache:e5,persistentMultipleTabManager:i5,persistentSingleTabManager:bD,query:Ku,queryEqual:pv,querySnapshotFromJSON:kU,refEqual:lU,runTransaction:a5,serverTimestamp:vi,setDoc:$f,setIndexConfiguration:h5,setLogLevel:j4,snapshotEqual:UU,startAfter:CU,startAt:RU,sum:xU,terminate:yU,updateDoc:$u,vector:c5,waitForPendingWrites:mU,where:Qu,writeBatch:RD},Symbol.toStringTag,{value:"Module"}));var E5="firebase",T5="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xr(E5,T5,"app");const S5={apiKey:"AIzaSyC_XpIE98F0uisHXBZS71nkWppTHp9on8c",authDomain:"spintowin-20c4e.firebaseapp.com",projectId:"spintowin-20c4e",storageBucket:"spintowin-20c4e.firebasestorage.app",messagingSenderId:"625209568446",appId:"1:625209568446:web:ddbd663683701c130042ef",measurementId:"G-PKXELYZ5Z6"},ND=$I(S5),Vl=z4(ND),nt=rD(ND),xD=V.createContext();function Nc(){return V.useContext(xD)}function w5({children:t}){const[e,n]=V.useState(null),[i,r]=V.useState(!0);async function s(h,f,m){const g=await Tk(Vl,h,f);return m&&await bk(g.user,{displayName:m}),await $f(on(nt,"users",g.user.uid),{uid:g.user.uid,email:h,displayName:m||null,photoURL:null,createdAt:vi(),updatedAt:vi(),settings:{defaultSpinDuration:5e3,soundEnabled:!0,theme:"system"},stats:{totalWheels:0,totalSpins:0}}),g.user}async function a(h,f){return Sk(Vl,h,f)}async function o(){const h=new ci,f=await $k(Vl,h);return(await FP(()=>Promise.resolve().then(()=>v5),[]).then(g=>g.getDoc(on(nt,"users",f.user.uid)))).exists()||await $f(on(nt,"users",f.user.uid),{uid:f.user.uid,email:f.user.email,displayName:f.user.displayName,photoURL:f.user.photoURL,createdAt:vi(),updatedAt:vi(),settings:{defaultSpinDuration:5e3,soundEnabled:!0,theme:"system"},stats:{totalWheels:0,totalSpins:0}}),f.user}function l(){return Ck(Vl)}V.useEffect(()=>Rk(Vl,f=>{n(f),r(!1)}),[]);const c={currentUser:e,signUp:s,signIn:a,signInWithGoogle:o,signOut:l};return A.jsx(xD.Provider,{value:c,children:!i&&t})}const VD=V.createContext();function b5(){return V.useContext(VD)}function A5({children:t}){const[e,n]=V.useState([]),i=V.useCallback((o,l="info",c=3e3)=>{const h=Date.now();n(f=>[...f,{id:h,message:o,type:l}]),setTimeout(()=>{n(f=>f.filter(m=>m.id!==h))},c)},[]),r=V.useCallback((o,l)=>{i(o,"success",l)},[i]),s=V.useCallback((o,l=4e3)=>{i(o,"error",l)},[i]),a=V.useCallback((o,l)=>{i(o,"info",l)},[i]);return A.jsxs(VD.Provider,{value:{showToast:i,success:r,error:s,info:a},children:[t,A.jsx("div",{className:"toast-container",children:e.map(o=>A.jsx("div",{className:`toast ${o.type}`,children:o.message},o.id))})]})}function I5(){const[t]=OP(),[e,n]=V.useState(t.get("signup")==="true"),[i,r]=V.useState(""),[s,a]=V.useState(""),[o,l]=V.useState(""),[c,h]=V.useState(""),[f,m]=V.useState(!1),{signIn:g,signUp:w,signInWithGoogle:I}=Nc(),N=Fo();async function v(E){E.preventDefault(),h(""),m(!0);try{e?await w(i,s,o):await g(i,s),N("/dashboard")}catch(x){let U="An error occurred. Please try again.";x.code==="auth/email-already-in-use"?U="This email is already registered. Try signing in.":x.code==="auth/weak-password"?U="Password must be at least 6 characters.":x.code==="auth/invalid-email"?U="Please enter a valid email address.":(x.code==="auth/user-not-found"||x.code==="auth/wrong-password"||x.code==="auth/invalid-credential")&&(U="Invalid email or password."),h(U)}finally{m(!1)}}async function y(){h("");try{await I(),N("/dashboard")}catch(E){E.code!=="auth/popup-closed-by-user"&&h("Google sign in failed. Please try again.")}}return A.jsxs("div",{className:"auth-page",children:[A.jsx("header",{className:"header",children:A.jsx("div",{className:"container header-content",children:A.jsx("div",{className:"logo",children:"SpinToWin"})})}),A.jsx("div",{className:"auth-container",children:A.jsxs("div",{className:"auth-card",children:[A.jsx("h1",{children:e?"Sign Up":"Sign In"}),c&&A.jsx("div",{className:"error-message",children:c}),A.jsxs("form",{onSubmit:v,children:[e&&A.jsxs("div",{className:"form-group",children:[A.jsx("label",{htmlFor:"displayName",children:"Name"}),A.jsx("input",{type:"text",id:"displayName",value:o,onChange:E=>l(E.target.value),placeholder:"Your name"})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{htmlFor:"email",children:"Email"}),A.jsx("input",{type:"email",id:"email",required:!0,value:i,onChange:E=>r(E.target.value),placeholder:"you@example.com"})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{htmlFor:"password",children:"Password"}),A.jsx("input",{type:"password",id:"password",required:!0,minLength:"6",value:s,onChange:E=>a(E.target.value),placeholder:"Your password"})]}),A.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:f,children:f?"...":e?"Create Account":"Sign In"})]}),A.jsx("div",{className:"auth-divider",children:A.jsx("span",{children:"or"})}),A.jsx("button",{onClick:y,className:"btn btn-google btn-full",children:"Continue with Google"}),A.jsxs("p",{className:"auth-switch",children:[A.jsx("span",{children:e?"Already have an account?":"Don't have an account?"}),A.jsx("a",{href:"#",onClick:()=>n(!e),children:e?"Sign in":"Sign up"})]})]})})]})}function R5(){const{currentUser:t}=Nc(),[e,n]=V.useState([]),[i,r]=V.useState(!0);V.useEffect(()=>{if(!t){n([]),r(!1);return}s()},[t]);async function s(){try{const c=Ku(yi(nt,"wheels"),Qu("ownerId","==",t.uid),Qf("updatedAt","desc")),f=(await Vs(c)).docs.map(m=>({id:m.id,...m.data()}));n(f)}catch(c){console.error("Error loading wheels:",c)}finally{r(!1)}}async function a(c={}){const h=N5(),f={name:c.name||"New Wheel",description:c.description||"",ownerId:t.uid,segments:c.segments||[{id:ub(),label:"Option 1",color:"#FF6384",weight:1},{id:ub(),label:"Option 2",color:"#36A2EB",weight:1}],appearance:{borderColor:"#333333",borderWidth:4,pointerStyle:"arrow",fontSize:14,fontFamily:"Arial"},visibility:"private",shareId:h,allowAnonymousSpins:!0,spinConfig:{duration:5e3,minRotations:5,maxRotations:10,easing:"easeOutCubic"},createdAt:vi(),updatedAt:vi(),lastSpunAt:null,stats:{totalSpins:0,uniqueSpinners:0}},m=await Rv(yi(nt,"wheels"),f);await $u(on(nt,"users",t.uid),{"stats.totalWheels":fr(1)});const g={id:m.id,...f};return n(w=>[g,...w]),g}async function o(c,h){await $u(on(nt,"wheels",c),{...h,updatedAt:vi()}),n(f=>f.map(m=>m.id===c?{...m,...h}:m))}async function l(c){const h=RD(nt);(await Vs(yi(nt,"wheels",c,"spins"))).docs.forEach(g=>h.delete(g.ref)),(await Vs(yi(nt,"wheels",c,"analytics"))).docs.forEach(g=>h.delete(g.ref)),h.delete(on(nt,"wheels",c)),h.update(on(nt,"users",t.uid),{"stats.totalWheels":fr(-1)}),await h.commit(),n(g=>g.filter(w=>w.id!==c))}return{wheels:e,loading:i,createWheel:a,updateWheel:o,deleteWheel:l,reload:s}}async function C5(t){const e=on(nt,"wheels",t),n=await SD(e);if(!n.exists())throw new Error("Wheel not found");return{id:n.id,...n.data()}}async function D5(t){const e=Ku(yi(nt,"wheels"),Qu("shareId","==",t),bv(1)),n=await Vs(e);if(n.empty)throw new Error("Wheel not found");const i=n.docs[0];return{id:i.id,...i.data()}}function ub(){return"seg_"+Math.random().toString(36).substr(2,9)}function N5(){const t="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789";let e="";for(let n=0;n<8;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function PD({segments:t,rotation:e=0,size:n=500,options:i={}}){const r=V.useRef(null),s={borderWidth:4,borderColor:"#333333",centerRadius:35,centerColor:"#1e293b",pointerColor:"#ef4444",fontSize:14,fontFamily:"Arial, sans-serif",...i};return V.useEffect(()=>{const a=r.current;if(!a)return;const o=a.getContext("2d"),l=n/2,c=n/2,h=n/2-s.borderWidth-20;if(o.clearRect(0,0,n,n),!t||t.length===0){o.beginPath(),o.arc(l,c,h,0,Math.PI*2),o.fillStyle="#1e293b",o.fill(),o.strokeStyle=s.borderColor,o.lineWidth=s.borderWidth,o.stroke(),o.fillStyle="#64748b",o.font="16px "+s.fontFamily,o.textAlign="center",o.textBaseline="middle",o.fillText("Add segments",l,c);return}o.save(),o.translate(l,c),o.rotate(e),o.translate(-l,-c);const f=t.reduce((w,I)=>w+(I.weight||1),0);let m=-Math.PI/2;t.forEach((w,I)=>{const v=(w.weight||1)/f*Math.PI*2,y=m+v;o.beginPath(),o.moveTo(l,c),o.arc(l,c,h,m,y),o.closePath(),o.fillStyle=w.color||x5(I),o.fill(),o.strokeStyle="rgba(0, 0, 0, 0.2)",o.lineWidth=1,o.stroke();const E=m+v/2,x=h*.65,U=l+Math.cos(E)*x,F=c+Math.sin(E)*x;o.save(),o.translate(U,F),o.rotate(E+Math.PI/2),o.fillStyle="#ffffff",o.font=`bold ${s.fontSize}px ${s.fontFamily}`,o.textAlign="center",o.textBaseline="middle";let S=w.label;const T=h*.4;for(;o.measureText(S).width>T&&S.length>3;)S=S.slice(0,-1);S!==w.label&&(S+="..."),o.shadowColor="rgba(0, 0, 0, 0.5)",o.shadowBlur=2,o.shadowOffsetX=1,o.shadowOffsetY=1,o.fillText(S,0,0),o.restore(),m=y}),o.restore(),o.beginPath(),o.arc(l,c,h,0,Math.PI*2),o.strokeStyle=s.borderColor,o.lineWidth=s.borderWidth,o.stroke(),o.beginPath(),o.arc(l,c,s.centerRadius+5,0,Math.PI*2),o.fillStyle=s.borderColor,o.fill(),o.beginPath(),o.arc(l,c,s.centerRadius,0,Math.PI*2),o.fillStyle=s.centerColor,o.fill();const g=20;o.save(),o.translate(l,s.borderWidth+10),o.beginPath(),o.moveTo(0,g),o.lineTo(-g/2,0),o.lineTo(g/2,0),o.closePath(),o.fillStyle=s.pointerColor,o.fill(),o.strokeStyle="#ffffff",o.lineWidth=2,o.stroke(),o.restore()},[t,e,n,s]),A.jsx("canvas",{ref:r,width:n,height:n,style:{display:"block",maxWidth:"100%",height:"auto"}})}function x5(t){const e=["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#7CFC00","#FF6B6B","#48D1CC","#DDA0DD","#F0E68C","#87CEEB"];return e[t%e.length]}function V5(t,e){if(!t||t.length===0)return null;let n=e%(Math.PI*2);n<0&&(n+=Math.PI*2);const i=t.reduce((l,c)=>l+(c.weight||1),0);let s=-Math.PI/2-n;for(;s<0;)s+=Math.PI*2;s=s%(Math.PI*2);let a=s+Math.PI/2;a>=Math.PI*2&&(a-=Math.PI*2);let o=0;for(const l of t){const h=(l.weight||1)/i*Math.PI*2;if(a>=o&&a<o+h)return l;o+=h}return t[0]}function P5(){const{currentUser:t,signOut:e}=Nc(),{wheels:n,loading:i,createWheel:r,deleteWheel:s}=R5(),a=Fo(),[o,l]=V.useState(!1),[c,h]=V.useState(null);async function f(){const w=await r({name:"New Wheel"});a(`/wheel/${w.id}`)}function m(w){h(w),l(!0)}async function g(){c&&(await s(c.id),l(!1),h(null))}return i?A.jsxs("div",{className:"loading",children:[A.jsx("div",{className:"spinner"}),A.jsx("p",{children:"Loading your wheels..."})]}):A.jsxs("div",{children:[A.jsx("header",{className:"header",children:A.jsxs("div",{className:"container header-content",children:[A.jsx("div",{className:"logo",children:"SpinToWin"}),A.jsxs("nav",{className:"nav",children:[A.jsx("span",{className:"user-name",children:(t==null?void 0:t.displayName)||(t==null?void 0:t.email)}),A.jsx("button",{onClick:()=>e(),className:"btn btn-secondary",children:"Sign Out"})]})]})}),A.jsx("main",{className:"dashboard",children:A.jsxs("div",{className:"container",children:[A.jsxs("div",{className:"dashboard-header",children:[A.jsx("h1",{children:"My Wheels"}),A.jsx("button",{onClick:f,className:"btn btn-primary",children:"+ Create Wheel"})]}),n.length===0?A.jsxs("div",{className:"empty-state",children:[A.jsx("div",{className:"empty-icon",children:"O"}),A.jsx("h2",{children:"No wheels yet"}),A.jsx("p",{children:"Create your first spin wheel to get started!"}),A.jsx("button",{onClick:f,className:"btn btn-primary btn-large",children:"Create Your First Wheel"})]}):A.jsx("div",{className:"wheels-grid",children:n.map(w=>{var I;return A.jsxs("div",{className:"wheel-card",children:[A.jsx("div",{className:"wheel-preview",children:A.jsx(PD,{segments:w.segments,size:180})}),A.jsxs("div",{className:"wheel-info",children:[A.jsx("h3",{children:w.name}),A.jsxs("p",{children:[w.segments.length," segments | ",((I=w.stats)==null?void 0:I.totalSpins)||0," spins"]})]}),A.jsxs("div",{className:"wheel-actions",children:[A.jsx("button",{onClick:()=>a(`/wheel/${w.id}`),className:"btn btn-primary",children:"Edit"}),A.jsx("button",{onClick:()=>window.open(`/spin/${w.shareId}`,"_blank"),className:"btn btn-secondary",children:"Spin"}),A.jsx("button",{onClick:()=>m(w),className:"btn btn-icon delete-wheel",children:"X"})]})]},w.id)})})]})}),o&&A.jsxs("div",{className:"modal",children:[A.jsx("div",{className:"modal-backdrop",onClick:()=>l(!1)}),A.jsxs("div",{className:"modal-content",children:[A.jsx("h2",{children:"Delete Wheel?"}),A.jsxs("p",{children:['Are you sure you want to delete "',c==null?void 0:c.name,'"? This action cannot be undone.']}),A.jsxs("div",{className:"modal-actions",children:[A.jsx("button",{onClick:()=>l(!1),className:"btn btn-secondary",children:"Cancel"}),A.jsx("button",{onClick:g,className:"btn btn-danger",children:"Delete"})]})]})]})]})}function OD(){const{currentUser:t}=Nc();async function e(o,l){const c=vi(),h={wheelId:o,resultSegmentId:l.segmentId,resultLabel:l.label,spunBy:(t==null?void 0:t.uid)||null,spunByName:(t==null?void 0:t.displayName)||"Anonymous",isAnonymous:!t,spinDuration:l.duration||5e3,finalAngle:l.angle||0,timestamp:c,segmentCount:l.totalSegments||0};return await Rv(yi(nt,"wheels",o,"spins"),h),await $u(on(nt,"wheels",o),{"stats.totalSpins":fr(1),lastSpunAt:c}),await n(o,l),h}async function n(o,l){const c=new Date().toISOString().split("T")[0],h=new Date().getHours().toString(),f=on(nt,"wheels",o,"analytics",c);try{await $f(f,{wheelId:o,period:"daily",date:c,totalSpins:fr(1),anonymousSpins:fr(t?0:1),[`results.${l.segmentId}`]:fr(1),[`hourlyDistribution.${h}`]:fr(1)},{merge:!0})}catch(m){console.warn("Failed to update analytics:",m)}}async function i(o,l={}){const{limit:c=50}=l,h=Ku(yi(nt,"wheels",o,"spins"),Qf("timestamp","desc"),bv(c));return(await Vs(h)).docs.map(m=>{var g;return{id:m.id,...m.data(),timestamp:(g=m.data().timestamp)==null?void 0:g.toDate()}})}async function r(o,l={}){const{startDate:c=O5(30),endDate:h=new Date().toISOString().split("T")[0]}=l,f=Ku(yi(nt,"wheels",o,"analytics"),Qu("date",">=",c),Qu("date","<=",h),Qf("date","asc"));return(await Vs(f)).docs.map(g=>({id:g.id,...g.data()}))}function s(o,l){const c={};o.forEach(f=>{f.results&&Object.entries(f.results).forEach(([m,g])=>{c[m]=(c[m]||0)+g})});const h=Object.values(c).reduce((f,m)=>f+m,0);return l.map(f=>({segmentId:f.id,label:f.label,color:f.color,count:c[f.id]||0,percentage:h>0?((c[f.id]||0)/h*100).toFixed(1):"0.0"}))}function a(o){if(!o)return"Unknown";const c=new Date-o,h=Math.floor(c/1e3),f=Math.floor(h/60),m=Math.floor(f/60),g=Math.floor(m/24);return h<60?"Just now":f<60?`${f}m ago`:m<24?`${m}h ago`:g<7?`${g}d ago`:o.toLocaleDateString()}return{recordSpin:e,getSpinHistory:i,getAnalytics:r,calculateDistribution:s,formatRelativeTime:a}}function O5(t){const e=new Date;return e.setDate(e.getDate()-t),e.toISOString().split("T")[0]}function MD({segments:t,onSpinComplete:e,spinConfig:n={},size:i=500}){const[r,s]=V.useState(0),[a,o]=V.useState(!1),l=V.useRef(0),c={duration:5e3,minRotations:5,maxRotations:10,easing:"easeOutCubic",...n},h=V.useCallback(()=>{if(a||!t||t.length===0)return;o(!0);const f=c.minRotations+Math.random()*(c.maxRotations-c.minRotations),m=t.reduce((D,P)=>D+(P.weight||1),0);let g=Math.random()*m,w=0,I=0;for(let D=0;D<t.length;D++)if(I+=t[D].weight||1,g<=I){w=D;break}let N=0;for(let D=0;D<w;D++){const P=t[D].weight||1;N+=P/m*Math.PI*2}const y=(t[w].weight||1)/m*Math.PI*2,E=N+(Math.random()*.6+.2)*y,U=-Math.PI/2-E,F=l.current,T=F+f*Math.PI*2+U-F,b=performance.now(),C=D=>{const P=D-b,R=Math.min(P/c.duration,1),Ze=M5(R),St=F+T*Ze;if(l.current=St,s(St),R<1)requestAnimationFrame(C);else{o(!1);let K=St%(Math.PI*2);K<0&&(K+=Math.PI*2),l.current=K,s(K);const te=V5(t,K);e&&te&&e({segment:te,finalAngle:K,duration:c.duration})}};requestAnimationFrame(C)},[t,a,c,e]);return A.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[A.jsx(PD,{segments:t,rotation:r,size:i}),A.jsx("button",{onClick:h,disabled:a,className:"spin-button",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:a?.7:1,cursor:a?"not-allowed":"pointer"},children:a?"...":"SPIN"})]})}function M5(t){return 1-Math.pow(1-t,3)}function k5(){var He,Bn;const{id:t}=bI(),e=Fo(),n=b5(),i=OD(),[r,s]=V.useState(null),[a,o]=V.useState(!0),[l,c]=V.useState(!1),[h,f]=V.useState(!1),[m,g]=V.useState("segments"),[w,I]=V.useState(!1),[N,v]=V.useState(null),[y,E]=V.useState([]),[x,U]=V.useState([]),[F,S]=V.useState(null);V.useEffect(()=>{T()},[t]),V.useEffect(()=>{m==="analytics"&&r&&b()},[m,r]);async function T(){try{const $=await C5(t);s($)}catch($){console.error("Failed to load wheel:",$),n.error("Failed to load wheel"),e("/dashboard")}finally{o(!1)}}async function b(){try{const[$,et]=await Promise.all([i.getSpinHistory(t,{limit:10}),i.getAnalytics(t)]);E($),U(et)}catch($){console.warn("Failed to load analytics:",$)}}async function C(){if(h){c(!0);try{await $u(on(nt,"wheels",t),{name:r.name,segments:r.segments,spinConfig:r.spinConfig,appearance:r.appearance,visibility:r.visibility,allowAnonymousSpins:r.allowAnonymousSpins}),f(!1),n.success("Wheel saved!")}catch($){console.error("Failed to save:",$),n.error("Failed to save wheel")}finally{c(!1)}}}function D($){s(et=>({...et,...$})),f(!0)}function P(){v(null),I(!0)}function R($){v($),I(!0)}function Ze($){if(N){const et=r.segments.map(mt=>mt.id===N.id?{...mt,...$}:mt);D({segments:et})}else{const et={id:"seg_"+Math.random().toString(36).substr(2,9),...$};D({segments:[...r.segments,et]})}I(!1)}function St($){if(r.segments.length<=2){n.error("Wheel must have at least 2 segments");return}D({segments:r.segments.filter(et=>et.id!==$)})}async function K($){S($.segment)}function te(){const $=`${window.location.origin}/spin/${r.shareId}`;navigator.clipboard.writeText($),n.success("URL copied!")}if(a)return A.jsxs("div",{className:"loading",children:[A.jsx("div",{className:"spinner"}),A.jsx("p",{children:"Loading wheel..."})]});if(!r)return null;const ee=i.calculateDistribution(x,r.segments),be=Math.max(...ee.map($=>$.count),1);return A.jsxs("div",{children:[A.jsx("header",{className:"header",children:A.jsxs("div",{className:"container header-content",children:[A.jsx("div",{className:"logo",children:"SpinToWin"}),A.jsxs("nav",{className:"nav",children:[A.jsx("button",{onClick:C,disabled:!h||l,className:"btn btn-primary",children:l?"Saving...":h?"Save*":"Save"}),A.jsx("button",{onClick:()=>e("/dashboard"),className:"btn btn-secondary",children:"Back"})]})]})}),A.jsx("main",{className:"wheel-editor",children:A.jsxs("div",{className:"editor-layout",children:[A.jsx("section",{className:"wheel-preview-section",children:A.jsx("div",{className:"wheel-container",children:A.jsx(MD,{segments:r.segments,onSpinComplete:K,spinConfig:r.spinConfig,size:500})})}),A.jsxs("section",{className:"editor-panel",children:[A.jsxs("div",{className:"editor-tabs",children:[A.jsx("button",{className:`tab-btn ${m==="segments"?"active":""}`,onClick:()=>g("segments"),children:"Segments"}),A.jsx("button",{className:`tab-btn ${m==="settings"?"active":""}`,onClick:()=>g("settings"),children:"Settings"}),A.jsx("button",{className:`tab-btn ${m==="share"?"active":""}`,onClick:()=>g("share"),children:"Share"}),A.jsx("button",{className:`tab-btn ${m==="analytics"?"active":""}`,onClick:()=>g("analytics"),children:"Analytics"})]}),m==="segments"&&A.jsxs("div",{className:"tab-content",children:[A.jsx("div",{className:"panel-header",children:A.jsx("input",{type:"text",className:"wheel-name-input",value:r.name,onChange:$=>D({name:$.target.value}),placeholder:"Wheel Name"})}),A.jsx("div",{className:"segments-list",children:r.segments.map($=>A.jsxs("div",{className:"segment-item",children:[A.jsx("div",{className:"segment-color",style:{background:$.color}}),A.jsx("span",{className:"segment-label",children:$.label}),A.jsxs("span",{className:"segment-weight",children:[$.weight,"x"]}),A.jsxs("div",{className:"segment-actions",children:[A.jsx("button",{onClick:()=>R($),children:"Edit"}),A.jsx("button",{onClick:()=>St($.id),disabled:r.segments.length<=2,className:"delete-btn",children:"Del"})]})]},$.id))}),A.jsx("button",{onClick:P,className:"btn btn-secondary btn-full",children:"+ Add Segment"})]}),m==="settings"&&A.jsxs("div",{className:"tab-content",children:[A.jsx("h3",{children:"Spin Settings"}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Spin Duration (seconds)"}),A.jsx("input",{type:"number",min:"1",max:"20",value:r.spinConfig.duration/1e3,onChange:$=>D({spinConfig:{...r.spinConfig,duration:parseInt($.target.value)*1e3}})})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Min Rotations"}),A.jsx("input",{type:"number",min:"1",max:"20",value:r.spinConfig.minRotations,onChange:$=>D({spinConfig:{...r.spinConfig,minRotations:parseInt($.target.value)}})})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Max Rotations"}),A.jsx("input",{type:"number",min:"1",max:"30",value:r.spinConfig.maxRotations,onChange:$=>D({spinConfig:{...r.spinConfig,maxRotations:parseInt($.target.value)}})})]}),A.jsx("h3",{children:"Appearance"}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Border Color"}),A.jsx("input",{type:"color",value:r.appearance.borderColor,onChange:$=>D({appearance:{...r.appearance,borderColor:$.target.value}})})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Font Size"}),A.jsx("input",{type:"number",min:"10",max:"24",value:r.appearance.fontSize,onChange:$=>D({appearance:{...r.appearance,fontSize:parseInt($.target.value)}})})]})]}),m==="share"&&A.jsxs("div",{className:"tab-content",children:[A.jsx("h3",{children:"Share Your Wheel"}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Visibility"}),A.jsxs("select",{value:r.visibility,onChange:$=>D({visibility:$.target.value}),children:[A.jsx("option",{value:"private",children:"Private (only you)"}),A.jsx("option",{value:"unlisted",children:"Unlisted (anyone with link)"}),A.jsx("option",{value:"public",children:"Public"})]})]}),A.jsx("div",{className:"form-group",children:A.jsxs("label",{children:[A.jsx("input",{type:"checkbox",checked:r.allowAnonymousSpins,onChange:$=>D({allowAnonymousSpins:$.target.checked})}),"Allow anonymous spins"]})}),r.visibility!=="private"&&A.jsxs("div",{className:"share-url-section",children:[A.jsx("label",{children:"Share URL"}),A.jsxs("div",{className:"share-url-group",children:[A.jsx("input",{type:"text",readOnly:!0,value:`${window.location.origin}/spin/${r.shareId}`}),A.jsx("button",{onClick:te,className:"btn btn-secondary",children:"Copy"})]}),A.jsx("a",{href:`/spin/${r.shareId}`,target:"_blank",className:"btn btn-primary btn-full",children:"Open Spin Page"})]})]}),m==="analytics"&&A.jsxs("div",{className:"tab-content",children:[A.jsx("h3",{children:"Analytics"}),A.jsxs("div",{className:"stats-grid",children:[A.jsxs("div",{className:"stat-card",children:[A.jsx("div",{className:"stat-value",children:((He=r.stats)==null?void 0:He.totalSpins)||0}),A.jsx("div",{className:"stat-label",children:"Total Spins"})]}),A.jsxs("div",{className:"stat-card",children:[A.jsx("div",{className:"stat-value",children:((Bn=r.stats)==null?void 0:Bn.uniqueSpinners)||0}),A.jsx("div",{className:"stat-label",children:"Unique Spinners"})]})]}),A.jsx("h4",{children:"Result Distribution"}),A.jsx("div",{className:"distribution-chart",children:ee.map($=>A.jsxs("div",{className:"distribution-bar",children:[A.jsx("span",{className:"bar-label",children:$.label}),A.jsx("div",{className:"bar-track",children:A.jsx("div",{className:"bar-fill",style:{width:`${$.count/be*100}%`,background:$.color}})}),A.jsxs("span",{className:"bar-value",children:[$.percentage,"%"]})]},$.segmentId))}),A.jsx("h4",{children:"Recent Spins"}),A.jsx("div",{className:"recent-spins",children:y.length===0?A.jsx("p",{style:{color:"var(--text-muted)",fontSize:"0.875rem"},children:"No spins yet"}):y.map($=>{const et=r.segments.find(mt=>mt.id===$.resultSegmentId);return A.jsxs("div",{className:"recent-spin-item",children:[A.jsxs("div",{className:"recent-spin-result",children:[A.jsx("div",{className:"recent-spin-color",style:{background:(et==null?void 0:et.color)||"#666"}}),A.jsx("span",{children:$.resultLabel})]}),A.jsx("span",{className:"recent-spin-time",children:i.formatRelativeTime($.timestamp)})]},$.id)})})]})]})]})}),w&&A.jsx(L5,{segment:N,onSave:Ze,onClose:()=>I(!1)}),F&&A.jsx(U5,{result:F,onClose:()=>S(null)})]})}function L5({segment:t,onSave:e,onClose:n}){const[i,r]=V.useState((t==null?void 0:t.label)||""),[s,a]=V.useState((t==null?void 0:t.color)||"#FF6384"),[o,l]=V.useState((t==null?void 0:t.weight)||1),[c,h]=V.useState((t==null?void 0:t.link)||"");function f(){i.trim()&&e({label:i,color:s,weight:o,link:c.trim()||null})}return A.jsxs("div",{className:"modal",children:[A.jsx("div",{className:"modal-backdrop",onClick:n}),A.jsxs("div",{className:"modal-content",children:[A.jsx("h2",{children:t?"Edit Segment":"Add Segment"}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Label"}),A.jsx("input",{type:"text",value:i,onChange:m=>r(m.target.value),placeholder:"e.g., Pizza",maxLength:"50",autoFocus:!0})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Color"}),A.jsx("input",{type:"color",value:s,onChange:m=>a(m.target.value)})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Weight (1-100)"}),A.jsx("input",{type:"number",min:"1",max:"100",value:o,onChange:m=>l(parseInt(m.target.value))}),A.jsx("small",{children:"Higher weight = more likely to land on"})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Link (optional)"}),A.jsx("input",{type:"url",value:c,onChange:m=>h(m.target.value),placeholder:"https://example.com"}),A.jsx("small",{children:"Button link shown when this segment wins"})]}),A.jsxs("div",{className:"modal-actions",children:[A.jsx("button",{onClick:n,className:"btn btn-secondary",children:"Cancel"}),A.jsx("button",{onClick:f,className:"btn btn-primary",disabled:!i.trim(),children:"Save"})]})]})]})}function U5({result:t,onClose:e}){return A.jsxs("div",{className:"modal",children:[A.jsx("div",{className:"modal-backdrop",onClick:e}),A.jsxs("div",{className:"modal-content result-modal-content",children:[A.jsx("h2",{children:"Test Result:"}),A.jsx("div",{className:"modal-result",style:{color:t.color},children:t.label}),t.link&&A.jsx("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary btn-large",style:{marginBottom:"0.5rem"},children:"Visit Link"}),A.jsx("button",{onClick:e,className:"btn btn-secondary btn-large",children:"Close"})]})]})}function z5(){const{shareId:t}=bI(),e=OD(),[n,i]=V.useState(null),[r,s]=V.useState(!0),[a,o]=V.useState(!1),[l,c]=V.useState(null),[h,f]=V.useState([]);V.useEffect(()=>{m()},[t]);async function m(){try{const w=await D5(t);if(w.visibility==="private"){o(!0);return}i(w);const I=await e.getSpinHistory(w.id,{limit:5});f(I.map(N=>{const v=w.segments.find(y=>y.id===N.resultSegmentId);return{label:N.resultLabel,color:(v==null?void 0:v.color)||"#666",time:N.timestamp}}))}catch(w){console.error("Failed to load wheel:",w),o(!0)}finally{s(!1)}}async function g(w){try{await e.recordSpin(n.id,{segmentId:w.segment.id,label:w.segment.label,duration:w.duration,angle:w.finalAngle,totalSegments:n.segments.length}),f(I=>[{label:w.segment.label,color:w.segment.color,time:new Date},...I.slice(0,4)]),c(w.segment)}catch(I){console.warn("Failed to record spin:",I),c(w.segment)}}return r?A.jsxs("div",{className:"loading",children:[A.jsx("div",{className:"spinner"}),A.jsx("p",{children:"Loading wheel..."})]}):a||!n?A.jsxs("div",{className:"error-state",children:[A.jsx("h2",{children:"Wheel Not Found"}),A.jsx("p",{children:"This wheel may have been deleted or the link is invalid."}),A.jsx("a",{href:"/",className:"btn btn-primary",children:"Go Home"})]}):A.jsxs("div",{className:"spin-page",children:[A.jsx("header",{className:"header header-minimal",children:A.jsxs("div",{className:"container header-content",children:[A.jsx("div",{className:"logo",children:"SpinToWin"}),A.jsx("nav",{className:"nav",children:A.jsx("a",{href:"/login",className:"btn btn-secondary",children:"Create Your Own"})})]})}),A.jsx("main",{className:"spin-main",children:A.jsxs("div",{className:"spin-content",children:[A.jsx("h1",{className:"wheel-title",children:n.name}),A.jsx("div",{className:"spin-wheel-container",children:A.jsx(MD,{segments:n.segments,onSpinComplete:g,spinConfig:n.spinConfig,size:500})}),A.jsxs("div",{className:"recent-results",children:[A.jsx("h3",{children:"Recent Results"}),A.jsx("div",{className:"recent-list",children:h.length===0?A.jsx("div",{className:"recent-item",style:{color:"var(--text-muted)"},children:"No spins yet. Be the first!"}):h.map((w,I)=>A.jsxs("div",{className:"recent-item",children:[A.jsx("div",{className:"recent-color",style:{background:w.color}}),A.jsx("span",{children:w.label})]},I))})]})]})}),l&&A.jsx(B5,{result:l,onClose:()=>c(null)})]})}function B5({result:t,onClose:e}){return A.jsxs("div",{className:"modal",children:[A.jsx("div",{className:"modal-backdrop",onClick:e}),A.jsxs("div",{className:"modal-content result-modal-content",children:[A.jsx(j5,{}),A.jsx("h2",{children:"You got:"}),A.jsx("div",{className:"modal-result",style:{color:t.color},children:t.label}),t.link&&A.jsx("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary btn-large",style:{marginBottom:"0.5rem"},children:"Visit Link"}),A.jsx("button",{onClick:e,className:"btn btn-secondary btn-large",children:"Spin Again!"})]})]})}function j5(){const t=["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40"],e=Array.from({length:50},(n,i)=>({id:i,left:Math.random()*100,delay:Math.random()*.5,color:t[Math.floor(Math.random()*t.length)],size:8+Math.random()*8}));return A.jsxs("div",{className:"confetti-container",children:[e.map(n=>A.jsx("div",{style:{position:"absolute",width:n.size,height:n.size,backgroundColor:n.color,left:`${n.left}%`,top:"-10px",transform:`rotate(${Math.random()*360}deg)`,animation:`fall ${1+Math.random()*2}s linear forwards`,animationDelay:`${n.delay}s`}},n.id)),A.jsx("style",{children:`
          @keyframes fall {
            to {
              transform: translateY(400px) rotate(720deg);
              opacity: 0;
            }
          }
          .confetti-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 300px;
            overflow: hidden;
            pointer-events: none;
          }
        `})]})}function cb({children:t}){const{currentUser:e}=Nc();return e?t:A.jsx(CI,{to:"/login"})}function F5(){return A.jsxs(rP,{children:[A.jsx(Ta,{path:"/",element:A.jsx(CI,{to:"/dashboard"})}),A.jsx(Ta,{path:"/login",element:A.jsx(I5,{})}),A.jsx(Ta,{path:"/dashboard",element:A.jsx(cb,{children:A.jsx(P5,{})})}),A.jsx(Ta,{path:"/wheel/:id",element:A.jsx(cb,{children:A.jsx(k5,{})})}),A.jsx(Ta,{path:"/spin/:shareId",element:A.jsx(z5,{})})]})}function q5(){return A.jsx(DP,{children:A.jsx(w5,{children:A.jsx(A5,{children:A.jsx(F5,{})})})})}oV.createRoot(document.getElementById("root")).render(A.jsx(V.StrictMode,{children:A.jsx(q5,{})}));
